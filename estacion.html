<!DOCTYPE html>
<html lang="en">
<head>
    <title>GCV Institute</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.27.3/dist/apexcharts.min.js"></script>
    <script src="https://cdn.canvasjs.com/canvasjs.min.js"></script>
    <script src="jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style type="text/css">

    @media screen and (min-width: 375px) and (max-width: 390px) {
        .chart-container,.chart-container2 {
        position: relative;
        height: 914px;
        width: 375px;
        }
    }

    @media screen and (max-width: 390px){
        .chart-container,.chart-container2 {
            position: relative;
        height: 914px;
        width: 390px;
        }
    }

    @media screen and (min-width: 390px) and (max-width: 400px) {
        .chart-container,.chart-container2 {
            position: relative;
        height: 914px;
        width: 390px;
        }
    }

    @media screen and (min-width: 400px) and (max-width: 460px) {
        .chart-container,.chart-container2 {
        position: relative;
        height: 914px;
        width: 400px;
        }
    }

    @media screen and (min-width: 200px) and (max-width: 1024px) {
        .risk_speedometer{
        padding-bottom: 40px !important;
        }

        .center_line{
        border-top: 1px solid rgb(51, 51, 56);
        border-bottom: 1px solid rgb(51, 51, 56);
        padding-bottom: 40px;
        }

        .radarUSText{
        padding-bottom: 40px;
        }
    }


    @media (min-width:1025px) {
        .mid_line{
        border-right: 1px solid rgb(51, 51, 56);
        }

        .center_line{
        border-top: 1px solid rgb(51, 51, 56);
        border-bottom: 1px solid rgb(51, 51, 56);
        padding-bottom: 40px;
        }
    }


    .csv-file, .csv-file2 {
        cursor: pointer;
    }

    #Expansion{
        margin-top: 20px;
        }

    #radarChart {
        margin-top: -40px;  /* Ajusta estos valores según tus necesidades */
        margin-bottom: -40px;
    }

    #radarChartUS {
        margin-top: -40px;  /* Ajusta estos valores según tus necesidades */
        margin-bottom: -40px;
    }

    #myChart, #myChartUSA{
        margin-top: -170px;
        margin-bottom: -60px;
    }

    .chart9{
        width: 300px;
        height: 300px;
    }

    .center_line{
        border-top: 1px solid rgb(51, 51, 56);
        border-bottom: 1px solid rgb(51, 51, 56);
    }

    .tab-title-large {
        display: block;
        text-decoration: none;
        color: #00A1DF;
        background-color: rgb(220, 246, 250);
        padding-top: 3px;
        padding-left: 15px;
        padding-bottom: 5px;
        border-radius: 10px;
        transition: background-color 0.3s ease;
        margin-top: 10px;
    }

    .tab-title-large:hover {
        background-color: rgb(0, 161, 223);
        color: white;
    }

    .tab-title-large:hover span {
        color: rgb(255, 255, 255);
    }

    .tab-label {
        display: block;
        background-color: rgb(220, 246, 250);
        color: rgb(0, 161, 223);
        border-radius: 10px;
        padding-top: 3px;
        padding-left: 15px;
        padding-bottom: 0;
        transition: background-color 0.3s ease;
    }

    .tab-title-large:link,
    .tab-title-large:visited,
    .tab-title-large:active {
        text-decoration: none;
    }

    .tab-label:hover {
        background-color: rgb(0, 161, 223);
        color: white;
    }
    .tab-label-clicked {
        background-color: rgb(0, 161, 223);
        color: white;
    }

    .tab-toggle {
        position: absolute;
        opacity: 0;
        z-index: -1;
    }

    .hidden { display: none}

    .widgets { display: flex}

    #mySelect { margin-top: 20px; margin-bottom: 20px}

    .sticky-container {
        min-height: auto; /* Asegúrate de que este contenedor sea suficientemente alto para permitir el desplazamiento */
    }

    .rectangle {
        background-color: rgb(255, 255, 255);
        border: 0px solid rgb(0, 0, 0);
        border-radius: 10px;
        padding: 10px;
        height: 110px;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
        position: sticky;
        top: 53px;
        z-index: 1000;
    }

    .description-text {
        font-family: 'Montserrat', sans-serif;
        text-align: center;
        font-weight: bold;
        font-size: 44px;
        margin: 0;
        padding: 0;
        line-height: 100%;
        white-space: nowrap; /* Evita que el texto se divida en varias líneas */
        overflow: hidden; /* Oculta el texto desbordante */
        text-overflow: ellipsis; /* Agrega puntos suspensivos cuando el texto se desborda */
    }

    .col-12 .chart_container {
        position: relative;
        z-index: 0;
    }

    .hover-zoom {
        transition: transform 0.3s ease;
    }

    .hover-zoom:hover {
        transform: scale(1.03) !important;
    }

    .ultima-fila {
        border-bottom: 2px solid #1B466D;
        border-top: 1px solid #3A3B3C;
    }
    .chart-container2 {
    width: 100%;
    }
    #plotlyChart {
    width: 100%;
    }

    .table-container {
        display: flex;
        justify-content: center;
    }

    .table {
        width: auto;
        border-collapse: collapse;
    }

    .table th,
    .table td {
        padding: 1px;
        text-align: center;
    }
    /* Base Styles y botones*/
    *, ::after, ::before {
        box-sizing: border-box;
    }

    body {
        font-family: Helvetica, Arial, sans-serif;
        font-weight: 400;
        font-size: 14px;
        color: rgb(51, 71, 91);
        line-height: 24px;
    }

    .hs-portal-font {
        font-family: var(--uicomponents-font-family,"Lexend Deca",Helvetica,Arial,sans-serif)!important;
    }

    .fiXwRi {
        position: relative;
        display: inline-flex;
        -webkit-box-align: baseline;
        align-items: baseline;
        line-height: 1;
    }

    button {
        appearance: auto;
        font-style: normal;
        font-weight: normal;
        font-size: 14px; /* Default from body */
        font-family: Helvetica, Arial, sans-serif; /* Default from body */
        text-rendering: auto;
        letter-spacing: normal;
        word-spacing: normal;
        line-height: normal;
        text-transform: none;
        text-indent: 0px;
        text-shadow: none;
        display: inline-block;
        text-align: center;
        align-items: flex-start;
        cursor: default;
        writing-mode: horizontal-tb !important;
        margin: 0em;
        padding-block: 1px;
        padding-inline: 6px;
        border-width: 2px;
        border-style: outset;
        border-color: buttonborder;
        border-image: initial;
    }


    .td_tipos {
      padding: 2px;
      font-family: Helvetica, Arial, sans-serif;
      font-size: 12px;
    }

    .th_tipos {
      padding: 2px;
      font-family: Helvetica, Arial, sans-serif;
      font-size: 12px;
      border-bottom: 1px solid black; /* Borde inferior negro y grueso */
    }

    .positive-rate { color: green; }
    .negative-rate { color: red; }


    /* Ajustar el ancho de las columnas de la tabla EUROPA */
    #interestRatesTableSpain th,
    #interestRatesTableSpain td {
      width: 20px;
      margin-left: 0;
      padding: 5px;
      text-align: center;
      box-sizing: border-box;
  }


    #interestRatesTableGermany th,
    #interestRatesTableGermany td {
      width: 20px;
      margin-left: 0;
      padding: 5px;
      text-align: center;
      box-sizing: border-box;
  }

  #interestRatesTableBritain th,
    #interestRatesTableBritain td {
      width: 20px;
      margin-left: 0;
      padding: 5px;
      text-align: center;
      box-sizing: border-box;
  }

  #interestRatesTableItaly th,
    #interestRatesTableItaly td {
      width: 20px;
      margin-left: 0;
      padding: 5px;
      text-align: center;
      box-sizing: border-box;
  }


  /* Ajustar el ancho de las columnas de la tabla USA*/
    #interestRatesTableUSA th,
    #interestRatesTableUSA td {
      width: 20px;
      margin-left: 0;
      padding: 5px;
      text-align: center;
      box-sizing: border-box;
  }


    #interestRatesTableChina th,
    #interestRatesTableChina td {
      width: 20px;
      margin-left: 0;
      padding: 5px;
      text-align: center;
      box-sizing: border-box;
  }

  #interestRatesTableIndia th,
    #interestRatesTableIndia td {
      width: 20px;
      margin-left: 0;
      padding: 5px;
      text-align: center;
      box-sizing: border-box;
  }

  #interestRatesTableJapon th,
    #interestRatesTableJapon td {
      width: 20px;
      margin-left: 0;
      padding: 5px;
      text-align: center;
      box-sizing: border-box;
  }

    .bTbAgE {
        border: none;
        position: relative;
        box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 4px, rgba(0, 0, 0, 0.2) 0px 2px 12px;
        border-radius: 50%;
        height: 60px;
        width: 60px;
        transition: transform 100ms ease-in-out 0s;
    }

    .bTbAgE:hover {
        transform: scale(1.1);
    }

    .bTbAgE:active {
        transform: scale(0.9); /* Aumenta ligeramente el tamaño cuando se hace clic */
        opacity: 0.8; /* Disminuye la opacidad para dar la sensación de pulsación */
    }

    element.style {
        background-color: rgb(46, 71, 93);
    }

    /* Respuestas usuario */
    .option {
        cursor: pointer;
        padding: 5px 10px;
        display: inline-block;
        margin: 5px;
        border: 1px solid #ccc;
        border-radius: 5px;
        transition: background-color 0.3s;
    }

    .option:hover {
        background-color: #eee;
    }

    .hidden {
        display: none;
    }

    #chatbotButton {
        position: fixed;
        bottom: 15px;
        right: 15px;
        z-index: 1000000; /* para asegurarse de que esté encima de otros elementos */
        cursor: pointer;
    }

    /* Contenedor chatbot y mensajes */
    #c {
        position: fixed;
        bottom: 90px;
        right: 15px;
        width: 400px;
        background-color: #fff;
        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
        border-radius: 8px;
        padding: 20px;
        z-index: 999999; /* debajo del botón */
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s, visibility 0.3s;
        height: auto;
        max-height: 500px;
        overflow-y: scroll;
    }

    #chatbotContainer.visible {
        opacity: 1;
        visibility: visible;
    }

    #chatbotContainer {
        padding: 0;  /* Asegurarse de que no haya relleno en el contenedor */
    }
    #chatbotContainer .options {
        margin-left: 50px;
        margin-top: -5px;
        margin-bottom: 25px;
    }
    .yes-option {
    margin-left: 35px;
    margin-bottom: 25px
    }
    /* 1r mensaje de bienvenida */
    #messageContainer {
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
    }

    .message-container {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        margin-bottom: 5px;
    }

    .message-container.bot {
        flex-direction: row;
        align-items: flex-start;
        margin-left: 20px;
    }

    .message.user-message {
        align-self: flex-end; /* Alinea el mensaje a la derecha en el contenedor flex */
        padding: 8px 16px;
        position: relative;
        min-height: 32px;
        word-break: break-all;
        box-sizing: border-box;
        border-style: solid;
        border-width: 0px;
        border-color: rgba(0, 0, 0, 0.2);
        background-color: rgb(46, 71, 93);
        color: rgb(255, 255, 255);
        display: inline-flex;
        align-items: flex-start;
        border-radius: 8px 8px 0px 8px; /* Cambiar el borde redondeado para que se vea mejor alineado a la derecha */
        max-width: 284px;
        align-content: stretch;
        flex-wrap: nowrap;
        flex-direction: column;
        margin-top: 5px;
        font-size: 14px;
        margin-right: 15px;
    }

    .message.bot-message {
        font-size: 14px;
        padding: 8px 16px;
        position: relative;
        min-height: 32px;
        word-break: break-word;
        box-sizing: border-box;
        border-style: solid;
        border-width: 0px;
        border-color: rgb(31, 57, 85);
        background-color: rgb(234, 240, 246);
        color: rgb(59, 67, 75);
        display: inline-flex;
        align-items: center;
        flex-direction: column;
        border-radius: 0px 8px 8px 8px;
        max-width: 284px;
        margin-bottom: 1px;
        margin-top:-3px;
    }

    /* Tiempo y configuracion nombre bot */
    .timestamp.user {
        font-size: 10px;
        align-self: flex-end;
        color: #aaa;
        margin-top: 1px;
        margin-right: 15px;
    }

    .timestamp.bot {
        font-size: 10px;
        align-self: flex-start;
        color: #aaa;
        margin-top: 1px;
    }

    .bot-name {
        font-weight: bold; /* Para hacerlo en negrita */
        margin-bottom: 2px; /* Un pequeño margen para separarlo del mensaje */
        font-size: 13px;
        margin-top: -4px;
    }

    .bot-avatar {
        width: 40px;
        height: 40px;
        margin-right: 8px; /* Espaciado entre la imagen y el texto */
        background-image: url('https://www.dropbox.com/scl/fi/spaoxpnvhgdy57lullrs2/Logo-tradingview.png?rlkey=i1wraqeonygqve8nxvjhpdrdm&dl=1');
        background-size: cover;
        margin-left:-10px;
        margin-top: -4px;
    }

    .bot-content {
        display: flex;
        flex-direction: column;
    }

    /* Ajustar la posición de los puntos de la animación */
    .typing-indicator {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
        height: 100%;
        position: absolute;
        bottom: 0;
        width: 100%; /* Ocupa todo el ancho del contenedor */
    }

    /* Estilos para el contenedor de la animación de escribiendo */
    .typing-message {
        padding: 8px 16px;
        position: relative;
        min-height: 32px;
        word-break: break-word;
        box-sizing: border-box;
        border-style: solid;
        border-width: 0px;
        border-color: rgb(31, 57, 85);
        background-color: rgb(234, 240, 246);
        color: rgb(59, 67, 75);
        display: inline-flex;
        align-items: center;
        flex-direction: column;
        border-radius: 0px 8px 8px 8px;
        max-width: 284px;
        margin-top: 0px;
        justify-content: center;
    }

    .typing-indicator span {
        background-color: #333;
        border-radius: 50%;
        display: inline-block;
        height: 6px;
        margin: 0 2px;
        width: 6px;
        transform: scale(0);
        animation: bounce 1s infinite;
    }

    .typing-indicator span:nth-child(1) {
        left: 0;
        animation-delay: 0s;
    }

    .typing-indicator span:nth-child(2) {
        left: 10px;
        animation-delay: 0.2s;
    }

    .typing-indicator span:nth-child(3) {
        left: 20px;
        animation-delay: 0.4s;
    }

    @keyframes bounce {
        0%, 80%, 100% {
            transform: scale(0);
        }
        40% {
            transform: scale(1);
        }
    }

    .chat-header {
        background-color: rgb(72, 70, 109);  /* Color de fondo */
        color: white;  /* Color del texto */
        padding: 11px;  /* Espaciado interno */
        text-align: center;  /* Centrar el texto */
        font-weight: bold;  /* Texto en negrita */
        position: sticky;  /* Hacer que el encabezado sea "pegajoso" */
        top: 0;  /* Alinear con la parte superior del contenedor */
        z-index: 1000000;  /* Asegurarse de que esté encima del contenido */
        width: 100%;  /* Ocupar todo el ancho del contenedor */
        margin: 0;  /* Sin márgenes externos */
        margin-bottom: 15px;
    }

         /* MENU DESPLEGABLE */
         details > summary.dropdown-title {
           cursor: pointer;
           list-style: none;
           margin: 0;
           color: rgb(100, 100, 100);
           padding-top: 5px;
           padding-left: 15px;
           margin-bottom: -10px;
           margin-top: 15px;
           font-size: 1.25rem; /* Ajusta esto al tamaño de tu <h5> */
           font-weight: 500; /* Ajusta esto al peso de tu <h5> */
           display: flex;
           justify-content: space-between;
           align-items: center;
           }

           details > summary.dropdown-title::-webkit-details-marker {
               display: none;
           }

           details > ul {
               padding-left: 20px;
           }

           /* Estilo para el ícono de desplegable */
           details > summary .dropdown-icon {
               font-size: 0.8rem; /* Ajusta el tamaño del ícono según sea necesario */
               margin-left: 5px; /* Espacio entre el título y el ícono */
           }

</style>
</head>
<body>

<script>

// Función para realizar el scroll de la ventana y marcar los menús de la estación
window.onload = function() {
    var checkboxes = document.querySelectorAll('.tab-toggle');

    for (var i = 0; i < checkboxes.length; i++) {
        checkboxes[i].addEventListener('change', function() {
            var label = this.parentNode;

            // Comprueba el estado del checkbox y agrega o remueve la clase 'tab-label-clicked'
            if (this.checked) {
                label.classList.add('tab-label-clicked');

                // Identifica el contenido correspondiente al checkbox marcado
                var contentId = this.dataset.filter;
                var contentElement = document.querySelector('.tab-content.' + contentId);

                // Calcula la posición del elemento y resta 40px
                var position = contentElement.getBoundingClientRect().top + window.pageYOffset - 225;

                // Realiza un scroll automático hasta la posición calculada
                window.scrollTo({top: position, behavior: "smooth"});
            } else {
                label.classList.remove('tab-label-clicked');
            }
        });

        // Agrega la clase 'tab-label-clicked' a los labels cuyo checkbox está marcado al cargar la página
        if (checkboxes[i].checked) {
            checkboxes[i].parentNode.classList.add('tab-label-clicked');
        }
    }
};
</script>

<div class="tab-menu">
  <div class="row">
    <div class="col-md-2.5" style="box-shadow: 0 0 30px rgba(0,0,0,0.15); border: 1px solid #a6a3a3; background-color: rgb(255, 255, 255); padding:30px; border-radius: 10px;">
      <div class="sticky-container" style="position: sticky; top:80px;">
        <h3 style = "color: rgb(100, 100, 100)">Estación Financiera</h3>
        <hr>
        <details>
          <summary class="dropdown-title">Informes <span class="dropdown-icon">▼</span></summary>
          <ul style="list-style: none">
            <hr style="margin-bottom: 15px; margin-top: 15px">
              <li style="margin-bottom: 15px;">
                  <a href="https://gvcinstitute.com/momentum-report" target="_blank" class="tab-title-large hover-zoom">
                      <span>Daily Report</span> -
                      <span id="current_date"></span>
                  </a>
              </li>
              <li style="margin-bottom: 15px;">
                  <a href="https://gvcinstitute.com/wp-content/uploads/2024/04/EUR_2024_04_22.pdf" download="Informe_IA_europe.pdf" class="tab-title-large hover-zoom">
                      <span>Informe IA: Europa</span>
                  </a>
              </li>
              <li style="margin-bottom: 15px;">
                  <a href="https://gvcinstitute.com/wp-content/uploads/2024/04/USA_2024_04_22.pdf" download="Informe_IA_eeuu.pdf" class="tab-title-large hover-zoom">
                      <span>Informe IA: US</span>
                  </a>
              </li>
              <li style="margin-bottom: -15px;">
                <a class="tab-title-large hover-zoom">
                    <span>Informe IA: Catalunya</span>
                </a>
            </li>
            </ul>
          </details>
          <hr style="margin-bottom: 15px; margin-top: 15px">



          <details>
            <summary class="dropdown-title">Europa <span class="dropdown-icon">▼</span></summary>
                <ul style="list-style: none">
                  <hr style="margin-bottom: 15px; margin-top: 15px">
                  <li style="margin-bottom: 5px">
                    <label for="tab-toggle-1" class="tab-label hover-zoom" style="padding-bottom: 5px">
                      <input type="checkbox" id="tab-toggle-1" class="tab-toggle" data-filter="filter1" checked>
                      <span class="tab-title">Economía Real</span>
                    </label>
                  </li>
                  <li style="margin-bottom: 5px">
                    <label for="tab-toggle-2" class="tab-label hover-zoom" style="padding-bottom: 5px">
                      <input type="checkbox" id="tab-toggle-2" class="tab-toggle" data-filter="filter2">
                      <span class="tab-title">Economía Financiera</span>
                    </label>
                  </li>
                  <li style="margin-bottom: -15px;">
                    <label for="tab-toggle-8" class="tab-label hover-zoom" style="padding-bottom: 5px">
                      <input type="checkbox" id="tab-toggle-8" class="tab-toggle" data-filter="filter8">
                      <span class="tab-title">Evolución curva tipos de interés</span>
                    </label>
                  </li>
                </ul>
             </details>
             <hr style="margin-bottom: 15px; margin-top: 15px">

             <details>
              <summary class="dropdown-title">España <span class="dropdown-icon">▼</span></summary>
              <ul style="list-style: none">
                <hr style="margin-bottom: 15px; margin-top: 15px">
                  <li style="margin-bottom: 5px;">
                    <label for="tab-toggle-10" class="tab-label hover-zoom" style="padding-bottom: 5px">
                      <input type="checkbox" id="tab-toggle-10" class="tab-toggle" data-filter="filter10">
                      <span class="tab-title">Economía Real</span>
                    </label>
                  </li>
                  <li style="margin-bottom: -15px;">
                    <label for="tab-toggle-11" class="tab-label hover-zoom" style="padding-bottom: 5px">
                      <input type="checkbox" id="tab-toggle-11" class="tab-toggle" data-filter="filter11">
                      <span class="tab-title">Catalunya</span>
                    </label>
                  </li>
                </ul>
              </details>
              <hr style="margin-bottom: 15px; margin-top: 15px">



              <details>
                <summary class="dropdown-title">US/Asia <span class="dropdown-icon">▼</span></summary>
                <ul style="list-style: none">
                  <hr style="margin-bottom: 15px; margin-top: 15px">
                   <li style="margin-bottom: 5px">
                     <label for="tab-toggle-3" class="tab-label hover-zoom" style="padding-bottom: 5px">
                       <input type="checkbox" id="tab-toggle-3" class="tab-toggle" data-filter="filter3">
                       <span class="tab-title">Economía Real</span>
                     </label>
                   </li>

                   <li style="margin-bottom: 5px">
                     <label for="tab-toggle-4" class="tab-label hover-zoom" style="padding-bottom: 4px">
                       <input type="checkbox" id="tab-toggle-4" class="tab-toggle" data-filter="filter4">
                       <span class="tab-title">Economía Financiera</span>
                     </label>
                   </li>

                   <li style="margin-bottom: -15px;">
                     <label for="tab-toggle-9" class="tab-label hover-zoom" style="padding-bottom: 5px">
                       <input type="checkbox" id="tab-toggle-9" class="tab-toggle" data-filter="filter9">
                       <span class="tab-title">Evolución curva tipos de interés</span>
                     </label>
                   </li>
                 </ul>
                </details>
                <hr style="margin-bottom: 15px; margin-top: 15px">


                <details>
                  <summary class="dropdown-title">Serie de datos mundiales <span class="dropdown-icon">▼</span></summary>
                  <ul style="list-style: none">
                    <hr style="margin-bottom: 15px; margin-top: 15px">
                      <li style="margin-bottom: 5px;">
                        <label for="tab-toggle-5" class="tab-label hover-zoom" style="padding-bottom: 5px">
                          <input type="checkbox" id="tab-toggle-5" class="tab-toggle" data-filter="filter5">
                          <span class="tab-title">Datos Macroeconómicos</span>
                        </label>
                      </li>

                      <li style="margin-bottom: 5px;">
                        <label for="tab-toggle-6" class="tab-label hover-zoom" style="padding-bottom: 5px">
                          <input type="checkbox" id="tab-toggle-6" class="tab-toggle" data-filter="filter6">
                          <span class="tab-title">Mercados Bursátiles</span>
                        </label>
                      </li>


                      <li style="margin-bottom: -15px;">
                        <label for="tab-toggle-12" class="tab-label hover-zoom" style="padding-bottom: 5px">
                          <input type="checkbox" id="tab-toggle-12" class="tab-toggle" data-filter="filter12">
                          <span class="tab-title">Datos macroeconómicos CAT</span>
                        </label>
                      </li>
                    </ul>
                  </details>
                  <hr style="margin-bottom: 15px; margin-top: 15px">

                  <details>
                    <summary class="dropdown-title">Laboratorio de inversión<span class="dropdown-icon">▼</span></summary>
                    <ul style="list-style: none">
                      <hr style="margin-bottom: 15px; margin-top: 15px">
                      <li style="margin-bottom: -15px;">
                            <input type="checkbox" id="tab-toggle-7" class="tab-toggle" data-filter="filter7">
                            <a href="https://gvcinstitute.com/equity-sandbox" target="_blank" class="tab-title-large hover-zoom">
                              <span>Análisis técnico y fundamental</span></a>
                        </li>
                      </ul>
                    </details>
                    <hr style="margin-bottom: 15px; margin-top: 15px">
                 </div>
               </div>



    <div class="col-md-9" style="padding:50px">
      <div class="row" style = "margin-top: -20px; margin-bottom: 15px">
        <div class="col-md">
          <div id="chart-description" ></div>
          <div class="sticky-container">
            <div class="rectangle" id="description">
              <p style="font-family: 'Montserrat', sans-serif; text-align: center; font-weight: bold; font-size: 1.5em;"></p>
            </div>

            <div class="tab-content filter1" style="display: none; margin-top: 35px;">
              <div class="row">
                <div class="col-sm-6 mid_line ">
                  <div class="col mx-12 text-center">
                    <p style="font-family: 'Montserrat', sans-serif; color: rgb(83, 83, 83); text-align: center; font-weight: bold; font-size: 1.5em;">1. Velocidad del Ciclo Económico Europa</p>
                    <div class="chart_container row">
                      <div class="col-12 mx-auto text-center hover-zoom">
                        <canvas id="Expansion"></canvas>
                        <img src='https://gvcinstitute.com/wp-content/uploads/2024/04/Velocidad_ciclo-1.png' style='max-width: 30%; height: auto; margin-top: -70px; display: block; margin: 0 auto;'>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="chart_container row">
                    <div class="col mx text-center">
                      <p style="font-family: 'Montserrat', sans-serif; color: rgb(83, 83, 83); text-align: center; font-weight: bold; font-size: 1.5em;">2. Radar del Mercado Europa</p>
                      <div class = " hover-zoom">
                        <canvas id="radarChart" style = 'width:450px; height: 450px;'></canvas>
                        <img src='https://gvcinstitute.com/wp-content/uploads/2023/06/Triangles-e1686736236461.png' style='max-width: 40%; height: auto; margin-top: -70px; display: block; margin: 0 auto;'>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-sm-6 mid_line center_line">
                  <div class="chart_container row">
                    <div class="col-md">
                      <p style="font-family: 'Montserrat', sans-serif; text-align: center; color: rgb(83, 83, 83); font-weight: bold; font-size: 1.5em; margin-top: 25px; margin-bottom: -10px;">3. Mapa de Calor por Sectores Europa</p>
                      <div class = " hover-zoom">
                        <div id="chart9"></div>
                        <img src='https://gvcinstitute.com/wp-content/uploads/2023/06/Mapa-de-calor.png' style='max-width: 50%; height: auto; display: block; margin: 0 auto; margin-top: -10px'>
                      </div>
                    </div>
                  </div>
                </div>


                <div class="col-sm-6 center_line">
                  <div class="chart_container row">
                    <div class="col-md">
                      <p style="font-family: 'Montserrat', sans-serif; text-align: center; color: rgb(83, 83, 83); font-weight: bold; font-size: 1.5em;margin-top: 25px; margin-bottom: -10px;">4. Mapa de Calor de los Bancos Centrales</p>
                      <div class = "hover-zoom">
                        <div id="chart_hot"></div>
                        <img src='https://gvcinstitute.com/wp-content/uploads/2024/01/Liquidez-Bancos-Centrales.png' style='max-width: 75%; height: 100%; display: block; margin: 0 auto; margin-top: -10px; margin-left:120px'>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="tab-content filter2" style="display: none; margin-top: 35px;">
              <div class="row">
                <div class="col-sm-6 mid_line">
                  <div class="chart_container row align-items-start">
                    <div style="width: 100%; height: auto;">
                      <p style="font-family: 'Montserrat', sans-serif; text-align: center; color: rgb(83, 83, 83); font-weight: bold; font-size: 1.5em; padding-bottom: 40px">5. Velocímetro de Riesgos Europa</p>
                      <div class = " hover-zoom">
                        <div class="col-7 mx-auto text-center">
                          <canvas id="myChart"></canvas></div>
                          <img src='https://gvcinstitute.com/wp-content/uploads/2024/04/Eurostoxx50-velocimetro2-1.png' style='max-width: 50%; height: auto; display: block; margin: 0 auto'>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="col-sm-6">
                    <div class="chart_container row">
                      <div style="width: 100%; height: auto">
                        <p style="font-family: 'Montserrat', sans-serif; text-align: center; color: rgb(83, 83, 83); font-weight: bold; font-size: 1.5em;">6. Momentum de mercado Europa</p>
                        <div class="col-9 mx-auto text-center hover-zoom">
                          <canvas id="momentum"></canvas>
                          <img src='https://gvcinstitute.com/wp-content/uploads/2024/04/Momentum_mercado.png' style='max-width: 75%; height: auto; display: block; margin: 0 auto; margin-bottom: 15px; margin-left: auto; margin-right: auto;'>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="row center_line">
                  <div class="col-sm-6">
                    <div class="chart_container row mid_line ">
                      <div style="width: 100%; height: 350px">
                        <p style="font-family: 'Montserrat', sans-serif; text-align: center; color: rgb(83, 83, 83); font-weight: bold; margin-bottom:15px ;font-size: 1.5em; margin-top: 25px">7. GVCi Risk Europa</p>
                        <div class = "hover-zoom">
                          <canvas id="GVCrisk"></canvas>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-6" >
                    <div class="chart_container">
                      <div style="width: 100%; height: 350px;">
                        <p style="font-family: 'Montserrat', sans-serif; text-align: center; color: rgb(83, 83, 83); font-weight: bold; font-size: 1.5em; margin-top: 25px">8. GVCi Momentum Europa</p>
                        <div class = "hover-zoom">
                          <canvas id="GVCind"></canvas>
                        </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="tab-content filter8" style="display: none; margin-top: 35px;">
              <div class="row">
                <div class="col-sm-6 mid_line">
                  <div class="chart_container row align-items-center">
                    <div style="width: 100%; display: flex; flex-direction: column; text-align: center;">
                      <div id="myDivGermany" style="width: 100%;"></div>
                      <table id="interestRatesTableGermany" style="max-width: 95%; margin-left: 15px">
                          <tr>
                              <th class="th_tipos">Variaciones</th>
                              <th class="th_tipos">3M</th>
                              <th class="th_tipos">6M</th>
                              <th class="th_tipos">1A</th>
                              <th class="th_tipos">2A</th>
                              <th class="th_tipos">5A</th>
                              <th class="th_tipos">10A</th>
                              <th class="th_tipos">15A</th>
                              <th class="th_tipos">20A</th>
                              <th class="th_tipos">30A</th>
                          </tr>
                      </table>
                    </div>
                  </div>
                </div>

                <div class="col-sm-6">
                  <div class="chart_container row align-items-center">
                    <div style="width: 100%; height: 100%; display: flex; flex-direction: column; max-width: 100%; max-height: 100%; text-align: center;">
                      <div id="myDivSpain" style="max-width: 100%;"></div>
                      <table id="interestRatesTableSpain" style="max-width: 95%; margin-left: 15px">
                        <tr>
                            <th class="th_tipos">Variaciones</th>
                            <th class="th_tipos">3M</th>
                            <th class="th_tipos">6M</th>
                            <th class="th_tipos">1A</th>
                            <th class="th_tipos">2A</th>
                            <th class="th_tipos">5A</th>
                            <th class="th_tipos">10A</th>
                            <th class="th_tipos">15A</th>
                            <th class="th_tipos">20A</th>
                            <th class="th_tipos">30A</th>
                        </tr>
                    </table>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row center_line">
                <div class="col-sm-6">
                  <div class="chart_container row align-items-center">
                    <div style="width: 100%; height: 100%; display: flex; flex-direction: column; max-width: 100%; max-height: 100%; text-align: center;">
                      <div id="myDivBritain" style="max-width: 100%;"></div>
                        <table id="interestRatesTableBritain" style="max-width: 95%; margin-left: 15px">
                          <tr>
                            <th class="th_tipos">Variaciones</th>
                            <th class="th_tipos">3M</th>
                            <th class="th_tipos">6M</th>
                            <th class="th_tipos">1A</th>
                            <th class="th_tipos">2A</th>
                            <th class="th_tipos">5A</th>
                            <th class="th_tipos">10A</th>
                            <th class="th_tipos">15A</th>
                            <th class="th_tipos">20A</th>
                            <th class="th_tipos">30A</th>
                        </tr>
                        </table>
                    </div>
                  </div>
                </div>
                <div class="col-sm-6" >
                  <div class="chart_container row align-items-center">
                    <div style="width: 100%; height: 100%; display: flex; flex-direction: column; max-width: 100%; max-height: 100%; text-align: center;">
                      <div id="myDivItaly" style="max-width: 100%;"></div>
                        <table id="interestRatesTableItaly" style="max-width: 95%; margin-left: 15px">
                          <tr>
                            <th class="th_tipos">Variaciones</th>
                            <th class="th_tipos">3M</th>
                            <th class="th_tipos">6M</th>
                            <th class="th_tipos">1A</th>
                            <th class="th_tipos">2A</th>
                            <th class="th_tipos">5A</th>
                            <th class="th_tipos">10A</th>
                            <th class="th_tipos">15A</th>
                            <th class="th_tipos">20A</th>
                            <th class="th_tipos">30A</th>
                        </tr>
                        </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>


            <!-- ESPAÑA  -->
            <div class="tab-content filter10" style="display: none; margin-top: 35px; height: auto;"> <!-- ESPAÑA  -->
              <div class="row">
                <div class="col-sm-6 mid_line ">
                  <div class="col mx-12 text-center">
                    <p style="font-family: 'Montserrat', sans-serif; color: rgb(83, 83, 83); text-align: center; font-weight: bold; font-size: 1.5em">Velocidad del Ciclo Económico España</p>
                    <div class="chart_container row">
                      <div class="col-12 mx-auto text-center hover-zoom">
                        <canvas id="ExpansionEsp2"></canvas>
                        <img src='https://gvcinstitute.com/wp-content/uploads/2024/04/Velocidad_ciclo-1.png' style='max-width: 30%; height: auto; margin-top: -70px; display: block; margin: 0 auto;'>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="chart_container row">
                    <div class="col mx text-center">
                      <p class="radarUSText" style="font-family: 'Montserrat', sans-serif; color: rgb(83, 83, 83); text-align: center; font-weight: bold; font-size: 1.5em;">Radar del Mercado España</p>
                      <div class = "hover-zoom">
                        <canvas id="radarChartEsp" style = 'width:450px; height: 450px;'></canvas>
                        <img src='https://gvcinstitute.com/wp-content/uploads/2023/06/Triangles-e1686736236461.png' style='max-width: 40%; height: auto; margin-top: -70px; display: block; margin: 0 auto;'>
                      </div>
                    </div>
                  </div>
                </div>
              </div>


              <div class="row">
                <div class="col-sm-6 mid_line center_line">
                  <div class="chart_container row">
                    <div class="col-md">
                      <p style="font-family: 'Montserrat', sans-serif; text-align: center; color: rgb(83, 83, 83); font-weight: bold; font-size: 1.5em; margin-top: 25px;">Mapa de Calor por Sectores España</p>
                      <div class = "hover-zoom">
                        <div id="chartEsp"></div>
                        <img src='https://gvcinstitute.com/wp-content/uploads/2023/06/Mapa-de-calor.png' style='max-width: 50%; height: auto; display: block; margin: 0 auto; margin-top: -10px'>
                      </div>
                    </div>
                  </div>
                </div>


                <div class="col-sm-6 center_line">
                  <div class="chart_container row">
                    <div class="col-md">
                      <p style="font-family: 'Montserrat', sans-serif; text-align: center; color: rgb(83, 83, 83); font-weight: bold; font-size: 1.5em;margin-top: 25px;">Dades cuantitatives España</p>
                      <div class = "hover-zoom">
                        <div id="chartEsp2"></div>
                        <img src='https://gvcinstitute.com/wp-content/uploads/2023/06/Mapa-de-calor.png' style='max-width: 50%; height: auto; display: block; margin: 0 auto; margin-top: -25px'>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          <!-- Cataluña  -->
          <div class="tab-content filter11" style="display: none; margin-top: 35px; height: auto;"> <!-- Cataluña  -->
            <div class="row">
              <div class="col-sm-6 mid_line ">
                <div class="col mx-12 text-center">
                  <p style="font-family: 'Montserrat', sans-serif; color: rgb(83, 83, 83); text-align: center; font-weight: bold; font-size: 1.5em">Velocidad del Ciclo Económico Cataluña</p>
                  <div class="chart_container row">
                    <div class="col-12 mx-auto text-center hover-zoom">
                      <canvas id="ExpansionCat"></canvas>
                      <img src='https://gvcinstitute.com/wp-content/uploads/2024/04/Velocidad_ciclo-1.png' style='max-width: 30%; height: auto; margin-top: -70px; display: block; margin: 0 auto;'>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-md-6">
                <div class="chart_container row">
                  <div class="col mx text-center">
                    <p class="radarUSText" style="font-family: 'Montserrat', sans-serif; color: rgb(83, 83, 83); text-align: center; font-weight: bold; font-size: 1.5em;">Índice de malestar compensado</p>
                    <p style="font-family: 'Montserrat', sans-serif; color: rgb(49, 49, 49); text-align: center; font-weight: normal; font-size: 1em; margin-top: -35px; margin-bottom: -20px;">(IPC + Paro - PIB)</p>
                    <div class = "hover-zoom">
                      <canvas id="radarChartCat" style = 'width:450px; height: 450px;'></canvas>
                  
                      <img src='https://gvcinstitute.com/wp-content/uploads/2024/04/Indice_malestar-1.png' style='max-width: 40%; height: auto; margin-top: -80px; display: block; margin: 0 auto;'>
                    </div>
                  </div>
                </div>
              </div>
            </div>


            <div class="row">
              <div class="col-sm-6 mid_line center_line">
                <div class="chart_container row">
                  <div class="col-md">
                    <p style="font-family: 'Montserrat', sans-serif; text-align: center; color: rgb(83, 83, 83); font-weight: bold; font-size: 1.5em; margin-top: 25px;">Dades qualitatives Catalunya</p>
                    <div class = "hover-zoom">
                      <div id="chartCat"></div>
                      <img src='https://gvcinstitute.com/wp-content/uploads/2023/06/Mapa-de-calor.png' style='max-width: 50%; height: auto; display: block; margin: 0 auto; margin-top: -10px'>
                    </div>
                  </div>
                </div>
              </div>


              <div class="col-sm-6 center_line">
                <div class="chart_container row">
                  <div class="col-md">
                    <p style="font-family: 'Montserrat', sans-serif; text-align: center; color: rgb(83, 83, 83); font-weight: bold; font-size: 1.5em;margin-top: 25px;">Dades quantitatives Catalunya</p>
                    <div class = "hover-zoom">
                      <div id="chartCat2"></div>
                      <img src='https://gvcinstitute.com/wp-content/uploads/2023/06/Mapa-de-calor.png' style='max-width: 50%; height: auto; display: block; margin: 0 auto; margin-top: -25px'>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>



            <!-- USA  -->
            <div class="tab-content filter3" style="display: none; margin-top: 35px; height: auto;"> <!-- US  -->
              <div class="row">
                <div class="col-sm-6 mid_line ">
                  <div class="col mx-12 text-center">
                    <p style="font-family: 'Montserrat', sans-serif; color: rgb(83, 83, 83); text-align: center; font-weight: bold; font-size: 1.5em;">9. Velocidad del Ciclo Económico US</p>
                    <div class="chart_container row">
                      <div class="col-12 mx-auto text-center hover-zoom">
                        <canvas id="ExpansionUS"></canvas>
                        <img src='https://gvcinstitute.com/wp-content/uploads/2024/04/Velocidad_ciclo-1.png' style='max-width: 30%; height: auto; margin-top: -70px; display: block; margin: 0 auto;'>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="chart_container row">
                    <div class="col mx text-center">
                      <p class="radarUSText" style="font-family: 'Montserrat', sans-serif; color: rgb(83, 83, 83); text-align: center; font-weight: bold; font-size: 1.5em;">10. Radar del Mercado US</p>
                      <div class = "hover-zoom">
                        <canvas id="radarChartUS" style = 'width:450px; height: 450px;'></canvas>
                        <img src='https://gvcinstitute.com/wp-content/uploads/2023/06/Triangles-e1686736236461.png' style='max-width: 40%; height: auto; margin-top: -70px; display: block; margin: 0 auto;'>
                      </div>
                    </div>
                  </div>
                </div>
              </div>


              <div class="row">
                <div class="col-sm-6 mid_line center_line">
                  <div class="chart_container row">
                    <div class="col-md">
                      <p style="font-family: 'Montserrat', sans-serif; text-align: center; color: rgb(83, 83, 83); font-weight: bold; font-size: 1.5em;">11. Mapa de Calor por Sectores US</p>
                      <div class = "hover-zoom">
                        <div id="chart9US"></div>
                        <img src='https://gvcinstitute.com/wp-content/uploads/2023/06/Mapa-de-calor.png' style='max-width: 50%; height: auto; display: block; margin: 0 auto; margin-top: -10px'>
                      </div>
                    </div>
                  </div>
                </div>


                <div class="col-sm-6 center_line">
                  <div class="chart_container row">
                    <div class="col-md">
                      <p style="font-family: 'Montserrat', sans-serif; text-align: center; color: rgb(83, 83, 83); font-weight: bold; font-size: 1.5em;">12. Mapa de Calor Asiático</p>
                      <div class = "hover-zoom">
                        <div id="chart_hotUS"></div>
                        <img src='https://gvcinstitute.com/wp-content/uploads/2023/06/Mapa-de-calor.png' style='max-width: 50%; height: auto; display: block; margin: 0 auto; margin-top: -25px'>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="tab-content filter4" style="display: none; margin-top: 35px;">
              <div class="row">
                <div class="col-sm-6 mid_line">
                  <div class="chart_container row align-items-start">
                    <div style="width: 100%; height: auto;">
                      <p style="font-family: 'Montserrat', sans-serif; text-align: center; color: rgb(83, 83, 83); font-weight: bold; font-size: 1.5em; padding-bottom: 40px">13. Velocímetro de Riesgos US</p>
                      <div class = "hover-zoom">
                        <div class="col-7 mx-auto text-center">
                          <canvas id="myChartUSA"></canvas>
                        </div>
                        <img src='https://gvcinstitute.com/wp-content/uploads/2024/04/USA-velocimetro2.png' style='max-width: 50%; height: auto; display: block; margin: 0 auto'>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-sm-6">
                  <div class="chart_container row">
                    <div style="width: 100%; height: auto">
                      <p style="font-family: 'Montserrat', sans-serif; text-align: center; color: rgb(83, 83, 83); font-weight: bold; font-size: 1.5em;">14. Momentum de mercado US</p>
                      <div class = "hover-zoom">
                        <div class="col-9 mx-auto text-center">
                          <canvas id="momentumUSA"></canvas>
                        </div>
                        <img src='https://gvcinstitute.com/wp-content/uploads/2024/04/Momentum_mercado.png' style='max-width: 50%; height: auto; display: block; margin: 0 auto; margin-bottom: 15px; margin-left: auto; margin-right: auto;'>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row center_line">
                <div class="col-sm-6">
                  <div class="chart_container row mid_line ">
                    <div style="width: 100%; height: 350px;">
                      <p style="font-family: 'Montserrat', sans-serif; text-align: center; color: rgb(83, 83, 83); font-weight: bold; font-size: 1.5em;">15. GVCi Risk US</p>
                      <div class = "hover-zoom">
                        <canvas id="GVCriskUSA"></canvas>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-sm-6" >
                  <div class="chart_container">
                    <div style="width: 100%; height: 350px;">
                      <p style="font-family: 'Montserrat', sans-serif; text-align: center; color: rgb(83, 83, 83); font-weight: bold; font-size: 1.5em;">16. GVCi Momentum US</p>
                      <div class = "hover-zoom">
                        <canvas id="GVCindUSA"></canvas>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="tab-content filter9" style="display: none; margin-top: 35px;">
              <div class="row">
                <div class="col-sm-6 mid_line">
                  <div class="chart_container row align-items-center">
                    <div style="width: 100%; display: flex; flex-direction: column; text-align: center;">
                      <div id="myDivUSA" style="width: 100%;"></div>
                      <table id="interestRatesTableUSA" style="max-width: 95%; margin-left: 15px">
                          <tr>
                              <th class="th_tipos">Variaciones</th>
                              <th class="th_tipos">3M</th>
                              <th class="th_tipos">6M</th>
                              <th class="th_tipos">1A</th>
                              <th class="th_tipos">2A</th>
                              <th class="th_tipos">5A</th>
                              <th class="th_tipos">10A</th>
                              <th class="th_tipos">15A</th>
                              <th class="th_tipos">20A</th>
                              <th class="th_tipos">30A</th>
                          </tr>
                      </table>
                    </div>
                  </div>
                </div>

                <div class="col-sm-6">
                  <div class="chart_container row align-items-center">
                    <div style="width: 100%; height: 100%; display: flex; flex-direction: column; max-width: 100%; max-height: 100%; text-align: center;">
                      <div id="myDivChina" style="max-width: 100%;"></div>
                      <table id="interestRatesTableChina" style="max-width: 95%; margin-left: 15px">
                        <tr>
                            <th class="th_tipos">Variaciones</th>
                            <th class="th_tipos">3M</th>
                            <th class="th_tipos">6M</th>
                            <th class="th_tipos">1A</th>
                            <th class="th_tipos">2A</th>
                            <th class="th_tipos">5A</th>
                            <th class="th_tipos">10A</th>
                            <th class="th_tipos">15A</th>
                            <th class="th_tipos">20A</th>
                            <th class="th_tipos">30A</th>
                        </tr>
                    </table>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row center_line">
                <div class="col-sm-6">
                  <div class="chart_container row align-items-center">
                    <div style="width: 100%; height: 100%; display: flex; flex-direction: column; max-width: 100%; max-height: 100%; text-align: center;">
                      <div id="myDivJapon" style="max-width: 100%;"></div>
                        <table id="interestRatesTableJapon" style="max-width: 95%; margin-left: 15px">
                          <tr>
                            <th class="th_tipos">Variaciones</th>
                            <th class="th_tipos">3M</th>
                            <th class="th_tipos">6M</th>
                            <th class="th_tipos">1A</th>
                            <th class="th_tipos">2A</th>
                            <th class="th_tipos">5A</th>
                            <th class="th_tipos">10A</th>
                            <th class="th_tipos">15A</th>
                            <th class="th_tipos">20A</th>
                            <th class="th_tipos">30A</th>
                        </tr>
                        </table>
                    </div>
                  </div>
                </div>
                <div class="col-sm-6" >
                  <div class="chart_container row align-items-center">
                    <div style="width: 100%; height: 100%; display: flex; flex-direction: column; max-width: 100%; max-height: 100%; text-align: center;">
                      <div id="myDivIndia" style="max-width: 100%;"></div>
                        <table id="interestRatesTableIndia" style="max-width: 95%; margin-left: 15px">
                          <tr>
                            <th class="th_tipos">Variaciones</th>
                            <th class="th_tipos">3M</th>
                            <th class="th_tipos">6M</th>
                            <th class="th_tipos">1A</th>
                            <th class="th_tipos">2A</th>
                            <th class="th_tipos">5A</th>
                            <th class="th_tipos">10A</th>
                            <th class="th_tipos">15A</th>
                            <th class="th_tipos">20A</th>
                            <th class="th_tipos">30A</th>
                        </tr>
                        </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="tab-content filter5" style="display:none">
                <div class="container">
                    <h2>Datos macroeconómicos</h2>
                    <table class="table" id="macroeconomicTable" style="text-align: center; table-layout: auto">
                        <thead>
                            <tr>
                                <th>Map</th>
                                <th>Country</th>
                                <th>Unemployment</th>
                                <th>Inflation</th>
                                <th>Conf. Consumer</th>
                                <th>Long Bonus</th>
                                <th>Short Bonus</th>
                                <th>Real GDP</th>
                                <th>Bza. Commercial (1.000M €)</th>
                                <th>Bza. C/C (1.000M €)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Los datos se llenarán con JavaScript -->
                        </tbody>
                    </table>
                </div>

                <span>Visualiza los datos económicos por indicador: </span>

                <!-- Dropdown para seleccionar el indicador -->
                <select id="macroIndicatorSelect" style="
                    color: #00A1DF;
                    background-color: rgb(220, 246, 250);
                    border-radius: 15px;
                    padding: 5px;
                    border: 1px solid black;
                    box-shadow: 0 0 10px rgba(0,0,0,0.15);
                    font-size: 16px;
                    outline: none;
                    margin-left: 5px;
                    margin-bottom: 10px;
                    padding-left: 15px;
                    border: none;
                ">
                    <option value="" disabled selected>Selecciona un indicador</option>
                    <option value="Desempleo">Desempleo</option>
                    <option value="Inflacion">Inflación</option>
                    <option value="Confianza">Confianza del consumidor</option>
                    <option value="Corto">Bono Corto</option>
                    <option value="Largo">Bono Largo</option>
                    <option value="PIB">PIB</option>
                    <option value="Comercial">Balanza Comercial</option>
                    <option value="Corriente">Balanza Corriente</option>
                </select>

                <!-- Contenedor para el gráfico de Plotly -->
                <div id="plotlyCountryChart" style="width: 100%; height: 700px;"></div>
            </div>


          <div class="tab-content filter6" style="display:none">
                <div class="container">
                    <h2>Datos de la economía financiera</h2>

                    <table class="table" id="stockTable" style="text-align: center; table-layout: auto">
                        <thead>
                            <tr>
                                <th>Bandera</th>
                                <th>Tipo</th>
                                <th>Market Value (1.000M €)</th>
                                <th>YTD</th>
                                <th>PER</th>
                                <th>DY</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>


                <span>Visualiza los diferentes datos financieros y selecciona el índice/índices que quieras: </span>

                <!-- Dropdown para seleccionar el tipo de dato a graficar -->
                <select id="dataSelect" style="
                    color: #00A1DF;
                    background-color: rgb(220, 246, 250);
                    border-radius: 15px;
                    padding: 5px;
                    border: 1px solid black;
                    box-shadow: 0 0 10px rgba(0,0,0,0.15);
                    font-size: 16px;
                    outline: none;
                    margin-left: 5px;
                    margin-bottom: 10px;
                    padding-left: 15px;
                    border: none;
                ">
                    <option value="" disabled selected>Selecciona un tipo de dato</option>
                    <option value="PER">PER</option>
                    <option value="DY">DY (%)</option>
                    <option value="YTD">YTD</option>
                    <option value="market_value">Market Value (1.000M €)</option>
                </select>

                <!-- Contenedor para el gráfico de Plotly -->
                <div id="plotlyChart" style="width: 100%; height: 700px;"></div>
            </div>

            <div class="tab-content filter12" style="display:none">
              <div class="container">
                  <h2>Dades Catalunya</h2>
                  <table class="table" id="tabla_cat" style="text-align: center; table-layout: auto; width: 100%">
                    <tr>

                      <th style="background-color: #d4e09b; border: 1px solid #d3d3d3; font-weight: bold; color: black">Creixement</th>
                      <th style="background-color: #d4e09b; border: 1px solid #d3d3d3; font-weight: bold; color: black">Inflació</th>
                      <th style="background-color: #d4e09b; border: 1px solid #d3d3d3; font-weight: bold; color: black">Activitat laboral</th>
                      <th style="background-color: #f19c79; border: 1px solid #d3d3d3; font-weight: bold; color: black">Sector Exterior</th>
                      <th style="background-color: #f6f4d2; border: 1px solid #d3d3d3; font-weight: bold; color: black">Turisme</th>
                    </tr>
                    <tr>
                      <td id="pib_celda" style="background-color: #F1F8D2;border: 1px solid #d3d3d3;"></td>
                      <td id="inflacion_celda" style="background-color: #F1F8D2;border: 1px solid #d3d3d3;"></td>
                      <td id="empleo" style="background-color: #F1F8D2;border: 1px solid #d3d3d3;"></td>
                      <td id="sector_exterior" style="background-color: #FDD1BF;border: 1px solid #d3d3d3;"></td>
                      <td id="turismo" style="background-color: #F5F5E8;border: 1px solid #d3d3d3;"></td>
                    </tr>
                    <!-- Fila en blanco como separación -->
                    <tr>
                        <td colspan="5" style="border: none; height: 20px;"></td>
                    </tr>
                    <tr>
                      <th style="background-color: #f6f4d2; border: 1px solid #d3d3d3; font-weight: bold; color: black">Serveis</th>
                      <th style="background-color: #f6f4d2; border: 1px solid #d3d3d3; font-weight: bold; color: black">Construcció</th>
                      <th style="background-color: #f19c79; border: 1px solid #d3d3d3; font-weight: bold; color: black">Consum</th>
                      <th style="background-color: #f19c79; border: 1px solid #d3d3d3; font-weight: bold; color: black">Automoció</th>
                      <th style="background-color: #d4e09b; border: 1px solid #d3d3d3; font-weight: bold; color: black">Logística</th>
                    </tr>
                    <tr>
                        <td id="servicios" style="background-color: #F5F5E8; border: 1px solid #d3d3d3;"></td>
                        <td id="construccion" style="background-color: #F5F5E8; border: 1px solid #d3d3d3;"></td>
                        <td id="consumo" style="background-color: #FDD1BF; border: 1px solid #d3d3d3;"></td>
                        <td id="automocion" style="background-color: #FDD1BF; border: 1px solid #d3d3d3;"></td>
                        <td id="logistica" style="background-color: #F1F8D2; border: 1px solid #d3d3d3;"></td>
                    </tr>
                </table>
                    <!-- Fila en blanco como separación -->
                  <div style="margin-top: 5px; margin-bottom: 20px;">
                      <a href="https://gvcinstitute.com/wp-content/uploads/2024/04/Tabla-Indicadores-Catalunya.xlsx" download="datos_cat.xlsx" style="float: right; margin-top: -5px">
                        <span>Dades extretes de Idescat</span>
                      </a>
                    <p style="margin-bottom: -15px;"><strong>YoY (Year over Year):</strong> Variació percentual respecte la dada de l'any anterior.</p>
                      <p style="margin-bottom: -15px;"><strong>QoQ (Quarter over Quarter):</strong> Variació percentual respecte la dada del trimestre anterior.</p>
                      <p><strong>Var. (Variació):</strong> Variació respecte la dada de l'any anterior.</p>
                  </div>
                </div>


                 <span>Visualitza les diferents dades financeres amb els següents gràfics interactius: </span>
                  <!-- Dropdown para seleccionar el tipo de dato a graficar -->
                  <select id="macroSelectCat" onchange="fetchAndPlotDataCat()" style="color: #00A1DF; background-color: rgb(220, 246, 250); border-radius: 15px; padding: 5px; border: 1px solid black; box-shadow: 0 0 10px rgba(0,0,0,0.15); font-size: 16px; outline: none; margin-left: 5px; margin-bottom: 10px; padding-left: 15px; border: none;">
                    <option value="" disabled selected>Selecciona un tipo de dato</option>
                    <option value="Creixement">Creixement</option>
                    <option value="Inflació">Inflació</option>
                    <option value="Activitat Laboral">Activitat Laboral</option>
                    <option value="Sector Exterior">Sector Exterior</option>
                    <option value="Turisme">Turisme</option>

                    <option value="Serveis">Serveis</option>
                    <option value="Construcció">Construcció</option>
                    <option value="Grans superfícies">Grans superfícies</option>
                    <option value="Vendes minoristes">Vendes minoristes</option>
                    <option value="Índex de negoci Industrial">Índex de negoci Industrial</option>
                    <option value="Automoció">Automoció</option>
                    <option value="Logística">Logística</option>

                </select>
                <div id="chart" style="width: 100%; height: 700px;"></div>


             </div>


          </div>
        </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="chatbotButton">
  <img id="chatbotToggleButton" class="bTbAgE" onclick="toggleChatbot()" src="https://www.dropbox.com/scl/fi/kgviuhratrm4ss2k96erq/chat.png?rlkey=7ljn8x22aebth9btwv3do8tnf&raw=1" alt="Chat">
</div>

<div id="chatbotContainer" class="chatbot">
  <div class="chat-header">
      Chat con GVC Bot
  </div>
  <div id="messageContainer">
      <div class="message-container bot">
          <div class="bot-avatar"></div>
          <div class="bot-content">
              <div class="bot-name">GVC Institute</div>
              <div class="message bot-message">¡Hola, bienvenidos a nuestra estación meteorológica financiera! ¿En qué puedo ayudarte?</div>
              <div class="timestamp bot" id="initialTimestamp"></div>
          </div>
      </div>
  </div>
  <div id="optionsContainer" class="initial-options options">
      <div class="option" onclick="selectOption('Daily Report')">Daily Report</div>
      <div class="option" onclick="selectOption('Indicadores')">Indicadores</div>
      <div class="option" onclick="selectOption('Curva de los tipos de interés')">Curva de los tipos de interés</div>
      <div class="option" onclick="selectOption('Equity Sandbox')">Equity Sandbox</div>
  </div>
  <div class="indicators-options options hidden">
      <div class="option yes-option" onclick="selectOption('Economía real')">Economía real</div>
      <div class="option" onclick="selectOption('Economía financiera')">Economía financiera</div>
  </div>

  <div class="economia-real-options options hidden">
      <div class="option" onclick="selectOption('Velocidad del ciclo económico')"> Velocidad del ciclo económico</div>
      <div class="option" onclick="selectOption('Radar de mercado')">Radar de mercado</div>
      <div class="option" onclick="selectOption('Mapa de calor por sectores')">Mapa de calor por sectores</div>
      <div class="option" onclick="selectOption('Mapa de calor Bancos Centrales')">Mapa de calor Bancos Centrales</div>
  </div>

  <div class="velocidad-ciclo-options hidden">
      <div class="option yes-option" onclick="selectOption('Si, quiero obtener más información.')">Si</div>
      <div class="option" onclick="selectOption('No, no quiero obtener más información de este indicador.')">No</div>
  </div>

  <div class="radar-de-mercado-options hidden">
      <div class="option yes-option" onclick="selectOption('Si, quiero aprender a como interpretarlo.')">Si</div>
      <div class="option" onclick="selectOption('No, no deseo obtener esa información.')">No</div>
  </div>

  <div class="mapa-sectores-options hidden">
      <div class="option yes-option" onclick="selectOption('Si, quiero aprender a interpretarlo.')">Si</div>
      <div class="option" onclick="selectOption('No, deseo informarme sobre otro tema.')">No</div>
  </div>
  <div class="mapa-bancos-options hidden">
      <div class="option yes-option" onclick="selectOption('Si, deseo aprender a interpretar este indicador.')">Si</div>
      <div class="option" onclick="selectOption('No, no deseo informarme.')">No</div>
  </div>

  <div class="economia-financiera-options options hidden">
      <div class="option" onclick="selectOption('Velocímetro de mercado')">Velocímetro de mercado</div>
      <div class="option" onclick="selectOption('Momentum de mercado')">Momentum de mercado</div>
      <div class="option" onclick="selectOption('GVCi Risk')">GVCi Risk</div>
      <div class="option" onclick="selectOption('GVCi Momentum')">GVCi Momentum</div>
  </div>

  <div class="velocímetro-de-mercado-options hidden">
      <div class="option yes-option" onclick="selectOption('¿Te gustaría saber más sobre cómo leer este gráfico?')">Si</div>
      <div class="option" onclick="selectOption('No, deseo interesearme en otro tema.')">No</div>
  </div>

  <div class="momentum-de-mercado-options hidden">
      <div class="option yes-option" onclick="selectOption('Si, quiero aprender a interpretar el indicador de momentum.')">Si</div>
      <div class="option" onclick="selectOption('No, no quiero obtener más información del momentum de mercado.')">No</div>
  </div>

  <div class="gvci-risk-options hidden">
      <div class="option yes-option" onclick="selectOption('Si, quiero aprender a interpretar el GVCi Risk.')">Si</div>
      <div class="option" onclick="selectOption('No, no quiero obtener más información del GVCi Risk.')">No</div>
  </div>

  <div class="gvci-momentum-options hidden">
      <div class="option yes-option" onclick="selectOption('Si, quiero aprender a interpretar el GVCi Momentum.')">Si</div>
      <div class="option" onclick="selectOption('No, no quiero obtener más información del GVCi Momentum.')">No</div>
  </div>

  <div class="daily-report-options hidden">
      <div class="option yes-option" onclick="selectOption('Sí, quiero informarme más.')">Si</div>
      <div class="option" onclick="selectOption('No, no deseo obtener más información del Daily Report.')">No</div>
  </div>

  <div class="curva-tipos-options hidden">
      <div class="option yes-option" onclick="selectOption('Sí, ¿cómo se puede interpretar?')">Si</div>
      <div class="option" onclick="selectOption('No, no deseo obtener más información.')">No</div>
  </div>

  <div class="equity-sandbox-options hidden">
      <div class="option yes-option" onclick="selectOption('Sí, ¿cuáles son?')">Si</div>
      <div class="option" onclick="selectOption('No, no deseo obtener esa información.')">No</div>
  </div>
</div>

<script type="text/javascript">

  //Show current date
  const date = new Date();

  let day = date.getDate();
  let month = date.getMonth() + 1;
  let year = date.getFullYear();
  // This arrangement can be altered based on how we want the date's format to appear.
  let currentDate = `${day}/${month}/${year}`;
  document.getElementById("current_date").innerHTML = currentDate;


  // Table Real Economy (Macoeconomic Table)
    // Objeto para mapear los tipos con sus banderas
    const flagMap2 = {
        "Europa": "https://upload.wikimedia.org/wikipedia/commons/b/b7/Flag_of_Europe.svg",
        "España": "https://www.worldometers.info/img/flags/sp-flag.gif",
        "Alemania": "https://www.worldometers.info/img/flags/gm-flag.gif",
        "Francia": "https://www.worldometers.info/img/flags/fr-flag.gif",
        "Italia": "https://www.worldometers.info/img/flags/it-flag.gif",
        "Reino Unido": "https://www.worldometers.info/img/flags/uk-flag.gif",
        "USA": "https://www.worldometers.info/img/flags/us-flag.gif",
        "Japon": "https://www.worldometers.info/img/flags/ja-flag.gif",
        "China": "https://www.worldometers.info/img/flags/ch-flag.gif"
    };

    fetch('https://rest.gvcgaesco.es/ser-gvc-institute/chart/tablaDatos/USA')
        .then(response => response.json())
        .then(data => {
            if (data.status === "OK" && data.series) {
                const tableBody = document.getElementById('macroeconomicTable').getElementsByTagName('tbody')[0];
                data.series.forEach(item => {
                    let row = tableBody.insertRow();
                    let flagCell = row.insertCell(0);
                    if (flagMap2[item.tipo]) {
                        flagCell.innerHTML = `<img src="${flagMap2[item.tipo]}" width="30" height="20">`;
                    } else {
                        flagCell.innerHTML = 'No disponible';
                    }

                    row.insertCell(1).innerHTML = item.tipo;
                    row.insertCell(2).innerHTML = item.desempleo.toFixed(2) + '%';
                    row.insertCell(3).innerHTML = item.inflacion.toFixed(2) + '%';
                    row.insertCell(4).innerHTML = item.c_Consumidor.toFixed(2);
                    row.insertCell(5).innerHTML = item.bono_Largo.toFixed(2) + '%';
                    row.insertCell(6).innerHTML = item.bono_Corto.toFixed(2) + '%';
                    row.insertCell(7).innerHTML = item.pib_Real.toFixed(2) + '%';
                    row.insertCell(8).innerHTML = item.balanza_Comercial.toLocaleString('en-US');
                    row.insertCell(9).innerHTML = item.bza_CC.toLocaleString('en-US');
                });
            }
        })
        .catch(error => console.error('Error:', error));



  // Table Financial Economy (Stock markets)
    // Objeto para mapear los tipos con sus banderas
    const flagMap = {
        "DJ Eurostoxx 50": "https://upload.wikimedia.org/wikipedia/commons/b/b7/Flag_of_Europe.svg",
        "IBEX 35": "https://www.worldometers.info/img/flags/sp-flag.gif",
        "DAX 40": "https://www.worldometers.info/img/flags/gm-flag.gif",
        "CAC 40": "https://www.worldometers.info/img/flags/fr-flag.gif",
        "FTSE MIB": "https://www.worldometers.info/img/flags/it-flag.gif",
        "FTSE 100": "https://www.worldometers.info/img/flags/uk-flag.gif",
        "S&P500": "https://www.worldometers.info/img/flags/us-flag.gif",
        "Nikkei225": "https://www.worldometers.info/img/flags/ja-flag.gif",
        "SSE": "https://www.worldometers.info/img/flags/ch-flag.gif"
    };

    fetch('https://rest.gvcgaesco.es/ser-gvc-institute/chart/tablaDatos/EUR')
        .then(response => response.json())
        .then(data => {
            if (data.status === "OK" && data.series) {
                const tableBody = document.getElementById('stockTable').getElementsByTagName('tbody')[0];
                data.series.forEach(item => {
                    let row = tableBody.insertRow();
                    let flagCell = row.insertCell(0);
                    if (flagMap[item.tipo]) {
                        flagCell.innerHTML = `<img src="${flagMap[item.tipo]}" width="30" height="20">`;
                    } else {
                        flagCell.innerHTML = '';
                    }
                    row.insertCell(1).innerHTML = item.tipo;
                    row.insertCell(2).innerHTML = item.value.toLocaleString('en-US');
                    row.insertCell(3).innerHTML = item.ytd.toFixed(2) + '%';
                    row.insertCell(4).innerHTML = item.per.toFixed(2);
                    row.insertCell(5).innerHTML = item.dy.toFixed(2) + '%';
                });
            }
        })
        .catch(error => console.error('Error:', error));



// Velocidad chart
  //RELLENA LOS SIGUEINTES DATOS
//RELLENA LOS SIGUEINTES DATOS
zonaAConsultar = "EUR"; 			// Escribe "EUR" o "USA"
  numeroDeDatosAConsultar_vel = 36;		// Escribe la cantidad de filas que quieres que aparezcan en el grafico (Max 36)

//API Call
  fetch("https://rest.gvcgaesco.es/ser-gvc-institute/chart/ciclo/"+zonaAConsultar+"/"+numeroDeDatosAConsultar_vel)
  .then(response => response.json())
  .then(dataDB => {

//Mapeamos los datos de las fechas de la respuesta con los del script
var fechasdata = [];
var puntos = [];
var radios = []; // Array para los radios de los puntos
var colores = []; // Nuevo array para los colores de los puntos

for(var index_ciclo = 0; index_ciclo < dataDB.series.length; ++index_ciclo){
  fechasdata[index_ciclo] = dataDB.series[index_ciclo].mmmyy;
  puntos.push({ x: dataDB.series[index_ciclo].x, y: dataDB.series[index_ciclo].y });
  radios.push(2); // Asigna el radio a 2 para todos los puntos
  
  // Para todos los puntos excepto el primero, asigna el color a blanco
  if(index_ciclo === 0){
    colores.push('white'); // Asigna el color negro solo al primer punto
  }else{
    colores.push('black'); // Asigna el color blanco a los demás puntos
  }
}

// Asigna un radio más grande al último punto, igual que al primero
radios[radios.length - 1] = 5.3; // Último punto
radios[0] = 4; // Primer punto


// setup
const data2 = {
  labels: fechasdata,

    datasets: [
      {
        pointRadius: radios,
        pointBackgroundColor: colores,
        data: puntos,
        borderColor: 'black',
        borderWidth: 2,
        tension: 0.4,
        showLine: true,
        // Configuración de Data Labels para mostrar solo en el primer punto
        datalabels: {
          align: 'end',
          anchor: 'end',
          color: '#000',
          font: {
            weight: 'bold'
          },
          formatter: function(value, context) {
            // Muestra la etiqueta solo para el primer punto
            return context.dataIndex === 0 ? 'Inicio' : null;
          },
        }
      }
    ]
  };

// chartAreaBackgroundColor plugin block
const chartAreaBackgroundColor2 = {
  id: "chartAreaBackgroundColor2",
  beforeDraw(chart, args, plugins) {
    const {ctx, chartArea: {top, bottom, left, right, width, height}} = chart;
    const yAxis = chart.scales.y;
    const xAxis = chart.scales.x;

    const yZeroPoint = yAxis.getPixelForValue(0);
    const xZeroPoint = xAxis.getPixelForValue(0);
    const halfWidth = width / 2;

    // Crear el degradado para el rectángulo superior verde
    const gradientTop = ctx.createLinearGradient(right, top, xZeroPoint, yZeroPoint);
    gradientTop.addColorStop(0, '#62BD7E');
    gradientTop.addColorStop(1, '#FEEB84');

    // Aplicar el degradado al rectángulo superior verde
    ctx.save();
    ctx.fillStyle = gradientTop;
    ctx.fillRect(xZeroPoint, top, halfWidth, yZeroPoint - top);
    ctx.restore();

    // Crear el degradado para el rectángulo inferior verde
    const gradientBottom = ctx.createLinearGradient(right, bottom, xZeroPoint, yZeroPoint);
    gradientBottom.addColorStop(0, '#62BD7E');
    gradientBottom.addColorStop(1, '#FEEB84');

    // Aplicar el degradado al rectángulo inferior verde
    ctx.save();
    ctx.fillStyle = gradientBottom;
    ctx.fillRect(xZeroPoint, yZeroPoint, halfWidth, bottom - yZeroPoint);
    ctx.restore();

    // Crear el degradado para el rectángulo superior izquierdo
    const gradientTopLeft = ctx.createLinearGradient(left, top, xZeroPoint, yZeroPoint);
    gradientTopLeft.addColorStop(0, '#F8696B');
    gradientTopLeft.addColorStop(1, '#FEEB84');

    // Aplicar el degradado al rectángulo superior izquierdo
    ctx.save();
    ctx.fillStyle = gradientTopLeft;
    ctx.fillRect(left, top, xZeroPoint - left, yZeroPoint - top);
    ctx.restore();

    // Crear el degradado para el rectángulo inferior izquierdo
    const gradientBottomLeft = ctx.createLinearGradient(left, bottom, xZeroPoint, yZeroPoint);
    gradientBottomLeft.addColorStop(0, '#F8696B');
    gradientBottomLeft.addColorStop(1, '#FEEB84');

    // Aplicar el degradado al rectángulo inferior izquierdo
    ctx.save();
    ctx.fillStyle = gradientBottomLeft;
    ctx.fillRect(left, yZeroPoint, xZeroPoint - left, bottom - yZeroPoint);
    ctx.restore();

    // Calcular la posición de las etiquetas en función del tamaño del área del gráfico
    const decPosX = left + (width * 0.05);
    const decPosY = top + (height * 0.15);
    const expPosX = right - (width * 0.20);
    const expPosY = top + (height * 0.15);
    const conPosX = left + (width * 0.05);
    const conPosY = bottom - (height * 0.25);
    const accPosX = right - (width * 0.22);
    const accPosY = bottom - (height * 0.25);

    // Dibujar el texto 'Deceleration' en la parte superior izquierda
    ctx.save();
    ctx.font = 'bold 12px Roboto';
    ctx.fillStyle = 'black';
    ctx.fillText('DECELERATION', decPosX, decPosY);
    ctx.restore();

    // Dibujar el texto 'Expansion' en la parte superior derecha
    ctx.save();
    ctx.font = 'bold 12px Roboto';
    ctx.fillStyle = 'black';
    ctx.fillText('EXPANSION', expPosX, expPosY);
    ctx.restore();

    // Dibujar el texto 'Contraction' en la parte inferior izquierda
    ctx.save();
    ctx.font = 'bold 12px Roboto';
    ctx.fillStyle = 'black';
    ctx.fillText('CONTRACTION', conPosX, conPosY);
    ctx.restore();

    // Dibujar el texto 'Acceleration' en la parte inferior derecha
    ctx.save();
    ctx.font = 'bold 12px Roboto';
    ctx.fillStyle = 'black';
    ctx.fillText('ACCELERATION', accPosX, accPosY);
    ctx.restore();
  }
};

  // config
  const config2 = {
    type: 'scatter',
    data: data2,
    options: {
      responsive: true,
      maintainAspectRatio: true,
      plugins: {
        legend: {
          display: false
        },

      },
        scales: {
          x: {
            position: {
              y: 0
            },
            max: 1,
            min: -1,
            ticks: {
              stepSize: 10,
              display: false
            },
            grid: {
              color: 'transparent',
              borderDash: [2, 2],
            },
            border: {
              color: 'black'
            }
          },
          y: {
            position: {
              x: 0
            },
            max: 0.5,
            min: -0.3,
            ticks: {
              stepSize: 10,
              display: false
            },
            grid: {
              color: 'transparent',
              borderDash: [2, 2],
            },
            border: {
              color: 'black'
            }
          }
        }
      },

    plugins: [
    chartAreaBackgroundColor2
    ]};

  // render init block
  const expansion = new Chart(
      document.getElementById('Expansion'),
      config2
    );
  })
.catch(error => {
  // Manejar errores aquí
  console.error(error);
});

//Radar
  	//RELLENA LOS SIGUEINTES DATOS
	  zonaAConsultar = "EUR"; 			// Escribe "EUR" o "USA"

	//API Call
	  fetch("https://rest.gvcgaesco.es/ser-gvc-institute/chart/triangulo/"+zonaAConsultar)
	  .then(response => response.json())
	  .then(dataDB => {
		console.log(dataDB);
		let ctx = document.getElementById('radarChart').getContext('2d');

		const data3 = {
		  labels: ['GVC Risk', 'Market Value', 'GVC Cycle'],
		  datasets: [
			{
			  label: 'Valor',
			  backgroundColor: 'rgba(255, 99, 132, 0)',
			  borderColor: 'rgba(0, 0, 0, 1)',
			  pointBackgroundColor: 'rgba(0, 0, 0, 1)',
			  pointBorderColor: '#fff',
			  borderDash: [10,10],
			  pointRadius: 6,
			  pointHoverBackgroundColor: '#fff',
			  pointHoverBorderColor: 'rgba(0, 0, 0, 1)',
			  data: [dataDB.series[0].riesgo, dataDB.series[0].valor, dataDB.series[0].ciclo]  /* Entiendo que esto es Riesgo, Valor y Ciclo*/
			},
			{
			  label: 'Triangulo Pequeño',
			  backgroundColor: '#EDF4F7',
			  borderColor: 'rgba(255, 0, 0, 1)',
			  pointRadius: 0,
			  borderWidth: 5,
			  data: [1, 1, 1],
			  borderJoinStyle: 'round'
			},
			{
			  label: 'Triangulo Mediano',
			  backgroundColor: '#EDF4F7',
			  borderColor: 'rgba(255, 192, 0, 1)',
			  pointRadius: 0,
			  data: [3, 3, 3]
			},
			{
			  label: 'Triangulo Grande',
			  backgroundColor: '#EDF4F7',
			  borderColor: 'rgba(146, 208, 80, 1)',
			  borderWidth: 5,
			  pointRadius: 0,
			  data: [5, 5, 5]
			}
		  ]
		};

		let myRadarChart = new Chart(ctx, {
		  type: 'radar',
		  data: data3,
		  options: {
        aspectRatio: 2,
        layout: {
          padding: {
            top: 20,  // Ajusta estos valores según tus necesidades
            bottom: 20
          }
        },
        plugins: {
          legend: {
          display: false
          }
        },
        scales: {
          r: {
          min: 0,
          max: 5,
          angleLines:{
            display: false
          },
          ticks: {
            stepSize: 1,
            display: false
          },
          pointLabels: {
            font: {
            size: 15,
            weight: "bold"
            },
            color: "black"
          }
          }
        }
        }
      });


		})
	  .catch(error => {
		// Manejar errores aquí
		console.error(error);
	  });


    //Mapa de calor por sectores
    //RELLENA LOS SIGUEINTES DATOS
    zonaAConsultar = "EUR"; 			// Escribe "EUR" o "USA"
      numeroDeDatosAConsultar = 22;		// Escribe la cantidad de filas que quieres que aparezcan en el grafico (Max 30)

     //API Call
      fetch("https://rest.gvcgaesco.es/ser-gvc-institute/chart/calor/"+zonaAConsultar+"/"+numeroDeDatosAConsultar)
      .then(response => response.json())
      .then(dataDB => {
      console.log(dataDB);
      var confianzaEconomica = [];
      var confianzaInversora = [];
      var climaEmpresarial = [];
      var mercadoLaboral = [];
      var confianzaConsumidor = [];
      var inflacion = [];
      var actualidadManufacturera = [];
      var sectorServicios = [];
      var eurostoxx50 = [];
      var construccion = [];
      var gvcCyle = [];
      var fecha = [];
      for(var i = 0; i < numeroDeDatosAConsultar;++i){
        confianzaEconomica[i] = dataDB.series[i].confianza_Economica;
        confianzaInversora[i] = dataDB.series[i].confianza_Inversora;
        climaEmpresarial[i] = dataDB.series[i].clima_Empresarial;
        mercadoLaboral[i] = dataDB.series[i].mercado_Laboral;
        confianzaConsumidor[i] = dataDB.series[i].confianza_Consumidor;
        inflacion[i] = dataDB.series[i].inflacion;
        actualidadManufacturera[i] = dataDB.series[i].actualidad_Manufacturera;
        sectorServicios[i] = dataDB.series[i].sector_Servicios;
        eurostoxx50[i] = dataDB.series[i].eurostoxx50;
        construccion[i] = dataDB.series[i].construccion;
        gvcCyle[i] = dataDB.series[i].gvc_Cyle;
        fecha[i] = dataDB.series[i].mmmyy;
      }

      var options9 = {
        maintainAspectRatio: true,
        series: [
        {
        name: 'GVC Cycle', /*GVC cycle*/
        data: gvcCyle
        },
        {
        name: 'Eurostoxx 50', /*Eurostoxx 50*/
        data: eurostoxx50
        },
        {
        name: 'Inflación', /*Inflación*/
        data: inflacion
        },
        {
        name: 'Mercado Laboral', /*Mercado Laboral*/
        data: mercadoLaboral
        },
        {
        name: 'Actividad Manufacturera', /*Actividad Manufacturera*/
        data: actualidadManufacturera
        },
        {
        name: 'Sector Servicios', /*Sector de Servicios*/
        data: sectorServicios
        },
        {
        name: 'Construcción', /*Construccion*/
        data: construccion
        },
        {
        name: 'Sentimiento Económico (ESI)', /*Confianza Económica*/
        data: confianzaEconomica
        },
        {
        name: 'Confianza Inversor (ZEW)', /*Confianza Inversora*/
        data: confianzaInversora
        },
        {
        name: 'Ventas minoristas', /*Clima Empresarial*/
        data: climaEmpresarial
        },
        {
        name: 'Confianza Consumidor', /*Confianza Consumidor*/
        data: confianzaConsumidor
        }
        ],
        chart: {
        height: "350px",
        type: 'heatmap',
        },
        dataLabels: {
        enabled: false
        },
        xaxis: {
          type: 'category',
          categories: fecha,
          labels: {
            style: {
              colors: 'black'
              }}
            },
        yaxis: {
          labels: {
          style: {
            colors: 'black'
          }}},

        legend: {
        show: false
        },
        plotOptions: {
        heatmap: {
          radius: 0,
          enableShades: false,
          shadeintensity: 0.1,
          useFillColorAsStroke: true,
          colorScale: {
          ranges: [
            {
              from: -0.1,
              to: 0.089,
              color: '#FFFFFF',
            },
            {
              from: 0.09,
              to: 4.99,
              color: '#F8696B',
            },
            {
              from: 5,
              to: 10,
              color: '#F8766D',
            },
            {
              from: 10,
              to: 15,
              color: '#F98370',
            },
            {
              from: 15,
              to: 20,
              color: '#FA9072',
            },
            {
              from: 20,
              to: 25,
              color: '#FA9D75',
            },
            {
              from: 25,
              to: 30,
              color: '#FBAA77',
            },
            {
              from: 30,
              to: 35,
              color: '#FCB77A',
            },
            {
              from: 35,
              to: 40,
              color: '#FCC47C',
            },
            {
              from: 40,
              to: 45,
              color: '#FDD17F',
            },
            {
              from: 45,
              to: 50,
              color: '#FEDE81',
            },
            {
              from: 50,
              to: 55,
              color: '#FFEB84',
            },
            {
              from: 55,
              to: 60,
              color: '#F0E784',
            },
            {
              from: 60,
              to: 65,
              color: '#E0E383',
            },
            {
              from: 65,
              to: 70,
              color: '#D1DE82',
            },
            {
              from: 70,
              to: 75,
              color: '#C1DA81',
            },
            {
              from: 75,
              to: 80,
              color: '#B1D580',
            },
            {
              from: 80,
              to: 85,
              color: '#A2D07F',
            },
            {
              from: 85,
              to: 90,
              color: '#92CC7E',
            },
            {
              from: 90,
              to: 95,
              color: '#83C77D',
            },
            {
              from: 95,
              to: 100,
              color: '#63BE7B',
            }]
              }
          }}
          };
      var chart9 = new ApexCharts(document.querySelector("#chart9"), options9);
      chart9.render();
      })
      .catch(error => {
      // Manejar errores aquí
      console.error(error);
      });

  //Mapa de Calor por Bancos Centrales
    //RELLENA LOS SIGUEINTES DATOS
    zonaAConsultar = "EUR"; 			// Escribe "EUR" o "USA"
      numeroDeDatosAConsultar_bank = 22;		// Escribe la cantidad de filas que quieres que aparezcan en el grafico (Max 30)

    //API Call
      fetch("https://rest.gvcgaesco.es/ser-gvc-institute/chart/balance/"+zonaAConsultar+"/"+numeroDeDatosAConsultar_bank)
      .then(response => response.json())
      .then(dataDB => {

      //Mapeamos los datos de las fechas de la respuesta con los del script
      var chart_hot_reservaFederalData = [];
      var chart_hot_bankOfEngalndData = [];
      var chart_hot_peoplesBankChinaData = [];
      var chart_hot_australiaData = [];
      var chart_hot_bankOfKoreaData = [];
      var chart_hot_bankOfCanadaData = [];
      var chart_hot_bankOfJapanData = [];
      var chart_hot_europeanCentralBankData = [];
      var chart_hot_fechaData = [];

      for(var i = 0; i < numeroDeDatosAConsultar_bank;++i){
          console.log(dataDB.series[1])
        chart_hot_reservaFederalData[i] = dataDB.series[i].federal_Reserve;
        chart_hot_bankOfEngalndData[i] = dataDB.series[i].bank_Of_England;
        chart_hot_peoplesBankChinaData[i] = dataDB.series[i].peoples_Bank_Of_China;
        chart_hot_australiaData[i] = dataDB.series[i].australia;
          chart_hot_bankOfKoreaData[i] = dataDB.series[i].bank_Of_Korea;
        chart_hot_bankOfCanadaData[i] = dataDB.series[i].bank_Of_Canada;
        chart_hot_bankOfJapanData[i] = dataDB.series[i].bank_Of_Japan;
        chart_hot_europeanCentralBankData[i] = dataDB.series[i].european_Central_Bank;
        chart_hot_fechaData[i] = dataDB.series[i].mmmyy;
      }
      var options5 = {
      maintainAspectRatio: true,
      series: [
        {
        name: 'Federal Reserve', /*Federa reserve*/
        data: chart_hot_reservaFederalData
        },
        {
        name: 'Bank of England', /*Bank of England*/
        data: chart_hot_bankOfEngalndData
        },
        {
        name: 'People\'s Bank of China', /*People's Bank of China*/
        data: chart_hot_peoplesBankChinaData
        },
        {
        name: 'Australia', /*Australia*/
        data: chart_hot_australiaData
        },
        {
        name: 'Bank of Korea', /*Bank of Korea*/
        data: chart_hot_bankOfKoreaData
        },
        {
        name: 'Bank of Canada', /*Bank of Canada*/
        data: chart_hot_bankOfCanadaData
        },
        {
        name: 'Bank of Japan', /*Bank of Japan*/
        data: chart_hot_bankOfJapanData
        },
        {
        name: 'European Central Bank', /*European Central Bank*/
        data: chart_hot_europeanCentralBankData
        }
        ],
        chart: {
        height: 350,
        type: 'heatmap',
        },
        dataLabels: {
        enabled: false
        },
        xaxis: {
          type: 'category',
          categories: chart_hot_fechaData,
          labels: {
            style: {
              colors: 'black'
              }}
            },
        yaxis: {
          labels: {
          style: {
            colors: 'black'
          }}},

        legend: {
        show: false
        },
        plotOptions: {
        heatmap: {
          radius: 0,
          enableShades: false,
          shadeintensity: 0,
          useFillColorAsStroke: true,
          colorScale: {
          ranges: [
            {
              from: -0.1,
              to: 0.089,
              color: '#FFFFFF',
            },
            {
              from: 0.09,
              to: 4.99,
              color: '#F8696B',
            },
            {
              from: 5,
              to: 10,
              color: '#F8766D',
            },
            {
              from: 10,
              to: 15,
              color: '#F98370',
            },
            {
              from: 15,
              to: 20,
              color: '#FA9072',
            },
            {
              from: 20,
              to: 25,
              color: '#FA9D75',
            },
            {
              from: 25,
              to: 30,
              color: '#FBAA77',
            },
            {
              from: 30,
              to: 35,
              color: '#FCB77A',
            },
            {
              from: 35,
              to: 40,
              color: '#FCC47C',
            },
            {
              from: 40,
              to: 45,
              color: '#FDD17F',
            },
            {
              from: 45,
              to: 50,
              color: '#FEDE81',
            },
            {
              from: 50,
              to: 55,
              color: '#FFEB84',
            },
            {
              from: 55,
              to: 60,
              color: '#F0E784',
            },
            {
              from: 60,
              to: 65,
              color: '#E0E383',
            },
            {
              from: 65,
              to: 70,
              color: '#D1DE82',
            },
            {
              from: 70,
              to: 75,
              color: '#C1DA81',
            },
            {
              from: 75,
              to: 80,
              color: '#B1D580',
            },
            {
              from: 80,
              to: 85,
              color: '#A2D07F',
            },
            {
              from: 85,
              to: 90,
              color: '#92CC7E',
            },
            {
              from: 90,
              to: 95,
              color: '#83C77D',
            },
            {
              from: 95,
              to: 100,
              color: '#63BE7B',
            }]}
          }}
          };
      var chart_hot = new ApexCharts(document.querySelector("#chart_hot"), options5);
      chart_hot.render();



      })
      .catch(error => {
      // Manejar errores aquí
      console.error(error);
      });



 //Velocimetro de Riesgos Euro
      //RELLENA LOS SIGUEINTES DATOS
      zonaAConsultar = "EUR";       // Escribe "EUR" o "USA"

      //API Call
      fetch("https://rest.gvcgaesco.es/ser-gvc-institute/chart/velocimetro/"+zonaAConsultar)
      .then(response => response.json())
      .then(DBdata => {
      console.log(DBdata);
        var ctx2 = document.getElementById('myChart').getContext('2d');
        const r1 = 4.15;
        const r2 = 3.5;
        const r3 = 2.85;
        const r4 = 2.25;
        const r5 = 1.60;
        const r6 = 1;


        const val = 3;

        const colores =
        [
          'rgb(210, 43, 43, 0.8)',
          'rgb(227, 83, 53, 0.5)',
          'rgb(175, 225, 175)',
          'rgb(80, 200, 120)'
        ];

        const cutout = '17%';
        const weight = 2;
        const data5 = {
        datasets: [{
          type: 'scatter',
          label: 'VIX',
          data: [
          {x: r1*Math.cos(DBdata.series[3].x_Vacio* (Math.PI / 180)), y: r1*Math.sin(DBdata.series[3].x_Vacio* (Math.PI / 180))+val},
          {x: r1*Math.cos(DBdata.series[3].x_Negro* (Math.PI / 180)), y: r1*Math.sin(DBdata.series[3].x_Negro* (Math.PI / 180))+val}
          ],
          pointRadius: 5,
          pointBackgroundColor: ["rgb(0,0,0,1)", "rgb(0,0,0,0)"],
          pointBorderColor: ["rgb(0,0,0,1)", "rgb(0,0,0,1)"]
        }, {
          type: 'scatter',
          label: 'MOVE', /*Fixed Income Volatility*/
          data: [
          {x: r2*Math.cos(DBdata.series[0].x_Vacio* (Math.PI / 180)), y: r2*Math.sin(DBdata.series[0].x_Vacio* (Math.PI / 180))+val},
          {x: r2*Math.cos(DBdata.series[0].x_Negro* (Math.PI / 180)), y: r2*Math.sin(DBdata.series[0].x_Negro* (Math.PI / 180))+val}
          ],
          pointRadius: 5,
          pointBackgroundColor: ["rgb(0,0,0,1)", "rgb(0,0,0,0)"],
          pointBorderColor: ["rgb(0,0,0,1)", "rgb(0,0,0,1)"]
        }, {
          type: 'scatter',
          label: 'Eurodolar', /*Vol EUR*/
          data: [
          {x: r3*Math.cos(DBdata.series[4].x_Vacio* (Math.PI / 180)), y: r3*Math.sin(DBdata.series[4].x_Vacio* (Math.PI / 180))+val},
          {x: r3*Math.cos(DBdata.series[4].x_Negro* (Math.PI / 180)), y: r3*Math.sin(DBdata.series[4].x_Negro* (Math.PI / 180))+val}
          ],
          pointRadius: 5,
          pointBackgroundColor: ["rgb(0,0,0,1)", "rgb(0,0,0,0)"],
          pointBorderColor: ["rgb(0,0,0,1)", "rgb(0,0,0,1)"]
        }, {
          type: 'scatter',
          label: 'Spread 2A-10A', /*spread eu 2-10*/
          data: [
          {x: r4*Math.cos(DBdata.series[2].x_Vacio* (Math.PI / 180)), y:  r4*Math.sin(DBdata.series[2].x_Vacio* (Math.PI / 180))+val},
          {x: r4*Math.cos(DBdata.series[2].x_Negro* (Math.PI / 180)), y: r4*Math.sin(DBdata.series[2].x_Negro* (Math.PI / 180))+val}
          ],
          pointRadius: 5,
          pointBackgroundColor: ["rgb(0,0,0,1)", "rgb(0,0,0,0)"],
          pointBorderColor: ["rgb(0,0,0,1)", "rgb(0,0,0,1)"]
        }, {
          type: 'scatter',
          label: 'Risk Premium', /*Risk Premium*/
          data: [
          {x: r5*Math.cos(DBdata.series[1].x_Vacio* (Math.PI / 180)), y: r5*Math.sin(DBdata.series[1].x_Vacio* (Math.PI / 180))+val},
          {x: r5*Math.cos(DBdata.series[1].x_Negro* (Math.PI / 180)), y: r5*Math.sin(DBdata.series[1].x_Negro* (Math.PI / 180))+val}
          ],
          pointRadius: 5,
          pointBackgroundColor: ["rgb(0,0,0,1)", "rgb(0,0,0,0)"],
          pointBorderColor: ["rgb(0,0,0,1)", "rgb(0,0,0,1)"]
        }, {
          type: 'scatter',
          label: 'Brent Volatility', /*Volatilidad Brent*/
          data: [
          {x: r6*Math.cos(DBdata.series[5].x_Vacio* (Math.PI / 180)), y: r6*Math.sin(DBdata.series[5].x_Vacio* (Math.PI / 180))+val},
          {x: r6*Math.cos(DBdata.series[5].x_Negro* (Math.PI / 180)), y: r6*Math.sin(DBdata.series[5].x_Negro* (Math.PI / 180))+val}
          ],
          pointRadius: 5,
          pointBackgroundColor: ["rgb(0,0,0,1)", "rgb(0,0,0,0)"],
          pointBorderColor: ["rgb(0,0,0,1)", "rgb(0,0,0,1)"]
        },
        {
          type: 'doughnut',
          label: [
            'Regiones'
          ],
          data: [5, 5, 5, 5],
          weight: weight,
          backgroundColor: colores,
          hoverOffset: 0,
          circumference: 180,
          rotation: -90,
          cutout: cutout,
          xAxisID: 'doughnut-x-axis',
          yAxisID: 'doughnut-y-axis',
          options: {
          plugins: {

          }
          }
        }, {
          type: 'doughnut',
          label: [
            'Regiones2'
            ],
          data: [5, 5, 5, 5],
          weight: weight,
          backgroundColor: colores,
          hoverOffset: 0,
          circumference: 180,
          rotation: -90,
          cutout: cutout,
          xAxisID: 'doughnut-x-axis',
          yAxisID: 'doughnut-y-axis'
          }, {
            type: 'doughnut',
            label: [
              'Regiones3'
            ],
            data: [5, 5, 5, 5],
            weight: weight,
            backgroundColor: colores,
            hoverOffset: 0,
            circumference: 180,
            rotation: -90,
            cutout: cutout,
            xAxisID: 'doughnut-x-axis',
            yAxisID: 'doughnut-y-axis'
          }, {
            type: 'doughnut',
            label: [
              'Regiones4'
            ],
            data: [5, 5, 5, 5],
            weight: weight,
            backgroundColor: colores,
            hoverOffset: 0,
            circumference: 180,
            rotation: -90,
            cutout: cutout,
            xAxisID: 'doughnut-x-axis',
            yAxisID: 'doughnut-y-axis'
          }, {
            type: 'doughnut',
            label: [
              'Regiones5'
            ],
            data: [5, 5, 5, 5],
            weight: weight,
            backgroundColor: colores,
            hoverOffset: 0,
            circumference: 180,
            rotation: -90,
            cutout: cutout,
            xAxisID: 'doughnut-x-axis',
            yAxisID: 'doughnut-y-axis'
          }
        ]};

          // Configuración del gráfico Scatter
           var config5 = {
           type: 'scatter',
           data: data5,
           options: {
             aspectRatio: 1,
             plugins: {
               legend: {
                 display: false
               },
               tooltip: {
                 callbacks: {
                 label: ((tooltipItem, data) => {
                   if(tooltipItem.datasetIndex === 0) {
                   return 'VIX'
                   }
                   if(tooltipItem.datasetIndex === 1) {
                   return 'MOVE'
                   }
                   if(tooltipItem.datasetIndex === 2) {
                   return 'Eurodolar'
                   }
                   if(tooltipItem.datasetIndex === 3) {
                   return 'Spread 2A-10A'
                   }
                   if(tooltipItem.datasetIndex === 4) {
                   return 'Risk Premium'
                   }
                   if(tooltipItem.datasetIndex === 5) {
                   return 'Brent Volatility'
                   }
                   if(tooltipItem.datasetIndex > 5) {
                   return ''
                   }
                 })
                 }
               }
               },
             elements: {
               arc: {
                 borderColor: 'black',
                 borderWidth: 1
               }
               },
             scales: {
             x: {
               min: -6,
               max: 6,
               ticks: {
               stepSize: 1
               },
               display: false
             },
             y: {
               min: 0,
               max: 12,
               ticks: {
               stepSize: 1
               },
               display: false
             }
             }
           }
           };


           // Crear el gráfico utilizando el objeto de configuración
           var myChart = new Chart(ctx2, config5);

      })
      .catch(error => {
      // Manejar errores aquí
      console.error(error);
      });


//Momentum de mercado
    //RELLENA LOS SIGUEINTES DATOS
    zonaAConsultar = "EUR"; // Escribe "EUR" o "USA"

    //API Call
    fetch("https://rest.gvcgaesco.es/ser-gvc-institute/chart/momentum/"+zonaAConsultar)
    .then(response => response.json())
    .then(DBdata => {
    console.log(DBdata);
    // setup
    const data9 = {
      datasets: [
      {
        label: "Momentum",
        data: [
        {x: DBdata.series[1].fin, y: 6.5},
        {x: DBdata.series[1].inicio, y: 6.5}
        ],
        showLine: true,
        pointRadius: 5,
        pointBackgroundColor: ["#ff8000", "rgb(0,0,0,0)"],
        pointBorderColor: ["#ff8000", "rgb(0,0,0,0)"],
        borderColor: "#ff8000",
        borderDash: [5, 5]
      }, {
        label: "EMA(ATR)",
        data: [
        {x: DBdata.series[0].fin, y: 2.5},
        {x: DBdata.series[0].inicio, y: 2.5}
        ],
        showLine: true,
        pointRadius: 5,
        pointBackgroundColor: ["#ff8000", "rgb(0,0,0,0)"],
        pointBorderColor: ["#ff8000", "rgb(0,0,0,0)"],
        borderColor: "#ff8000",
        borderDash: [5, 5]
      }, {
        label: "RSI",
        data: [
        {x: DBdata.series[5].fin, y: 3.5},
        {x: DBdata.series[5].inicio, y: 3.5}
        ],
        showLine: true,
        pointRadius: 5,
        pointBackgroundColor: ["#ff8000", "rgb(0,0,0,0)"],
        pointBorderColor: ["#ff8000", "rgb(0,0,0,0)"],
        borderColor: "#ff8000",
        borderDash: [5, 5]
      }, {
        label: "MA(200)",
        data: [
        {x: DBdata.series[6].fin, y: 4.5},
        {x: DBdata.series[6].inicio, y: 4.5}
        ],
        showLine: true,
        pointRadius: 5,
        pointBackgroundColor: ["#ff8000", "rgb(0,0,0,0)"],
        pointBorderColor: ["#ff8000", "rgb(0,0,0,0)"],
        borderColor: "#ff8000",
        borderDash: [5, 5]
      }, {
        label: "MA(20)",
        data: [
        {x: DBdata.series[2].fin, y: 5.5},
        {x: DBdata.series[2].inicio, y: 5.5}
        ],
        showLine: true,
        pointRadius: 5,
        pointBackgroundColor: ["#ff8000", "rgb(0,0,0,0)"],
        pointBorderColor: ["#ff8000", "rgb(0,0,0,0)"],
        borderColor: "#ff8000",
        borderDash: [5, 5]
      }, {
        label: "Put/Call",
        data: [
        {x: DBdata.series[4].fin, y: 1.5},
        {x: DBdata.series[4].inicio, y: 1.5}
        ],
        showLine: true,
        pointRadius: 5,
        pointBackgroundColor: ["#ff8000", "rgb(0,0,0,0)"],
        pointBorderColor: ["#ff8000", "rgb(0,0,0,0)"],
        borderColor: "#ff8000",
        borderDash: [5, 5]
      }, {
        label: "Liquidity",
        data: [
        {x: DBdata.series[3].fin, y: 0.5},
        {x: DBdata.series[3].inicio, y: 0.5}
        ],
        showLine: true,
        pointRadius: 5,
        pointBackgroundColor: ["#ff8000", "rgb(0,0,0,0)"],
        pointBorderColor: ["#ff8000", "rgb(0,0,0,0)"],
        borderColor: "#ff8000",
        borderDash: [5, 5]
      },
      {
      label: "vertical",
        data: [
          {x: 50, y: 0},
          {x: 50, y: 7.5}
        ],
        showLine: true,
        pointRadius: 0,
        borderColor: "white",
        borderDash: [3, 3]
        }]
      };


      // chartAreaBackgroundColor plugin block
      const chartAreaBackgroundColor9 = {
      id: "chartAreaBackgroundColor9",
      beforeDraw(chart2, args2, plugins2) {
        const {ctx, chartArea: {top, bottom, left, right, width,
        height}} = chart2;

        const gradient9 = ctx.createLinearGradient(left, 0, right, 0);
        gradient9.addColorStop(0, '#E89393');
        gradient9.addColorStop(1, '#A5CEA3'); //verde
        ctx.save();
        ctx.fillStyle = gradient9;
        ctx.fillRect(left, top, width, height);
      }
      };
      // chartAreaBorder plugin block
      const chartAreaBorder9 = {
        id: 'chartAreaBorder9',
        afterDraw(chart2, args2, options2) {
        const {ctx, chartArea: {left, top, width, height}} = chart2;
        ctx.save();
        ctx.strokeStyle = options2.borderColor;
        ctx.lineWidth = options2.borderWidth;
        ctx.setLineDash(options2.borderDash || []);
        ctx.lineDashOffset = options2.borderDashOffset;
        ctx.strokeRect(left, top, width, height);
        ctx.restore();
        }
      };

      // config
      const config9 = {
      type: 'scatter',
      data: data9,
      options: {
          plugins: {
            legend: {
              display: false
            },
            chartAreaBorder9: {
              borderColor: "black",
              borderWidth: 2
            }
          },
          scales: {
            x: {
              type: "linear",
              position: "bottom",
              min: 0,
              max: 100,
              display: false
            },
            y: {
              type: "linear",
              position: "left",
              min: 0,
              max: 7,
              grid: {
                color: "white",
                lineWidth: 2.5,
                offset: false
              },
              border: {
                dash: [10, 10]
              },
              ticks: {
                stepSize: 1,
                labelOffset: -15,
                color: "black",
                callback: function(value, index, values) {
                  // Agregar las etiquetas personalizadas aquí
                  const labels = ['Liquidity', 'Put/Call', 'MA(20)', 'MA(200)', 'RSI', 'EMA(ATR)', 'Momentum'];
                  return labels[index];
                }
              }
            }
          }
        },
      plugins: [
      chartAreaBackgroundColor9,
      chartAreaBorder9
      ]};

      // render init block
      const momentum = new Chart(
        document.getElementById('momentum'),
        config9
      );
      })
    .catch(error => {
    // Manejar errores aquí
    console.error(error);
    });


//GVC Risk
    //RELLENA LOS SIGUEINTES DATOS
    zonaAConsultar = "EUR";       // Escribe "EUR" o "USA"
    numeroDeDatosAConsultar_risk = 500;   // Escribe la cantidad de filas que quieres que aparezcan en el grafico (Max 500)

    //API Call
    fetch("https://rest.gvcgaesco.es/ser-gvc-institute/chart/risk/"+zonaAConsultar+"/"+numeroDeDatosAConsultar_risk)
    .then(response => response.json())
    .then(DBdata => {

    // setup
    //Mapeamos los datos
    var fechasdata = [];
    var indicadordata = [];
    var eurostoxdata = [];
    var lineadata = []; //Pintan la línea discontínua del centro del gráfico
    for(var i = 0; i < numeroDeDatosAConsultar_risk;++i){
      fechasdata[i] = DBdata.series[i].ddmm;
      indicadordata[i] = DBdata.series[i].indicador;
      eurostoxdata[i] = DBdata.series[i].eurostoxx50;
      lineadata[i] = 50;
    }

    const data0 = {
      labels: fechasdata,
      datasets: [{
        label: 'Dashline',
        data: lineadata,
        fill: true,
        borderColor: 'rgb(0, 0, 0)',
        tension: 0.2,
        backgroundColor: 'transparent',
        pointRadius:0,
        borderDash: [6,3],
        borderWidth: 2
        },
        {
        label: 'GVCrisk',
        //Mapeamos los datos del indicador de riesgo GVC de la respuesta con los del script
        data: indicadordata,
        fill: true,
        borderColor: 'rgb(136, 49, 49)',
        tension: 0.2,
        backgroundColor: 'transparent',
        pointRadius:0,
        borderWidth: 2
        },
        {
        label: 'Eurostoxx',
        //Mapeamos los datos del Eurostox de la respuesta con los del script
        data: eurostoxdata,
        yAxisID: 'y2',
        fill: false,
        borderColor: 'rgb(0, 0, 0)',
        tension: 0.2,
        backgroundColor: 'transparent',
        pointRadius:0,
        borderWidth: 2
        }]
      };


    const Textografica0 = {
      id: "Textografica0",
      afterDraw(chart, args, plugins) {
        const { ctx, chartArea: { top, bottom, left, right, width, height } } = chart;

        // Calcular la posición de las etiquetas en función del tamaño del área del gráfico
        const ventaPosX0 = left + (width * 0.865);
        const ventaPosY0 = top + (height * 0.1);
        const compraPosX0 = left + (width * 0.86);
        const compraPosY0 = top + (height * 0.9);

        // Agregar texto
        ctx.fillStyle = 'black';
        ctx.font = 'bold 12px Helvetica';
        ctx.fillText("Low risk", compraPosX0, compraPosY0);

        // Agregar texto
        ctx.fillStyle = 'black';
        ctx.font = 'bold 12px Helvetica';
        ctx.fillText("High risk", ventaPosX0, ventaPosY0);
      }};


    // chartAreaBackgroundColor plugin block
    const chartAreaBackgroundColor0 = {
      id: "chartAreaBackgroundColor0",
      beforeDraw(chart0, args0, plugins0) {
      const {ctx, chartArea: {top, bottom, left, right, width, height}} = chart0;
      const gradient0 = ctx.createLinearGradient(0, top, 0, bottom);
      gradient0.addColorStop(0, '#EE9E9E'); // color rojo en la parte superior
      gradient0.addColorStop(1, '#A5CEA3'); // color verde en la parte inferior
      ctx.save();
      ctx.fillStyle = gradient0;
      ctx.fillRect(left, top, width, height);
      }
    };



    // chartAreaBorder plugin block
    const chartAreaBorder0 = {
      id: 'chartAreaBorder0',
      afterDraw(chart, args, options) {
        const {ctx, chartArea: {left, top, width, height}} = chart;
        ctx.save();
        ctx.strokeStyle = options.borderColor;
        ctx.lineWidth = options.borderWidth;
        ctx.setLineDash(options.borderDash || []);
        ctx.lineDashOffset = options.borderDashOffset;
        ctx.strokeRect(left, top, width, height);
        ctx.restore();
      }};

    // config
    const config0 = {
      type: 'line',
      data: data0,
      options: {
      plugins: {
      legend: {
        display: false
        }},
      scales: {
        y: {
          title: {
            display: true,
            text: 'GVC Riski',
            color: 'rgb(136, 49, 49)',
            font: {
              size: 14,
              weight: 'bold'
              }
                },
          min: 0,
          max: 100,
          grid: {
            color: 'transparent',
            tickColor: 'black'
          },
          ticks: {
            color: 'black',
            display: true
          }},
        y2: { // Segundo eje
          position: 'right', // Coloca el eje a la derecha
          grid: {
            color: 'transparent',
            tickColor: 'black'
          },
          title: {
            display: true,
            text: 'Eurostoxx 50',
            color: 'black',
            font: {
            size: 14,
            weight: 'bold'
              }},
          ticks: {
            color: 'black',
            display: true
          }},
        x: {

          grid: {
            color: 'transparent',
            tickColor: 'black'
          },
          ticks: {
              color:'black',
              display: true
            }}}
          },
        plugins: [
        Textografica0, chartAreaBackgroundColor0, chartAreaBorder0
        ]};

     // render init block
    const GVCriski = new Chart(
      document.getElementById('GVCrisk'),
      config0
      );

    })
    .catch(error => {
    // Manejar errores aquí
    console.error(error);
    });



//GVC Momentum
   //RELLENA LOS SIGUEINTES DATOS
    zonaAConsultar = "EUR";       // Escribe "EUR" o "USA"
    numeroDeDatosAConsultar_mom =500;   // Escribe la cantidad de filas que quieres que aparezcan en el grafico (Max 500)

  //API Call
    fetch("https://rest.gvcgaesco.es/ser-gvc-institute/chart/cambioTendencia/"+zonaAConsultar+"/"+numeroDeDatosAConsultar_mom)
    .then(response => response.json())
    .then(DBdata => {

    //Mapeamos los datos
    var fechasData = [];
    var indicadorData = [];
    var eurostoxData = [];
    var mCincoData= [];
    var mDiezData = [];
    var mQuinceData = [];
    var mVeinteData = [];
    var cincoData = [];
    var diezData = [];
    var quinceData = [];
    var veinteData = [];
    var mediaData = [];
    var colorData = [];
    var lineaZero = [];
    var linea1 = [];
    var lineainf1 = [];
    for(var i = 0; i < numeroDeDatosAConsultar_mom;++i){
      fechasData[i] = DBdata.series[i].ddmm;
      indicadorData[i] = DBdata.series[i].indicador;
      eurostoxData[i] = DBdata.series[i].eurostoxx50;
      mCincoData[i] = DBdata.series[i].mcinco;
      mDiezData[i] = DBdata.series[i].mdiez;
      mQuinceData[i] = DBdata.series[i].mquince;
      mVeinteData[i] = DBdata.series[i].mveinte;
      cincoData[i] = DBdata.series[i].cinco;
      diezData[i] = DBdata.series[i].diez;
      quinceData[i] = DBdata.series[i].quince;
      veinteData[i] = DBdata.series[i].veinte;
      mediaData[i] = DBdata.series[i].media200;
      colorData[i] = 100;
      lineaZero[i] = 0;
      linea1[i] = 1;
      lineainf1[i] = -1;
    }
    const data = {
        labels: fechasData,
        datasets: [
            {
            label: 'Zero',
            data: lineaZero,
            fill: true,
            borderColor: 'rgb(0, 0, 0)',
            tension: 0.2,
            backgroundColor: 'transparent',
            pointRadius:0,
            borderDash: [6,3],
            borderWidth: 1
            },
            {
            label: 'linea_1',
            data: linea1,
            fill: true,
            borderColor: 'rgb(255, 0, 0)',
            tension: 0.2,
            backgroundColor: 'transparent',
            pointRadius:0,
            borderDash: [6,3],
            borderWidth: 2
            },
            {
            label: 'lineainf_1',
            data: lineainf1,
            fill: true,
            borderColor: 'rgb(4, 139, 41)',
            tension: 0.2,
            backgroundColor: 'transparent',
            pointRadius:0,
            borderDash: [6,3],
            borderWidth: 2
            },
                    {
            label: 'GVCi Momentum', /*  Indicador */
            data: indicadorData,
            fill: true,
            borderColor: 'rgb(136, 49, 49)',
            tension: 0.2,
            backgroundColor: 'transparent',
            pointRadius:0,
            borderWidth: 2
            },
        {
            label: 'Eurostoxx',
            yAxisID: 'eurax',
            data: eurostoxData,
            fill: true,
            borderColor: 'rgb(0, 0, 0)',
            tension: 0.2,
            backgroundColor: 'transparent',
            pointRadius:0,
            borderWidth: 2
        },

        //{
        //    label: 'Dashline',  /* Media 200 */
        //    data: mediaData,
        //    fill: true,
        //    borderColor: 'rgb(0, 0, 0)',
        //    tension: 0.2,
        //    backgroundColor: 'transparent',
        //    pointRadius:0,
        //    borderDash: [6,3],
        //    borderWidth: 1
        //    },

        {
            label: '5',
            data: cincoData,
            fill: true,
            borderColor: 'rgb(210, 248, 242)',
            tension: 0.1,
            backgroundColor: 'rgba(210, 248, 242, 1)',
            pointRadius:0
            },
        {
            label: '10',
            data: diezData,
            fill: true,
            borderColor: 'rgb(255,251,199)',
            tension: 0.2,
            backgroundColor: 'rgba(255,251,199,1)',
            pointRadius:0
            },
        {
            label: '15',
            data: quinceData,
            fill: true,
            borderColor: 'rgb(255,230,115)',
            tension: 0.2,
            backgroundColor: 'rgba(255,230,115,1)',
            pointRadius:0
            },
        {
            label: '20',
            data: veinteData,
            fill: true,
            borderColor: 'rgb(243, 169, 80)',
            tension: 0.2,
            backgroundColor: 'rgba(243, 169, 80,1)',
            pointRadius:0
            },
            {
            label: '25',
            data: colorData,
            fill: true,
            borderColor: 'rgba(255,255,255)',
            tension: 0.2,
            backgroundColor: 'rgba(255, 255, 255,1)',
            pointRadius:0
            },
                    {
            label: '-5',
            data: mCincoData,
            fill: true,
            borderColor: 'rgb(255,251,199)',
            tension: 0.2,
            backgroundColor: 'rgba(210, 248, 242, 1)' ,
            pointRadius:0
            },
            {
            label: '-10',
            data: mDiezData,
            fill: true,
            borderColor: 'rgba(255,251,199,1)',
            tension: 0.2,
            backgroundColor: 'rgba(255,251,199,1)',
            pointRadius:0
            },

            {
            label: '-15',
            data: mQuinceData,
            fill: true,
            borderColor: 'rgba(255,230,115,1)',
            tension: 0.2,
            backgroundColor: 'rgba(255,230,115,1)',
            pointRadius:0
            },
            {
            label: '-20',
            data: mVeinteData,
            fill: true,
            borderColor: 'rgba(243, 169, 80,1)',
            tension: 0.3,
            backgroundColor: 'rgba(243, 169, 80,1)',
            pointRadius:0
            }]
        };


    const Textografica = {
    id: "Textografica",
    afterDraw(chart, args, plugins) {
        const { ctx, chartArea: { top, bottom, left, right, width, height } } = chart;

        // Calcular la posición de las etiquetas en función del tamaño del área del gráfico
        const ventaPosX = left + (width * 0.80);
        const ventaPosY = top + (height * 0.1);
        const compraPosX = left + (width * 0.83);
        const compraPosY = top + (height * 0.92);

        // Agregar texto
        ctx.fillStyle = 'black';
        ctx.font = 'bold 12px Helvetica';
        ctx.fillText("Sobrecompra", ventaPosX, ventaPosY);

        // Agregar texto
        ctx.fillStyle = 'black';
        ctx.font = 'bold 12px Helvetica';
        ctx.fillText("Sobreventa", compraPosX, compraPosY);
    }};

    // chartAreaBorder plugin block
    const chartAreaBorder = {
        id: 'chartAreaBorder',
        afterDraw(chart, args, options) {
            const {ctx, chartArea: {left, top, width, height}} = chart;
            ctx.save();
            ctx.strokeStyle = options.borderColor;
            ctx.lineWidth = options.borderWidth;
            ctx.setLineDash(options.borderDash || []);
            ctx.lineDashOffset = options.borderDashOffset;
            ctx.strokeRect(left, top, width, height);
            ctx.restore();
        }};

    // config
    const config = {
        type: 'line',
        data: data,
        options: {
            maintainAspectRatio: true,
            plugins: {
                legend: {
                    display: false
                }},
            scales: {
                y: {
                    min:-2,
                    max:2,
                    title: {
                        display: true,
                        text: 'GVC Momentum',
                        color: 'rgb(136, 49, 49)',
                        font: {
                        size: 14,
                        weight: 'bold'
                            }},
                    grid: {
                        color: 'transparent',
                        tickColor: 'black'
                        },
                    ticks: {
                        color:'black',
                        display: true
                    }},
                eurax: {
                    position: 'right',
                    ticks: {
                        beginAtZero: true,
                        color: 'black'
                    },
                    title: {
                        display: true,
                        text: 'Eurostoxx 50',
                        color: 'black',
                        font: {
                        size: 14,
                        weight: 'bold'
                            }
                        },
                    grid: {
                        color: 'transparent',
                        tickColor: 'black'
                    }},
                x: {
                    grid: {
                        color: 'transparent',
                        tickColor: 'black'
                    },
                    ticks: {
                        color:'black',
                        display: true
                    }},

                }},
          plugins: [
            Textografica, chartAreaBorder
            ]};

     // render init block
    const GVCindi = new Chart(
        document.getElementById('GVCind'),
        config
        );


    })
    .catch(error => {
    // Manejar errores aquí
    console.error(error);
    });
    // setup




//  Velocidad del Ciclo Económico USA
//RELLENA LOS SIGUEINTES DATOS
zonaAConsultar = "USA"; 			// Escribe "EUR" o "USA"
  numeroDeDatosAConsultar_vel = 24;		// Escribe la cantidad de filas que quieres que aparezcan en el grafico (Max 36)

//API Call
  fetch("https://rest.gvcgaesco.es/ser-gvc-institute/chart/ciclo/"+zonaAConsultar+"/"+numeroDeDatosAConsultar_vel)
  .then(response => response.json())
  .then(dataDB => {

//Mapeamos los datos de las fechas de la respuesta con los del script
var fechasdata = [];
var puntos = [];
var radios = []; // Array para los radios de los puntos
var colores = []; // Nuevo array para los colores de los puntos

for(var index_ciclo = 0; index_ciclo < dataDB.series.length; ++index_ciclo){
  fechasdata[index_ciclo] = dataDB.series[index_ciclo].mmmyy;
  puntos.push({ x: dataDB.series[index_ciclo].x, y: dataDB.series[index_ciclo].y });
  radios.push(2); // Asigna el radio a 2 para todos los puntos
  
  // Para todos los puntos excepto el primero, asigna el color a blanco
  if(index_ciclo === 0){
    colores.push('white'); // Asigna el color negro solo al primer punto
  }else{
    colores.push('black'); // Asigna el color blanco a los demás puntos
  }
}

// Asigna un radio más grande al último punto, igual que al primero
radios[radios.length - 1] = 4; // Último punto
radios[0] = 5.3; // Primer punto

// setup
const data2 = {
  labels: fechasdata,

  datasets: [
      {
        pointRadius: radios,
        pointBackgroundColor: colores,
        data: puntos,
        borderColor: 'black',
        borderWidth: 2,
        tension: 0.4,
        showLine: true,
        // Configuración de Data Labels para mostrar solo en el primer punto
        datalabels: {
          align: 'end',
          anchor: 'end',
          color: '#000',
          font: {
            weight: 'bold'
          },
          formatter: function(value, context) {
            // Muestra la etiqueta solo para el primer punto
            return context.dataIndex === 0 ? 'Inicio' : null;
          },
        }
      }
    ]
};

// chartAreaBackgroundColor plugin block
const chartAreaBackgroundColor2 = {
  id: "chartAreaBackgroundColor2",
  beforeDraw(chart, args, plugins) {
    const {ctx, chartArea: {top, bottom, left, right, width, height}} = chart;
    const yAxis = chart.scales.y;
    const xAxis = chart.scales.x;

    const yZeroPoint = yAxis.getPixelForValue(0);
    const xZeroPoint = xAxis.getPixelForValue(0);
    const halfWidth = width / 2;

    // Crear el degradado para el rectángulo superior verde
    const gradientTop = ctx.createLinearGradient(right, top, xZeroPoint, yZeroPoint);
    gradientTop.addColorStop(0, '#62BD7E');
    gradientTop.addColorStop(1, '#FEEB84');

    // Aplicar el degradado al rectángulo superior verde
    ctx.save();
    ctx.fillStyle = gradientTop;
    ctx.fillRect(xZeroPoint, top, halfWidth, yZeroPoint - top);
    ctx.restore();

    // Crear el degradado para el rectángulo inferior verde
    const gradientBottom = ctx.createLinearGradient(right, bottom, xZeroPoint, yZeroPoint);
    gradientBottom.addColorStop(0, '#62BD7E');
    gradientBottom.addColorStop(1, '#FEEB84');

    // Aplicar el degradado al rectángulo inferior verde
    ctx.save();
    ctx.fillStyle = gradientBottom;
    ctx.fillRect(xZeroPoint, yZeroPoint, halfWidth, bottom - yZeroPoint);
    ctx.restore();

    // Crear el degradado para el rectángulo superior izquierdo
    const gradientTopLeft = ctx.createLinearGradient(left, top, xZeroPoint, yZeroPoint);
    gradientTopLeft.addColorStop(0, '#F8696B');
    gradientTopLeft.addColorStop(1, '#FEEB84');

    // Aplicar el degradado al rectángulo superior izquierdo
    ctx.save();
    ctx.fillStyle = gradientTopLeft;
    ctx.fillRect(left, top, xZeroPoint - left, yZeroPoint - top);
    ctx.restore();

    // Crear el degradado para el rectángulo inferior izquierdo
    const gradientBottomLeft = ctx.createLinearGradient(left, bottom, xZeroPoint, yZeroPoint);
    gradientBottomLeft.addColorStop(0, '#F8696B');
    gradientBottomLeft.addColorStop(1, '#FEEB84');

    // Aplicar el degradado al rectángulo inferior izquierdo
    ctx.save();
    ctx.fillStyle = gradientBottomLeft;
    ctx.fillRect(left, yZeroPoint, xZeroPoint - left, bottom - yZeroPoint);
    ctx.restore();

    // Calcular la posición de las etiquetas en función del tamaño del área del gráfico
    const decPosX = left + (width * 0.05);
    const decPosY = top + (height * 0.15);
    const expPosX = right - (width * 0.20);
    const expPosY = top + (height * 0.15);
    const conPosX = left + (width * 0.05);
    const conPosY = bottom - (height * 0.25);
    const accPosX = right - (width * 0.22);
    const accPosY = bottom - (height * 0.25);

    // Dibujar el texto 'Deceleration' en la parte superior izquierda
    ctx.save();
    ctx.font = 'bold 12px Roboto';
    ctx.fillStyle = 'black';
    ctx.fillText('DECELERATION', decPosX, decPosY);
    ctx.restore();

    // Dibujar el texto 'Expansion' en la parte superior derecha
    ctx.save();
    ctx.font = 'bold 12px Roboto';
    ctx.fillStyle = 'black';
    ctx.fillText('EXPANSION', expPosX, expPosY);
    ctx.restore();

    // Dibujar el texto 'Contraction' en la parte inferior izquierda
    ctx.save();
    ctx.font = 'bold 12px Roboto';
    ctx.fillStyle = 'black';
    ctx.fillText('CONTRACTION', conPosX, conPosY);
    ctx.restore();

    // Dibujar el texto 'Acceleration' en la parte inferior derecha
    ctx.save();
    ctx.font = 'bold 12px Roboto';
    ctx.fillStyle = 'black';
    ctx.fillText('ACCELERATION', accPosX, accPosY);
    ctx.restore();
  }
};

  // config
  const config2 = {
    type: 'scatter',
    data: data2,
    options: {
      responsive: true,
      maintainAspectRatio: true,
      plugins: {
        legend: {
          display: false
        },

      },
      scales: {
        x: {
          position: {
            y: 0
          },
          max: 0.37,
          min: -0.37,
          ticks: {
            stepSize: 10,
            display: false
          },
          grid: {
            color: 'transparent',
            borderDash: [2, 2],
          },
          border: {
            color: 'black'
          }
        },
        y: {
          position: {
            x: 0
          },
          max: 0.15,
          min: -0.11,
          ticks: {
            stepSize: 10,
            display: false
          },
          grid: {
            color: 'transparent',
            borderDash: [2, 2],
          },
          border: {
            color: 'black'
          }
        }
      }
    },

    plugins: [
    chartAreaBackgroundColor2
    ]};

  // render init block
  const expansion = new Chart(
    document.getElementById('ExpansionUS'),
    config2
  );
})
.catch(error => {
  // Manejar errores aquí
  console.error(error);
});

//Radar USA
  	//RELLENA LOS SIGUEINTES DATOS
	  zonaAConsultar = "USA"; 			// Escribe "EUR" o "USA"

	//API Call
	  fetch("https://rest.gvcgaesco.es/ser-gvc-institute/chart/triangulo/"+zonaAConsultar)
	  .then(response => response.json())
	  .then(dataDB => {
		console.log(dataDB);
		let ctx = document.getElementById('radarChartUS').getContext('2d');

		const data3 = {
		  labels: ['GVC Risk', 'Market Value', 'GVC Cycle'],
		  datasets: [
			{
			  label: 'Valor',
			  backgroundColor: 'rgba(255, 99, 132, 0)',
			  borderColor: 'rgba(0, 0, 0, 1)',
			  pointBackgroundColor: 'rgba(0, 0, 0, 1)',
			  pointBorderColor: '#fff',
			  borderDash: [10,10],
			  pointRadius: 6,
			  pointHoverBackgroundColor: '#fff',
			  pointHoverBorderColor: 'rgba(0, 0, 0, 1)',
			  data: [dataDB.series[0].riesgo, dataDB.series[0].valor, dataDB.series[0].ciclo]  /* Entiendo que esto es Riesgo, Valor y Ciclo*/
			},
			{
			  label: 'Triangulo Pequeño',
			  backgroundColor: '#EDF4F7',
			  borderColor: 'rgba(255, 0, 0, 1)',
			  pointRadius: 0,
			  borderWidth: 5,
			  data: [1, 1, 1],
			  borderJoinStyle: 'round'
			},
			{
			  label: 'Triangulo Mediano',
			  backgroundColor: '#EDF4F7',
			  borderColor: 'rgba(255, 192, 0, 1)',
			  pointRadius: 0,
			  data: [3, 3, 3]
			},
			{
			  label: 'Triangulo Grande',
			  backgroundColor: '#EDF4F7',
			  borderColor: 'rgba(146, 208, 80, 1)',
			  borderWidth: 5,
			  pointRadius: 0,
			  data: [5, 5, 5]
			}
		  ]
		};

		let myRadarChart = new Chart(ctx, {
		  type: 'radar',
		  data: data3,
		  options: {
        aspectRatio: 2,
        layout: {
          padding: {
            top: 20,  // Ajusta estos valores según tus necesidades
            bottom: 20
          }
        },
        plugins: {
          legend: {
          display: false
          }
        },
        scales: {
          r: {
          min: 0,
          max: 5,
          angleLines:{
            display: false
          },
          ticks: {
            stepSize: 1,
            display: false
          },
          pointLabels: {
            font: {
            size: 15,
            weight: "bold"
            },
            color: "black"
          }
          }
        }
        }
      });


		})
	  .catch(error => {
		// Manejar errores aquí
		console.error(error);
	  });


//GVC Momentum USA
   //RELLENA LOS SIGUEINTES DATOS
   zonaAConsultar = "USA";       // Escribe "EUR" o "USA"
    numeroDeDatosAConsultar_mom =500;   // Escribe la cantidad de filas que quieres que aparezcan en el grafico (Max 500)

  //API Call
    fetch("https://rest.gvcgaesco.es/ser-gvc-institute/chart/cambioTendencia/"+zonaAConsultar+"/"+numeroDeDatosAConsultar_mom)
    .then(response => response.json())
    .then(DBdata => {

    //Mapeamos los datos
    var fechasData = [];
    var indicadorData = [];
    var eurostoxData = [];
    var mCincoData= [];
    var mDiezData = [];
    var mQuinceData = [];
    var mVeinteData = [];
    var cincoData = [];
    var diezData = [];
    var quinceData = [];
    var veinteData = [];
    var mediaData = [];
    var colorData = [];
    var lineaZero = [];
    var linea1 = [];
    var lineainf1 = [];
    for(var i = 0; i < numeroDeDatosAConsultar_mom;++i){
      fechasData[i] = DBdata.series[i].ddmm;
      indicadorData[i] = DBdata.series[i].indicador;
      eurostoxData[i] = DBdata.series[i].eurostoxx50;
      mCincoData[i] = DBdata.series[i].mcinco;
      mDiezData[i] = DBdata.series[i].mdiez;
      mQuinceData[i] = DBdata.series[i].mquince;
      mVeinteData[i] = DBdata.series[i].mveinte;
      cincoData[i] = DBdata.series[i].cinco;
      diezData[i] = DBdata.series[i].diez;
      quinceData[i] = DBdata.series[i].quince;
      veinteData[i] = DBdata.series[i].veinte;
      mediaData[i] = DBdata.series[i].media200;
      colorData[i] = 100;
      lineaZero[i] = 0;
      linea1[i] = 1;
      lineainf1[i] = -1;
    }
    const data = {
        labels: fechasData,
        datasets: [
            {
            label: 'Zero',
            data: lineaZero,
            fill: true,
            borderColor: 'rgb(0, 0, 0)',
            tension: 0.2,
            backgroundColor: 'transparent',
            pointRadius:0,
            borderDash: [6,3],
            borderWidth: 1
            },

            {
            label: 'linea_1',
            data: linea1,
            fill: true,
            borderColor: 'rgb(255, 0, 0)',
            tension: 0.2,
            backgroundColor: 'transparent',
            pointRadius:0,
            borderDash: [6,3],
            borderWidth: 2
            },
            {
            label: 'lineainf_1',
            data: lineainf1,
            fill: true,
            borderColor: 'rgb(4, 139, 41)',
            tension: 0.2,
            backgroundColor: 'transparent',
            pointRadius:0,
            borderDash: [6,3],
            borderWidth: 2
            },
                    {
            label: 'GVC Momentum', /*  Indicador */
            data: indicadorData,
            fill: true,
            borderColor: 'rgb(136, 49, 49)',
            tension: 0.2,
            backgroundColor: 'transparent',
            pointRadius:0,
            borderWidth: 2
            },
        {
            label: 'Eurostoxx',
            yAxisID: 'eurax',
            data: eurostoxData,
            fill: true,
            borderColor: 'rgb(0, 0, 0)',
            tension: 0.2,
            backgroundColor: 'transparent',
            pointRadius:0,
            borderWidth: 2
        },

        //{
        //    label: 'Dashline',  /* Media 200 */
        //    data: mediaData,
        //    fill: true,
        //    borderColor: 'rgb(0, 0, 0)',
        //    tension: 0.2,
        //    backgroundColor: 'transparent',
        //    pointRadius:0,
        //    borderDash: [6,3],
        //    borderWidth: 1
        //    },

        {
            label: '5',
            data: cincoData,
            fill: true,
            borderColor: 'rgb(210, 248, 242)',
            tension: 0.1,
            backgroundColor: 'rgba(210, 248, 242, 1)',
            pointRadius:0
            },
        {
            label: '10',
            data: diezData,
            fill: true,
            borderColor: 'rgb(255,251,199)',
            tension: 0.2,
            backgroundColor: 'rgba(255,251,199,1)',
            pointRadius:0
            },
        {
            label: '15',
            data: quinceData,
            fill: true,
            borderColor: 'rgb(255,230,115)',
            tension: 0.2,
            backgroundColor: 'rgba(255,230,115,1)',
            pointRadius:0
            },
        {
            label: '20',
            data: veinteData,
            fill: true,
            borderColor: 'rgb(243, 169, 80)',
            tension: 0.2,
            backgroundColor: 'rgba(243, 169, 80,1)',
            pointRadius:0
            },
            {
            label: '25',
            data: colorData,
            fill: true,
            borderColor: 'rgba(255,255,255)',
            tension: 0.2,
            backgroundColor: 'rgba(255, 255, 255,1)',
            pointRadius:0
            },
                    {
            label: '-5',
            data: mCincoData,
            fill: true,
            borderColor: 'rgb(255,251,199)',
            tension: 0.2,
            backgroundColor: 'rgba(210, 248, 242, 1)' ,
            pointRadius:0
            },
            {
            label: '-10',
            data: mDiezData,
            fill: true,
            borderColor: 'rgba(255,251,199,1)',
            tension: 0.2,
            backgroundColor: 'rgba(255,251,199,1)',
            pointRadius:0
            },

            {
            label: '-15',
            data: mQuinceData,
            fill: true,
            borderColor: 'rgba(255,230,115,1)',
            tension: 0.2,
            backgroundColor: 'rgba(255,230,115,1)',
            pointRadius:0
            },
            {
            label: '-20',
            data: mVeinteData,
            fill: true,
            borderColor: 'rgba(243, 169, 80,1)',
            tension: 0.3,
            backgroundColor: 'rgba(243, 169, 80,1)',
            pointRadius:0
            }]
        };


    const Textografica = {
    id: "Textografica",
    afterDraw(chart, args, plugins) {
        const { ctx, chartArea: { top, bottom, left, right, width, height } } = chart;

        // Calcular la posición de las etiquetas en función del tamaño del área del gráfico
        const ventaPosX = left + (width * 0.80);
        const ventaPosY = top + (height * 0.1);
        const compraPosX = left + (width * 0.83);
        const compraPosY = top + (height * 0.92);

        // Agregar texto
        ctx.fillStyle = 'black';
        ctx.font = 'bold 12px Helvetica';
        ctx.fillText("Sobrecompra", ventaPosX, ventaPosY);

        // Agregar texto
        ctx.fillStyle = 'black';
        ctx.font = 'bold 12px Helvetica';
        ctx.fillText("Sobreventa", compraPosX, compraPosY);
    }};

    // chartAreaBorder plugin block
    const chartAreaBorder = {
        id: 'chartAreaBorder',
        afterDraw(chart, args, options) {
            const {ctx, chartArea: {left, top, width, height}} = chart;
            ctx.save();
            ctx.strokeStyle = options.borderColor;
            ctx.lineWidth = options.borderWidth;
            ctx.setLineDash(options.borderDash || []);
            ctx.lineDashOffset = options.borderDashOffset;
            ctx.strokeRect(left, top, width, height);
            ctx.restore();
        }};

    // config
    const config = {
        type: 'line',
        data: data,
        options: {
            maintainAspectRatio: true,
            plugins: {
                legend: {
                    display: false
                }},
            scales: {
                y: {
                    min:-2,
                    max:2,
                    title: {
                        display: true,
                        text: 'GVC Momentum',
                        color: 'rgb(136, 49, 49)',
                        font: {
                        size: 14,
                        weight: 'bold'
                            }},
                    grid: {
                        color: 'transparent',
                        tickColor: 'black'
                        },
                    ticks: {
                        color:'black',
                        display: true
                    }},
                eurax: {
                    position: 'right',
                    ticks: {
                        beginAtZero: true,
                        color: 'black'
                    },
                    title: {
                        display: true,
                        text: 'S&P500',
                        color: 'black',
                        font: {
                        size: 14,
                        weight: 'bold'
                            }
                        },
                    grid: {
                        color: 'transparent',
                        tickColor: 'black'
                    }},
                x: {
                    grid: {
                        color: 'transparent',
                        tickColor: 'black'
                    },
                    ticks: {
                        color:'black',
                        display: true
                    }},

                }},
          plugins: [
            Textografica, chartAreaBorder
            ]};

     // render init block
    const GVCindi = new Chart(
        document.getElementById('GVCindUSA'),
        config
        );


    })
    .catch(error => {
    // Manejar errores aquí
    console.error(error);
    });


    // setup


 //Mapa de Calor por Sectores USA
    //Mapa de calor por sectores
    //RELLENA LOS SIGUEINTES DATOS
    zonaAConsultar = "USA"; 			// Escribe "EUR" o "USA"
      numeroDeDatosAConsultar = 22;		// Escribe la cantidad de filas que quieres que aparezcan en el grafico (Max 30)

     //API Call
      fetch("https://rest.gvcgaesco.es/ser-gvc-institute/chart/calor/"+zonaAConsultar+"/"+numeroDeDatosAConsultar)
      .then(response => response.json())
      .then(dataDB => {
      console.log(dataDB);
      var confianzaEconomica = [];
      var confianzaInversora = [];
      var climaEmpresarial = [];
      var mercadoLaboral = [];
      var confianzaConsumidor = [];
      var inflacion = [];
      var actualidadManufacturera = [];
      var sectorServicios = [];
      var eurostoxx50 = [];
      var construccion = [];
      var gvcCyle = [];
      var fecha = [];
      for(var i = 0; i < numeroDeDatosAConsultar;++i){
        confianzaEconomica[i] = dataDB.series[i].confianza_Economica;
        confianzaInversora[i] = dataDB.series[i].confianza_Inversora;
        climaEmpresarial[i] = dataDB.series[i].clima_Empresarial;
        mercadoLaboral[i] = dataDB.series[i].mercado_Laboral;
        confianzaConsumidor[i] = dataDB.series[i].confianza_Consumidor;
        inflacion[i] = dataDB.series[i].inflacion;
        actualidadManufacturera[i] = dataDB.series[i].actualidad_Manufacturera;
        sectorServicios[i] = dataDB.series[i].sector_Servicios;
        eurostoxx50[i] = dataDB.series[i].eurostoxx50;
        construccion[i] = dataDB.series[i].construccion;
        gvcCyle[i] = dataDB.series[i].gvc_Cyle;
        fecha[i] = dataDB.series[i].mmmyy;
      }

      var options9 = {
        maintainAspectRatio: true,
        series: [
        {
        name: 'GVC Cycle', /*GVC cycle*/
        data: gvcCyle
        },
        {
        name: 'LEI', /*Clima Empresarial*/
        data: sectorServicios
        },
        {
        name: 'S&P500', /*Construccion*/
        data: construccion
        },
        {
        name: 'Inflation', /*Eurostoxx 50*/
        data: eurostoxx50
        },
        {
        name: 'Non Farm Payrolls', /*Sector de Servicios*/
        data: climaEmpresarial
        },
        {
        name: 'Manufacturing PMI', /*Actividad Manufacturera*/
        data: actualidadManufacturera
        },
        {
        name: 'Services PMI', /*Inflación*/
        data: inflacion
        },
        {
        name: 'Building Permits', /*Confianza Consumidor*/
        data: mercadoLaboral
        },
        {
        name: 'Industrial Production', /*Mercado Laboral*/
        data: confianzaConsumidor
        },
        {
        name: 'Retail Sales', /*Confianza Inversora*/
        data: confianzaInversora
        },
        {
        name: 'Michigan Consumer Sentiment', /*Confianza Económica*/
        data: confianzaEconomica
        }
        ],
        chart: {
        height: "350px",
        type: 'heatmap',
        },
        dataLabels: {
        enabled: false
        },
        xaxis: {
          type: 'category',
          categories: fecha,
          labels: {
            style: {
              colors: 'black'
              }}
            },
        yaxis: {
          labels: {
          style: {
            colors: 'black'
          }}},

        legend: {
        show: false
        },
        plotOptions: {
        heatmap: {
          radius: 0,
          enableShades: false,
          shadeintensity: 0.1,
          useFillColorAsStroke: true,
          colorScale: {
          ranges: [
            {
              from: -0.1,
              to: 0.089,
              color: '#FFFFFF',
            },
            {
              from: 0.09,
              to: 4.99,
              color: '#F8696B',
            },
            {
              from: 5,
              to: 10,
              color: '#F8766D',
            },
            {
              from: 10,
              to: 15,
              color: '#F98370',
            },
            {
              from: 15,
              to: 20,
              color: '#FA9072',
            },
            {
              from: 20,
              to: 25,
              color: '#FA9D75',
            },
            {
              from: 25,
              to: 30,
              color: '#FBAA77',
            },
            {
              from: 30,
              to: 35,
              color: '#FCB77A',
            },
            {
              from: 35,
              to: 40,
              color: '#FCC47C',
            },
            {
              from: 40,
              to: 45,
              color: '#FDD17F',
            },
            {
              from: 45,
              to: 50,
              color: '#FEDE81',
            },
            {
              from: 50,
              to: 55,
              color: '#FFEB84',
            },
            {
              from: 55,
              to: 60,
              color: '#F0E784',
            },
            {
              from: 60,
              to: 65,
              color: '#E0E383',
            },
            {
              from: 65,
              to: 70,
              color: '#D1DE82',
            },
            {
              from: 70,
              to: 75,
              color: '#C1DA81',
            },
            {
              from: 75,
              to: 80,
              color: '#B1D580',
            },
            {
              from: 80,
              to: 85,
              color: '#A2D07F',
            },
            {
              from: 85,
              to: 90,
              color: '#92CC7E',
            },
            {
              from: 90,
              to: 95,
              color: '#83C77D',
            },
            {
              from: 95,
              to: 100,
              color: '#63BE7B',
            }]
              }
          }}
          };
      var chart9 = new ApexCharts(document.querySelector("#chart9US"), options9);
      chart9.render();
      })
      .catch(error => {
      // Manejar errores aquí
      console.error(error);
      });



  //Mapa de Calor Bancos Asiático
  //RELLENA LOS SIGUEINTES DATOS
    zonaAConsultar = "USA";       // Escribe "EUR" o "USA"
    numeroDeDatosAConsultar_bank = 22;		// Escribe la cantidad de filas que quieres que aparezcan en el grafico (Max 30)

  //API Call
    fetch("https://rest.gvcgaesco.es/ser-gvc-institute/chart/balance/"+zonaAConsultar+"/"+numeroDeDatosAConsultar_bank)
    .then(response => response.json())
    .then(dataDB => {

    //Mapeamos los datos de las fechas de la respuesta con los del script
    var chart_hot_reservaFederalData = [];
    var chart_hot_bankOfEngalndData = [];
    var chart_hot_peoplesBankChinaData = [];
    var chart_hot_australiaData = [];
    var chart_hot_bankOfKoreaData = [];
    var chart_hot_bankOfCanadaData = [];
    var chart_hot_bankOfJapanData = [];
    var chart_hot_europeanCentralBankData = [];
    var chart_hot_fechaData = [];

    for(var i = 0; i < numeroDeDatosAConsultar_bank;++i){
        console.log(dataDB.series[1])
      chart_hot_reservaFederalData[i] = dataDB.series[i].federal_Reserve;
      chart_hot_bankOfEngalndData[i] = dataDB.series[i].bank_Of_England;
      chart_hot_peoplesBankChinaData[i] = dataDB.series[i].peoples_Bank_Of_China;
      chart_hot_australiaData[i] = dataDB.series[i].australia;
        chart_hot_bankOfKoreaData[i] = dataDB.series[i].bank_Of_Korea;
      chart_hot_bankOfCanadaData[i] = dataDB.series[i].bank_Of_Canada;
      chart_hot_bankOfJapanData[i] = dataDB.series[i].bank_Of_Japan;
      chart_hot_europeanCentralBankData[i] = dataDB.series[i].european_Central_Bank;
      chart_hot_fechaData[i] = dataDB.series[i].mmmyy;
    }
    var options5 = {
    maintainAspectRatio: true,
    series: [
      {
      name: 'PMI Composite Japan', /*Federa reserve*/
      data: chart_hot_reservaFederalData
      },
      {
      name: 'PMI Composite India', /*Bank of England*/
      data: chart_hot_bankOfEngalndData
      },
      {
      name: 'Exports Korea', /*People's Bank of China*/
      data: chart_hot_peoplesBankChinaData
      },
      {
      name: 'Baltic Dry Index', /*Australia*/
      data: chart_hot_australiaData
      },
      {
      name: 'Industrial Production China', /*Bank of Korea*/
      data: chart_hot_bankOfKoreaData
      },
      {
      name: 'PMI Composite China', /*Bank of Canada*/
      data: chart_hot_bankOfCanadaData
      },
      {
      name: 'Trade Balance China', /*Bank of Japan*/
      data: chart_hot_bankOfJapanData
      },
      {
      name: 'House Prices China',
      data: chart_hot_europeanCentralBankData
      }
      ],
      chart: {
      height: 350,
      type: 'heatmap',
      },
      dataLabels: {
      enabled: false
      },
      xaxis: {
        type: 'category',
        categories: chart_hot_fechaData,
        labels: {
          style: {
            colors: 'black'
            }}
          },
      yaxis: {
        labels: {
        style: {
          colors: 'black'
        }}},

      legend: {
      show: false
      },
      plotOptions: {
      heatmap: {
        radius: 0,
        enableShades: false,
        shadeintensity: 0,
        useFillColorAsStroke: true,
        colorScale: {
        ranges: [
          {
            from: -0.1,
            to: 0.089,
            color: '#FFFFFF',
          },
          {
            from: 0.09,
            to: 4.99,
            color: '#F8696B',
          },
          {
            from: 5,
            to: 10,
            color: '#F8766D',
          },
          {
            from: 10,
            to: 15,
            color: '#F98370',
          },
          {
            from: 15,
            to: 20,
            color: '#FA9072',
          },
          {
            from: 20,
            to: 25,
            color: '#FA9D75',
          },
          {
            from: 25,
            to: 30,
            color: '#FBAA77',
          },
          {
            from: 30,
            to: 35,
            color: '#FCB77A',
          },
          {
            from: 35,
            to: 40,
            color: '#FCC47C',
          },
          {
            from: 40,
            to: 45,
            color: '#FDD17F',
          },
          {
            from: 45,
            to: 50,
            color: '#FEDE81',
          },
          {
            from: 50,
            to: 55,
            color: '#FFEB84',
          },
          {
            from: 55,
            to: 60,
            color: '#F0E784',
          },
          {
            from: 60,
            to: 65,
            color: '#E0E383',
          },
          {
            from: 65,
            to: 70,
            color: '#D1DE82',
          },
          {
            from: 70,
            to: 75,
            color: '#C1DA81',
          },
          {
            from: 75,
            to: 80,
            color: '#B1D580',
          },
          {
            from: 80,
            to: 85,
            color: '#A2D07F',
          },
          {
            from: 85,
            to: 90,
            color: '#92CC7E',
          },
          {
            from: 90,
            to: 95,
            color: '#83C77D',
          },
          {
            from: 95,
            to: 100,
            color: '#63BE7B',
          }]}
        }}
        };
    var chart_hot = new ApexCharts(document.querySelector("#chart_hotUS"), options5);
    chart_hot.render();



    })
    .catch(error => {
    // Manejar errores aquí
    console.error(error);
    });


 //Velocimetro de Riesgos USA
      //RELLENA LOS SIGUEINTES DATOS
      zonaAConsultar = "USA";       // Escribe "EUR" o "USA"

      //API Call
      fetch("https://rest.gvcgaesco.es/ser-gvc-institute/chart/velocimetro/"+zonaAConsultar)
      .then(response => response.json())
      .then(DBdata => {
      console.log(DBdata);
        var ctx2 = document.getElementById('myChartUSA').getContext('2d');
        const r1 = 4.15;
        const r2 = 3.5;
        const r3 = 2.85;
        const r4 = 2.25;
        const r5 = 1.60;
        const r6 = 1;


        const val = 3;

        const colores =
        [
          'rgb(210, 43, 43, 0.8)',
          'rgb(227, 83, 53, 0.5)',
          'rgb(175, 225, 175)',
          'rgb(80, 200, 120)'
        ];

        const cutout = '17%';
        const weight = 2;
        const data5 = {
        datasets: [{
          type: 'scatter',
          label: 'VIX',
          data: [
          {x: r1*Math.cos(DBdata.series[3].x_Vacio* (Math.PI / 180)), y: r1*Math.sin(DBdata.series[3].x_Vacio* (Math.PI / 180))+val},
          {x: r1*Math.cos(DBdata.series[3].x_Negro* (Math.PI / 180)), y: r1*Math.sin(DBdata.series[3].x_Negro* (Math.PI / 180))+val}
          ],
          pointRadius: 5,
          pointBackgroundColor: ["rgb(0,0,0,1)", "rgb(0,0,0,0)"],
          pointBorderColor: ["rgb(0,0,0,1)", "rgb(0,0,0,1)"]
        }, {
          type: 'scatter',
          label: 'MOVE', /*Fixed Income Volatility*/
          data: [
          {x: r2*Math.cos(DBdata.series[0].x_Vacio* (Math.PI / 180)), y: r2*Math.sin(DBdata.series[0].x_Vacio* (Math.PI / 180))+val},
          {x: r2*Math.cos(DBdata.series[0].x_Negro* (Math.PI / 180)), y: r2*Math.sin(DBdata.series[0].x_Negro* (Math.PI / 180))+val}
          ],
          pointRadius: 5,
          pointBackgroundColor: ["rgb(0,0,0,1)", "rgb(0,0,0,0)"],
          pointBorderColor: ["rgb(0,0,0,1)", "rgb(0,0,0,1)"]
        }, {
          type: 'scatter',
          label: 'Eurodolar', /*Vol EUR*/
          data: [
          {x: r3*Math.cos(DBdata.series[4].x_Vacio* (Math.PI / 180)), y: r3*Math.sin(DBdata.series[4].x_Vacio* (Math.PI / 180))+val},
          {x: r3*Math.cos(DBdata.series[4].x_Negro* (Math.PI / 180)), y: r3*Math.sin(DBdata.series[4].x_Negro* (Math.PI / 180))+val}
          ],
          pointRadius: 5,
          pointBackgroundColor: ["rgb(0,0,0,1)", "rgb(0,0,0,0)"],
          pointBorderColor: ["rgb(0,0,0,1)", "rgb(0,0,0,1)"]
        }, {
          type: 'scatter',
          label: 'Spread 2A-10A', /*spread eu 2-10*/
          data: [
          {x: r4*Math.cos(DBdata.series[2].x_Vacio* (Math.PI / 180)), y:  r4*Math.sin(DBdata.series[2].x_Vacio* (Math.PI / 180))+val},
          {x: r4*Math.cos(DBdata.series[2].x_Negro* (Math.PI / 180)), y: r4*Math.sin(DBdata.series[2].x_Negro* (Math.PI / 180))+val}
          ],
          pointRadius: 5,
          pointBackgroundColor: ["rgb(0,0,0,1)", "rgb(0,0,0,0)"],
          pointBorderColor: ["rgb(0,0,0,1)", "rgb(0,0,0,1)"]
        }, {
          type: 'scatter',
          label: 'Risk Premium', /*Risk Premium*/
          data: [
          {x: r5*Math.cos(DBdata.series[1].x_Vacio* (Math.PI / 180)), y: r5*Math.sin(DBdata.series[1].x_Vacio* (Math.PI / 180))+val},
          {x: r5*Math.cos(DBdata.series[1].x_Negro* (Math.PI / 180)), y: r5*Math.sin(DBdata.series[1].x_Negro* (Math.PI / 180))+val}
          ],
          pointRadius: 5,
          pointBackgroundColor: ["rgb(0,0,0,1)", "rgb(0,0,0,0)"],
          pointBorderColor: ["rgb(0,0,0,1)", "rgb(0,0,0,1)"]
        }, {
          type: 'scatter',
          label: 'Brent Volatility', /*Volatilidad Brent*/
          data: [
          {x: r6*Math.cos(DBdata.series[5].x_Vacio* (Math.PI / 180)), y: r6*Math.sin(DBdata.series[5].x_Vacio* (Math.PI / 180))+val},
          {x: r6*Math.cos(DBdata.series[5].x_Negro* (Math.PI / 180)), y: r6*Math.sin(DBdata.series[5].x_Negro* (Math.PI / 180))+val}
          ],
          pointRadius: 5,
          pointBackgroundColor: ["rgb(0,0,0,1)", "rgb(0,0,0,0)"],
          pointBorderColor: ["rgb(0,0,0,1)", "rgb(0,0,0,1)"]
        },
        {
          type: 'doughnut',
          label: [
            'Regiones'
          ],
          data: [5, 5, 5, 5],
          weight: weight,
          backgroundColor: colores,
          hoverOffset: 0,
          circumference: 180,
          rotation: -90,
          cutout: cutout,
          xAxisID: 'doughnut-x-axis',
          yAxisID: 'doughnut-y-axis',
          options: {
          plugins: {

          }
          }
        }, {
          type: 'doughnut',
          label: [
            'Regiones2'
            ],
          data: [5, 5, 5, 5],
          weight: weight,
          backgroundColor: colores,
          hoverOffset: 0,
          circumference: 180,
          rotation: -90,
          cutout: cutout,
          xAxisID: 'doughnut-x-axis',
          yAxisID: 'doughnut-y-axis'
          }, {
            type: 'doughnut',
            label: [
              'Regiones3'
            ],
            data: [5, 5, 5, 5],
            weight: weight,
            backgroundColor: colores,
            hoverOffset: 0,
            circumference: 180,
            rotation: -90,
            cutout: cutout,
            xAxisID: 'doughnut-x-axis',
            yAxisID: 'doughnut-y-axis'
          }, {
            type: 'doughnut',
            label: [
              'Regiones4'
            ],
            data: [5, 5, 5, 5],
            weight: weight,
            backgroundColor: colores,
            hoverOffset: 0,
            circumference: 180,
            rotation: -90,
            cutout: cutout,
            xAxisID: 'doughnut-x-axis',
            yAxisID: 'doughnut-y-axis'
          }, {
            type: 'doughnut',
            label: [
              'Regiones5'
            ],
            data: [5, 5, 5, 5],
            weight: weight,
            backgroundColor: colores,
            hoverOffset: 0,
            circumference: 180,
            rotation: -90,
            cutout: cutout,
            xAxisID: 'doughnut-x-axis',
            yAxisID: 'doughnut-y-axis'
          }
        ]};

          // Configuración del gráfico Scatter
           var config5 = {
           type: 'scatter',
           data: data5,
           options: {
             aspectRatio: 1,
             plugins: {
               legend: {
                 display: false
               },
               tooltip: {
                 callbacks: {
                 label: ((tooltipItem, data) => {
                   if(tooltipItem.datasetIndex === 0) {
                   return 'VIX'
                   }
                   if(tooltipItem.datasetIndex === 1) {
                   return 'MOVE'
                   }
                   if(tooltipItem.datasetIndex === 2) {
                   return 'Eurodolar'
                   }
                   if(tooltipItem.datasetIndex === 3) {
                   return 'Spread 2A-10A'
                   }
                   if(tooltipItem.datasetIndex === 4) {
                   return 'Risk Premium'
                   }
                   if(tooltipItem.datasetIndex === 5) {
                   return 'West Texas Volatility'
                   }
                   if(tooltipItem.datasetIndex > 5) {
                   return ''
                   }
                 })
                 }
               }
               },
             elements: {
               arc: {
                 borderColor: 'black',
                 borderWidth: 1
               }
               },
             scales: {
             x: {
               min: -6,
               max: 6,
               ticks: {
               stepSize: 1
               },
               display: false
             },
             y: {
               min: 0,
               max: 12,
               ticks: {
               stepSize: 1
               },
               display: false
             }
             }
           }
           };


           // Crear el gráfico utilizando el objeto de configuración
           var myChartUSA = new Chart(ctx2, config5);

      })
      .catch(error => {
      // Manejar errores aquí
      console.error(error);
      });


//Momentum de mercado USA
    //RELLENA LOS SIGUEINTES DATOS
    zonaAConsultar = "USA"; // Escribe "EUR" o "USA"
    //API Call
    fetch("https://rest.gvcgaesco.es/ser-gvc-institute/chart/momentum/"+zonaAConsultar)
    .then(response => response.json())
    .then(DBdata => {
    console.log(DBdata);
    // setup
    const data9 = {
      datasets: [
      {
        label: "Momentum",
        data: [
        {x: DBdata.series[1].inicio, y: 6.5},
        {x: DBdata.series[1].fin, y: 6.5}
        ],
        showLine: true,
        pointRadius: 5,
        pointBackgroundColor: ["#ff8000", "rgb(0,0,0,0)"],
        pointBorderColor: ["#ff8000", "rgb(0,0,0,0)"],
        borderColor: "#ff8000",
        borderDash: [5, 5]
      }, {
        label: "EMA(ATR)",
        data: [
        {x: DBdata.series[0].inicio, y: 2.5},
        {x: DBdata.series[0].fin, y: 2.5}
        ],
        showLine: true,
        pointRadius: 5,
        pointBackgroundColor: ["#ff8000", "rgb(0,0,0,0)"],
        pointBorderColor: ["#ff8000", "rgb(0,0,0,0)"],
        borderColor: "#ff8000",
        borderDash: [5, 5]
      }, {
        label: "RSI",
        data: [
        {x: DBdata.series[5].inicio, y: 3.5},
        {x: DBdata.series[5].fin, y: 3.5}
        ],
        showLine: true,
        pointRadius: 5,
        pointBackgroundColor: ["#ff8000", "rgb(0,0,0,0)"],
        pointBorderColor: ["#ff8000", "rgb(0,0,0,0)"],
        borderColor: "#ff8000",
        borderDash: [5, 5]
      }, {
        label: "MA(200)",
        data: [
        {x: DBdata.series[6].inicio, y: 4.5},
        {x: DBdata.series[6].fin, y: 4.5}
        ],
        showLine: true,
        pointRadius: 5,
        pointBackgroundColor: ["#ff8000", "rgb(0,0,0,0)"],
        pointBorderColor: ["#ff8000", "rgb(0,0,0,0)"],
        borderColor: "#ff8000",
        borderDash: [5, 5]
      }, {
        label: "MA(20)",
        data: [
        {x: DBdata.series[2].inicio, y: 5.5},
        {x: DBdata.series[2].fin, y: 5.5}
        ],
        showLine: true,
        pointRadius: 5,
        pointBackgroundColor: ["#ff8000", "rgb(0,0,0,0)"],
        pointBorderColor: ["#ff8000", "rgb(0,0,0,0)"],
        borderColor: "#ff8000",
        borderDash: [5, 5]
      }, {
        label: "Put/Call",
        data: [
        {x: DBdata.series[4].inicio, y: 1.5},
        {x: DBdata.series[4].fin, y: 1.5}
        ],
        showLine: true,
        pointRadius: 5,
        pointBackgroundColor: ["#ff8000", "rgb(0,0,0,0)"],
        pointBorderColor: ["#ff8000", "rgb(0,0,0,0)"],
        borderColor: "#ff8000",
        borderDash: [5, 5]
      }, {
        label: "Liquidity",
        data: [
        {x: DBdata.series[3].inicio, y: 0.5},
        {x: DBdata.series[3].fin, y: 0.5}
        ],
        showLine: true,
        pointRadius: 5,
        pointBackgroundColor: ["#ff8000", "rgb(0,0,0,0)"],
        pointBorderColor: ["#ff8000", "rgb(0,0,0,0)"],
        borderColor: "#ff8000",
        borderDash: [5, 5]
      },
      {
      label: "vertical",
        data: [
          {x: 50, y: 0},
          {x: 50, y: 7.5}
        ],
        showLine: true,
        pointRadius: 0,
        borderColor: "white",
        borderDash: [3, 3]
        }]
      };


      // chartAreaBackgroundColor plugin block
      const chartAreaBackgroundColor9 = {
      id: "chartAreaBackgroundColor9",
      beforeDraw(chart2, args2, plugins2) {
        const {ctx, chartArea: {top, bottom, left, right, width,
        height}} = chart2;

        const gradient9 = ctx.createLinearGradient(left, 0, right, 0);
        gradient9.addColorStop(0, '#E89393');
        gradient9.addColorStop(1, '#A5CEA3'); //verde
        ctx.save();
        ctx.fillStyle = gradient9;
        ctx.fillRect(left, top, width, height);
      }
      };
      // chartAreaBorder plugin block
      const chartAreaBorder9 = {
        id: 'chartAreaBorder9',
        afterDraw(chart2, args2, options2) {
        const {ctx, chartArea: {left, top, width, height}} = chart2;
        ctx.save();
        ctx.strokeStyle = options2.borderColor;
        ctx.lineWidth = options2.borderWidth;
        ctx.setLineDash(options2.borderDash || []);
        ctx.lineDashOffset = options2.borderDashOffset;
        ctx.strokeRect(left, top, width, height);
        ctx.restore();
        }
      };

      // config
      const config9 = {
      type: 'scatter',
      data: data9,
      options: {
          responsive: true,
          plugins: {
            legend: {
              display: false
            },
            chartAreaBorder9: {
              borderColor: "black",
              borderWidth: 2
            }
          },
          scales: {
            x: {
              type: "linear",
              position: "bottom",
              min: 0,
              max: 100,
              display: false
            },
            y: {
              type: "linear",
              position: "left",
              min: 0,
              max: 7,
              grid: {
                color: "white",
                lineWidth: 2.5,
                offset: false
              },
              border: {
                dash: [10, 10]
              },
              ticks: {
                stepSize: 1,
                labelOffset: -15,
                color: "black",
                callback: function(value, index, values) {
                  // Agregar las etiquetas personalizadas aquí
                  const labels = ['Liquidity', 'Put/Call', 'MA(20)', 'MA(200)', 'RSI', 'EMA(ATR)', 'Momentum'];
                  return labels[index];
                }
              }
            }
          }
        },
      plugins: [
      chartAreaBackgroundColor9,
      chartAreaBorder9
      ]};

      // render init block
      const momentum = new Chart(
        document.getElementById('momentumUSA'),
        config9
      );
      })
    .catch(error => {
    // Manejar errores aquí
    console.error(error);
    });



//GVC Risk USA
    //RELLENA LOS SIGUEINTES DATOS
    zonaAConsultar = "USA";       // Escribe "EUR" o "USA"
    numeroDeDatosAConsultar_risk = 500;   // Escribe la cantidad de filas que quieres que aparezcan en el grafico (Max 500)

    //API Call
    fetch("https://rest.gvcgaesco.es/ser-gvc-institute/chart/risk/"+zonaAConsultar+"/"+numeroDeDatosAConsultar_risk)
    .then(response => response.json())
    .then(DBdata => {

    // setup
    //Mapeamos los datos
    var fechasdata = [];
    var indicadordata = [];
    var eurostoxdata = [];
    var lineadata = []; //Pintan la línea discontínua del centro del gráfico
    for(var i = 0; i < numeroDeDatosAConsultar_risk;++i){
      fechasdata[i] = DBdata.series[i].ddmm;
      indicadordata[i] = DBdata.series[i].indicador;
      eurostoxdata[i] = DBdata.series[i].eurostoxx50;
      lineadata[i] = 50;
    }

    const data0 = {
      labels: fechasdata,
      datasets: [{
        label: 'Dashline',
        data: lineadata,
        fill: true,
        borderColor: 'rgb(0, 0, 0)',
        tension: 0.2,
        backgroundColor: 'transparent',
        pointRadius:0,
        borderDash: [6,3],
        borderWidth: 2
        },
        {
        label: 'GVCrisk',
        //Mapeamos los datos del indicador de riesgo GVC de la respuesta con los del script
        data: indicadordata,
        fill: true,
        borderColor: 'rgb(136, 49, 49)',
        tension: 0.2,
        backgroundColor: 'transparent',
        pointRadius:0,
        borderWidth: 2
        },
        {
        label: 'SP500',
        //Mapeamos los datos del SP500 de la respuesta con los del script
        data: eurostoxdata,
        yAxisID: 'y2',
        fill: false,
        borderColor: 'rgb(0, 0, 0)',
        tension: 0.2,
        backgroundColor: 'transparent',
        pointRadius:0,
        borderWidth: 2
        }]
      };


    const Textografica0 = {
      id: "Textografica0",
      afterDraw(chart, args, plugins) {
        const { ctx, chartArea: { top, bottom, left, right, width, height } } = chart;

        // Calcular la posición de las etiquetas en función del tamaño del área del gráfico
        const ventaPosX0 = left + (width * 0.865);
        const ventaPosY0 = top + (height * 0.1);
        const compraPosX0 = left + (width * 0.86);
        const compraPosY0 = top + (height * 0.9);

        // Agregar texto
        ctx.fillStyle = 'black';
        ctx.font = 'bold 12px Helvetica';
        ctx.fillText("Low risk", compraPosX0, compraPosY0);

        // Agregar texto
        ctx.fillStyle = 'black';
        ctx.font = 'bold 12px Helvetica';
        ctx.fillText("High risk", ventaPosX0, ventaPosY0);
      }};


    // chartAreaBackgroundColor plugin block
    const chartAreaBackgroundColor0 = {
      id: "chartAreaBackgroundColor0",
      beforeDraw(chart0, args0, plugins0) {
      const {ctx, chartArea: {top, bottom, left, right, width, height}} = chart0;
      const gradient0 = ctx.createLinearGradient(0, top, 0, bottom);
      gradient0.addColorStop(0, '#EE9E9E'); // color rojo en la parte superior
      gradient0.addColorStop(1, '#A5CEA3'); // color verde en la parte inferior
      ctx.save();
      ctx.fillStyle = gradient0;
      ctx.fillRect(left, top, width, height);
      }
    };



    // chartAreaBorder plugin block
    const chartAreaBorder0 = {
      id: 'chartAreaBorder0',
      afterDraw(chart, args, options) {
        const {ctx, chartArea: {left, top, width, height}} = chart;
        ctx.save();
        ctx.strokeStyle = options.borderColor;
        ctx.lineWidth = options.borderWidth;
        ctx.setLineDash(options.borderDash || []);
        ctx.lineDashOffset = options.borderDashOffset;
        ctx.strokeRect(left, top, width, height);
        ctx.restore();
      }};

    // config
    const config0 = {
      type: 'line',
      data: data0,
      options: {
      plugins: {
      legend: {
        display: false
        }},
      scales: {
        y: {
          title: {
            display: true,
            text: 'GVC Risk',
            color: 'rgb(136, 49, 49)',
            font: {
              size: 14,
              weight: 'bold'
              }
                },
          min: 0,
          max: 100,
          grid: {
            color: 'transparent',
            tickColor: 'black'
          },
          ticks: {
            color: 'black',
            display: true
          }},
        y2: { // Segundo eje
          position: 'right', // Coloca el eje a la derecha
          grid: {
            color: 'transparent',
            tickColor: 'black'
          },
          title: {
            display: true,
            text: 'SP500',
            color: 'black',
            font: {
            size: 14,
            weight: 'bold'
              }},
          ticks: {
            color: 'black',
            display: true
          }},
        x: {

          grid: {
            color: 'transparent',
            tickColor: 'black'
          },
          ticks: {
              color:'black',
              display: true
            }}}
          },
        plugins: [
        Textografica0, chartAreaBackgroundColor0, chartAreaBorder0
        ]};

     // render init block
    const GVCriski = new Chart(
      document.getElementById('GVCriskUSA'),
      config0
      );

    })
    .catch(error => {
    // Manejar errores aquí
    console.error(error);
    });


//  INDICADORES ESPAÑA
//  Velocidad del ciclo ESPAÑA
// RELLENA LOS SIGUIENTES DATOS
var zonaAConsultarEsp2 = "EUR";            // Cambiado de ESP2
var numeroDeDatosAConsultar_velEsp2 = 24; // Agrega "Esp2" al final

// API Call
fetch("https://rest.gvcgaesco.es/ser-gvc-institute/chart/ciclo/" + zonaAConsultarEsp2 + "/" + numeroDeDatosAConsultar_velEsp2)
.then(response => response.json())
.then(dataDBEsp2 => { // Agrega "Esp2" al final

    // Mapeamos los datos de las fechas de la rEsp2uesta con los del script
    var fechasdataEsp2 = []; // Cambia el nombre a "fechasdataEsp2"
    var puntosEsp2 = [];     // Cambia el nombre a "puntosEsp2"
    var radiosEsp2 = [];     // Cambia el nombre a "radiosEsp2"
    var coloresEsp2 = [];    // Cambia el nombre a "coloresEsp2"

    for(var index_cicloEsp2 = 0; index_cicloEsp2 < dataDBEsp2.series.length; ++index_cicloEsp2) {
        fechasdataEsp2[index_cicloEsp2] = dataDBEsp2.series[index_cicloEsp2].mmmyy;
        puntosEsp2.push({ x: dataDBEsp2.series[index_cicloEsp2].x, y: dataDBEsp2.series[index_cicloEsp2].y });
        radiosEsp2.push(2); // Asigna el radio a 2 para todos los puntos
        coloresEsp2.push('black'); // Asigna el color a negro para todos los puntos
    }

    // Asigna un radio más grande y un color negro al último punto
    radiosEsp2[radiosEsp2.length - 1] = 5.3;
    coloresEsp2[coloresEsp2.length - 1] = 'black';

    // setup
    const dataEsp2 = { // Cambia el nombre a "dataEsp2"
        labels: fechasdataEsp2,
        datasets: [{
            pointRadius: radiosEsp2, // Cambia el nombre a "radiosEsp2"
            pointBackgroundColor: coloresEsp2, // Cambia el nombre a "coloresEsp2"
            data: puntosEsp2, // Cambia el nombre a "puntosEsp2"
            borderColor: 'black',
            borderWidth: 2,
            pointstyle: 'none',
            pointBackgroundColor: 'white',
            tension: 0.4,
            showLine: true
        }]
    };

// chartAreaBackgroundColor plugin block
const chartAreaBackgroundColorEsp2 = { // Cambia el nombre a "chartAreaBackgroundColorEsp2"
    id: "chartAreaBackgroundColorEsp2",
    beforeDraw: function(chart, args, plugins) {
    const {ctx, chartArea: {top, bottom, left, right, width, height}} = chart;
    const yAxis = chart.scales.y;
    const xAxis = chart.scales.x;

    const yZeroPoint = yAxis.getPixelForValue(0);
    const xZeroPoint = xAxis.getPixelForValue(0);
    const halfWidth = width / 2;

    // Crear el degradado para el rectángulo superior verde
    const gradientTop = ctx.createLinearGradient(right, top, xZeroPoint, yZeroPoint);
    gradientTop.addColorStop(0, '#62BD7E');
    gradientTop.addColorStop(1, '#FEEB84');

    // Aplicar el degradado al rectángulo superior verde
    ctx.save();
    ctx.fillStyle = gradientTop;
    ctx.fillRect(xZeroPoint, top, halfWidth, yZeroPoint - top);
    ctx.restore();

    // Crear el degradado para el rectángulo inferior verde
    const gradientBottom = ctx.createLinearGradient(right, bottom, xZeroPoint, yZeroPoint);
    gradientBottom.addColorStop(0, '#62BD7E');
    gradientBottom.addColorStop(1, '#FEEB84');

    // Aplicar el degradado al rectángulo inferior verde
    ctx.save();
    ctx.fillStyle = gradientBottom;
    ctx.fillRect(xZeroPoint, yZeroPoint, halfWidth, bottom - yZeroPoint);
    ctx.restore();

    // Crear el degradado para el rectángulo superior izquierdo
    const gradientTopLeft = ctx.createLinearGradient(left, top, xZeroPoint, yZeroPoint);
    gradientTopLeft.addColorStop(0, '#F8696B');
    gradientTopLeft.addColorStop(1, '#FEEB84');

    // Aplicar el degradado al rectángulo superior izquierdo
    ctx.save();
    ctx.fillStyle = gradientTopLeft;
    ctx.fillRect(left, top, xZeroPoint - left, yZeroPoint - top);
    ctx.restore();

    // Crear el degradado para el rectángulo inferior izquierdo
    const gradientBottomLeft = ctx.createLinearGradient(left, bottom, xZeroPoint, yZeroPoint);
    gradientBottomLeft.addColorStop(0, '#F8696B');
    gradientBottomLeft.addColorStop(1, '#FEEB84');

    // Aplicar el degradado al rectángulo inferior izquierdo
    ctx.save();
    ctx.fillStyle = gradientBottomLeft;
    ctx.fillRect(left, yZeroPoint, xZeroPoint - left, bottom - yZeroPoint);
    ctx.restore();

    // Calcular la posición de las etiquetas en función del tamaño del área del gráfico
    const decPosX = left + (width * 0.05);
    const decPosY = top + (height * 0.15);
    const expPosX = right - (width * 0.20);
    const expPosY = top + (height * 0.15);
    const conPosX = left + (width * 0.05);
    const conPosY = bottom - (height * 0.10);
    const accPosX = right - (width * 0.22);
    const accPosY = bottom - (height * 0.10);

    // Dibujar el texto 'Deceleration' en la parte superior izquierda
    ctx.save();
    ctx.font = 'bold 12px Roboto';
    ctx.fillStyle = 'black';
    ctx.fillText('DECELERATION', decPosX, decPosY);
    ctx.restore();

    // Dibujar el texto 'Expansion' en la parte superior derecha
    ctx.save();
    ctx.font = 'bold 12px Roboto';
    ctx.fillStyle = 'black';
    ctx.fillText('EXPANSION', expPosX, expPosY);
    ctx.restore();

    // Dibujar el texto 'Contraction' en la parte inferior izquierda
    ctx.save();
    ctx.font = 'bold 12px Roboto';
    ctx.fillStyle = 'black';
    ctx.fillText('CONTRACTION', conPosX, conPosY);
    ctx.restore();

    // Dibujar el texto 'Acceleration' en la parte inferior derecha
    ctx.save();
    ctx.font = 'bold 12px Roboto';
    ctx.fillStyle = 'black';
    ctx.fillText('ACCELERATION', accPosX, accPosY);
    ctx.restore();
  }
};

  // config
  const configEsp2 = { // Cambia el nombre a "configEsp2"
      type: 'scatter',
      data: dataEsp2, // Cambia a "dataEsp2"
      options: {
      responsive: true,
      maintainAspectRatio: true,
      plugins: {
        legend: {
          display: false
        },

      },
      scales: {
        x: {
          position: {
            y: 0
          },
          max: 0.5,
          min: -0.5,
          ticks: {
            stepSize: 10,
            display: false
          },
          grid: {
            color: 'transparent',
            borderDash: [2, 2],
          },
          border: {
            color: 'black'
          }
        },
        y: {
          position: {
            x: 0
          },
          max: 0.15,
          min: -0.2,
          ticks: {
            stepSize: 10,
            display: false
          },
          grid: {
            color: 'transparent',
            borderDash: [2, 2],
          },
          border: {
            color: 'black'
          }
        }
      }
    },
    plugins: [chartAreaBackgroundColorEsp2] // Cambia a "chartAreaBackgroundColorEsp2"
    };

    // render init block
    const expansionEsp2 = new Chart( // Cambia el nombre a "expansionEsp2"
        document.getElementById('ExpansionEsp2'), // Cambia el ID del elemento
        configEsp2 // Cambia a "configEsp2"
    );
})
.catch(error => {
    // Manejar errores aquí
    console.error(error);
});




// Radar ESPAÑA
  	// RELLENA LOS SIGUIENTES DATOS
  var zonaAConsultarEsp = "USA"; // Cambiado de "USA" a "ESP"

    	// API Call
    fetch("https://rest.gvcgaesco.es/ser-gvc-institute/chart/triangulo/" + zonaAConsultarEsp)
    .then(response => response.json())
    .then(dataDBEsp => { // Agrega "Esp" al final
        console.log(dataDBEsp);
        let ctxEsp = document.getElementById('radarChartEsp').getContext('2d'); // Cambia el nombre a "ctxEsp" y el ID a 'radarChartEsp'

        const dataEsp = { // Cambia el nombre a "dataEsp"
            labels: ['GVC Risk', 'Valoracion Mercado', 'GVC Cycle'],
            datasets: [
                {
                    label: 'Valor',
                    backgroundColor: 'rgba(255, 99, 132, 0)',
                    borderColor: 'rgba(0, 0, 0, 1)',
                    pointBackgroundColor: 'rgba(0, 0, 0, 1)',
                    pointBorderColor: '#fff',
                    borderDash: [10,10],
                    pointRadius: 6,
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: 'rgba(0, 0, 0, 1)',
                    data: [dataDBEsp.series[0].riesgo, dataDBEsp.series[0].valor, dataDBEsp.series[0].ciclo] // Cambia "dataDB" a "dataDBEsp"
                },
    			{
    			  label: 'Triangulo Pequeño',
    			  backgroundColor: '#EDF4F7',
    			  borderColor: 'rgba(255, 0, 0, 1)',
    			  pointRadius: 0,
    			  borderWidth: 5,
    			  data: [1, 1, 1],
    			  borderJoinStyle: 'round'
    			},
    			{
    			  label: 'Triangulo Mediano',
    			  backgroundColor: '#EDF4F7',
    			  borderColor: 'rgba(255, 192, 0, 1)',
    			  pointRadius: 0,
    			  data: [3, 3, 3]
    			},
    			{
    			  label: 'Triangulo Grande',
    			  backgroundColor: '#EDF4F7',
    			  borderColor: 'rgba(146, 208, 80, 1)',
    			  borderWidth: 5,
    			  pointRadius: 0,
    			  data: [5, 5, 5]
    			}
    		  ]
    		};

        let myRadarChartEsp = new Chart(ctxEsp, { // Cambia el nombre a "myRadarChartEsp"
            type: 'radar',
            data: dataEsp, // Cambia a "dataEsp"
            options: {
            aspectRatio: 2,
            layout: {
              padding: {
                top: 20,  // Ajusta estos valores según tus necesidades
                bottom: 20
              }
            },
            plugins: {
              legend: {
              display: false
              }
            },
            scales: {
              r: {
              min: 0,
              max: 5,
              angleLines:{
                display: false
              },
              ticks: {
                stepSize: 1,
                display: false
              },
              pointLabels: {
                font: {
                size: 15,
                weight: "bold"
                },
                color: "black"
              }
              }
            }
            }
          });


    		})
        .catch(error => {
        // Manejar errores aquí
        console.error(error);
    });


// Mapa de Calor por Sectores ESPAÑA
// RELLENA LOS SIGUIENTES DATOS
var zonaAConsultarEsp = "EUR";            // Cambiado de "USA" a "ESP"
var numeroDeDatosAConsultarEsp = 22;      // Agrega "Esp" al final

  // API Call
  fetch("https://rest.gvcgaesco.es/ser-gvc-institute/chart/calor/" + zonaAConsultarEsp + "/" + numeroDeDatosAConsultarEsp)
  .then(response => response.json())
  .then(dataDBEsp => { // Agrega "Esp" al final
    console.log(dataDBEsp);
      var confianzaEconomicaEsp = [];
      var confianzaInversoraEsp = [];
      var climaEmpresarialEsp = [];
      var mercadoLaboralEsp = [];
      var confianzaConsumidorEsp = [];
      var inflacionEsp = [];
      var actualidadManufactureraEsp = [];
      var sectorServiciosEsp = [];
      var eurostoxx50Esp = [];
      var construccionEsp = [];
      var gvcCyleEsp = [];
      var fechaEsp = [];
      for(var i = 0; i < numeroDeDatosAConsultarEsp;++i){
        confianzaEconomicaEsp[i] = dataDBEsp.series[i].confianza_Economica;
        confianzaInversoraEsp[i] = dataDBEsp.series[i].confianza_Inversora;
        climaEmpresarialEsp[i] = dataDBEsp.series[i].clima_Empresarial;
        mercadoLaboralEsp[i] = dataDBEsp.series[i].mercado_Laboral;
        confianzaConsumidorEsp[i] = dataDBEsp.series[i].confianza_Consumidor;
        inflacionEsp[i] = dataDBEsp.series[i].inflacion;
        actualidadManufactureraEsp[i] = dataDBEsp.series[i].actualidad_Manufacturera;
        sectorServiciosEsp[i] = dataDBEsp.series[i].sector_Servicios;
        eurostoxx50Esp[i] = dataDBEsp.series[i].eurostoxx50;
        construccionEsp[i] = dataDBEsp.series[i].construccion;
        gvcCyleEsp[i] = dataDBEsp.series[i].gvc_Cyle;
        fechaEsp[i] = dataDBEsp.series[i].mmmyy;
      }

      var optionsEsp = {
        maintainAspectRatio: true,
        series: [
        {
        name: 'GVC Cycle', /*GVC cycle*/
        data: gvcCyleEsp
        },
        {
        name: 'LEI', /*Mercado Laboral*/
        data: mercadoLaboralEsp
        },
        {
        name: 'Eurostoxx50', /*Construccion*/
        data: construccionEsp
        },
        {
        name: 'Inflation', /*Eurostoxx 50*/
        data: eurostoxx50Esp
        },
        {
        name: 'Actividad Manufacturera', /*Sector de Servicios*/
        data: sectorServiciosEsp
        },
        {
        name: 'Sector Servicios', /*Actividad Manufacturera*/
        data: actualidadManufactureraEsp
        },
        {
        name: 'Construcción', /*Inflación*/
        data: inflacionEsp
        },
        {
        name: 'Sentimiento Económico (ESI)', /*Confianza Consumidor*/
        data: confianzaConsumidorEsp
        },
        {
        name: 'Confianza Inversor (ZEW)', /*Clima Empresarial*/
        data: climaEmpresarialEsp
        },
        {
        name: 'Ventas Minoristas', /*Confianza Inversora*/
        data: confianzaInversoraEsp
        },
        {
        name: 'Confianza Consumidor', /*Confianza Económica*/
        data: confianzaEconomicaEsp
        }
        ],
        chart: {
        height: "350px",
        type: 'heatmap',
        },
        dataLabels: {
        enabled: false
        },
        xaxis: {
          type: 'category',
          categories: fechaEsp,
          labels: {
            style: {
              colors: 'black'
              }}
            },
        yaxis: {
          labels: {
          style: {
            colors: 'black'
          }}},

        legend: {
        show: false
        },
        plotOptions: {
        heatmap: {
          radius: 0,
          enableShades: false,
          shadeintensity: 0.1,
          useFillColorAsStroke: true,
          colorScale: {
          ranges: [
            {
              from: -0.1,
              to: 0.089,
              color: '#FFFFFF',
            },
            {
              from: 0.09,
              to: 4.99,
              color: '#F8696B',
            },
            {
              from: 5,
              to: 10,
              color: '#F8766D',
            },
            {
              from: 10,
              to: 15,
              color: '#F98370',
            },
            {
              from: 15,
              to: 20,
              color: '#FA9072',
            },
            {
              from: 20,
              to: 25,
              color: '#FA9D75',
            },
            {
              from: 25,
              to: 30,
              color: '#FBAA77',
            },
            {
              from: 30,
              to: 35,
              color: '#FCB77A',
            },
            {
              from: 35,
              to: 40,
              color: '#FCC47C',
            },
            {
              from: 40,
              to: 45,
              color: '#FDD17F',
            },
            {
              from: 45,
              to: 50,
              color: '#FEDE81',
            },
            {
              from: 50,
              to: 55,
              color: '#FFEB84',
            },
            {
              from: 55,
              to: 60,
              color: '#F0E784',
            },
            {
              from: 60,
              to: 65,
              color: '#E0E383',
            },
            {
              from: 65,
              to: 70,
              color: '#D1DE82',
            },
            {
              from: 70,
              to: 75,
              color: '#C1DA81',
            },
            {
              from: 75,
              to: 80,
              color: '#B1D580',
            },
            {
              from: 80,
              to: 85,
              color: '#A2D07F',
            },
            {
              from: 85,
              to: 90,
              color: '#92CC7E',
            },
            {
              from: 90,
              to: 95,
              color: '#83C77D',
            },
            {
              from: 95,
              to: 100,
              color: '#63BE7B',
            }]
              }
          }}
          };
          var chartEsp = new ApexCharts(document.querySelector("#chartEsp"), optionsEsp); // Cambia el selector a "#chartEsp" y el nombre a "chartEsp"
          chartEsp.render();
          })
          .catch(error => {
      // Manejar errores aquí
      console.error(error);
  });


// Mapa de Calor por Sectores España
// RELLENA LOS SIGUIENTES DATOS
var zonaAConsultarEsp2 = "EUR";            // Cambiado de "USA" a "Esp2"
var numeroDeDatosAConsultarEsp2 = 22;      // Agrega "Esp2" al final

  // API Call
  fetch("https://rest.gvcgaesco.es/ser-gvc-institute/chart/calor/" + zonaAConsultarEsp2 + "/" + numeroDeDatosAConsultarEsp2)
  .then(response => response.json())
  .then(dataDBEsp2 => { // Agrega "Esp2" al final
    console.log(dataDBEsp2);
      var confianzaEconomicaEsp2 = [];
      var confianzaInversoraEsp2 = [];
      var climaEmpresarialEsp2 = [];
      var mercadoLaboralEsp2 = [];
      var confianzaConsumidorEsp2 = [];
      var inflacionEsp2 = [];
      var actualidadManufactureraEsp2 = [];
      var sectorServiciosEsp2 = [];
      var eurostoxx50Esp2 = [];
      var construccionEsp2 = [];
      var gvcCyleEsp2 = [];
      var fechaEsp2 = [];
      for(var i = 0; i < numeroDeDatosAConsultarEsp2;++i){
        confianzaEconomicaEsp2[i] = dataDBEsp2.series[i].confianza_Economica;
        confianzaInversoraEsp2[i] = dataDBEsp2.series[i].confianza_Inversora;
        climaEmpresarialEsp2[i] = dataDBEsp2.series[i].clima_Empresarial;
        mercadoLaboralEsp2[i] = dataDBEsp2.series[i].mercado_Laboral;
        confianzaConsumidorEsp2[i] = dataDBEsp2.series[i].confianza_Consumidor;
        inflacionEsp2[i] = dataDBEsp2.series[i].inflacion;
        actualidadManufactureraEsp2[i] = dataDBEsp2.series[i].actualidad_Manufacturera;
        sectorServiciosEsp2[i] = dataDBEsp2.series[i].sector_Servicios;
        eurostoxx50Esp2[i] = dataDBEsp2.series[i].eurostoxx50;
        construccionEsp2[i] = dataDBEsp2.series[i].construccion;
        gvcCyleEsp2[i] = dataDBEsp2.series[i].gvc_Cyle;
        fechaEsp2[i] = dataDBEsp2.series[i].mmmyy;
      }

      var optionsEsp2 = {
        maintainAspectRatio: true,
        series: [
        {
        name: 'GVC Cycle', /*GVC cycle*/
        data: gvcCyleEsp2
        },
        {
        name: 'SP500', /*Construccion*/
        data: construccionEsp2
        },
        {
        name: 'Inflación', /*Eurostoxx 50*/
        data: eurostoxx50Esp2
        },
        {
        name: 'Mercado Laboral', /*Sector de Servicios*/
        data: sectorServiciosEsp2
        },
        {
        name: 'Actividad Manufacturera', /*Actividad Manufacturera*/
        data: actualidadManufactureraEsp2
        },
        {
        name: 'Sector Servicios', /*Inflación*/
        data: inflacionEsp2
        },
        {
        name: 'Producción Industrial', /*Confianza Consumidor*/
        data: confianzaConsumidorEsp2
        },
        {
        name: 'Sentimiento Económico', /*Mercado Laboral*/
        data: mercadoLaboralEsp2
        },
        {
        name: 'Confianza Económica', /*Clima Empresarial*/
        data: climaEmpresarialEsp2
        },
        {
        name: 'Ventas Minoristas', /*Confianza Inversora*/
        data: confianzaInversoraEsp2
        },
        {
        name: 'Confianza Consumidor', /*Confianza Económica*/
        data: confianzaEconomicaEsp2
        }
        ],
        chart: {
        height: "350px",
        type: 'heatmap',
        },
        dataLabels: {
        enabled: false
        },
        xaxis: {
          type: 'category',
          categories: fechaEsp2,
          labels: {
            style: {
              colors: 'black'
              }}
            },
        yaxis: {
          labels: {
          style: {
            colors: 'black'
          }}},

        legend: {
        show: false
        },
        plotOptions: {
        heatmap: {
          radius: 0,
          enableShades: false,
          shadeintensity: 0.1,
          useFillColorAsStroke: true,
          colorScale: {
          ranges: [
            {
              from: -0.1,
              to: 0.089,
              color: '#FFFFFF',
            },
            {
              from: 0.09,
              to: 4.99,
              color: '#F8696B',
            },
            {
              from: 5,
              to: 10,
              color: '#F8766D',
            },
            {
              from: 10,
              to: 15,
              color: '#F98370',
            },
            {
              from: 15,
              to: 20,
              color: '#FA9072',
            },
            {
              from: 20,
              to: 25,
              color: '#FA9D75',
            },
            {
              from: 25,
              to: 30,
              color: '#FBAA77',
            },
            {
              from: 30,
              to: 35,
              color: '#FCB77A',
            },
            {
              from: 35,
              to: 40,
              color: '#FCC47C',
            },
            {
              from: 40,
              to: 45,
              color: '#FDD17F',
            },
            {
              from: 45,
              to: 50,
              color: '#FEDE81',
            },
            {
              from: 50,
              to: 55,
              color: '#FFEB84',
            },
            {
              from: 55,
              to: 60,
              color: '#F0E784',
            },
            {
              from: 60,
              to: 65,
              color: '#E0E383',
            },
            {
              from: 65,
              to: 70,
              color: '#D1DE82',
            },
            {
              from: 70,
              to: 75,
              color: '#C1DA81',
            },
            {
              from: 75,
              to: 80,
              color: '#B1D580',
            },
            {
              from: 80,
              to: 85,
              color: '#A2D07F',
            },
            {
              from: 85,
              to: 90,
              color: '#92CC7E',
            },
            {
              from: 90,
              to: 95,
              color: '#83C77D',
            },
            {
              from: 95,
              to: 100,
              color: '#63BE7B',
            }]
              }
          }}
          };
          var chartEsp2 = new ApexCharts(document.querySelector("#chartEsp2"), optionsEsp2); // Cambia el selector a "#chartEsp2" y el nombre a "chartEsp2"
          chartEsp2.render();
          })
          .catch(error => {
      // Manejar errores aquí
      console.error(error);
  });





//  INDICADORES CATALUÑA

//  Velocidad del ciclo CATALUÑA
// RELLENA LOS SIGUIENTES DATOS
var zonaAConsultarCat = "CAT";            // Cambiado de CAT
var numeroDeDatosAConsultar_velCat = 24; // Agrega "Cat" al final

// API Call
fetch("https://rest.gvcgaesco.es/ser-gvc-institute/chart/ciclo/" + zonaAConsultarCat + "/" + numeroDeDatosAConsultar_velCat)
.then(response => response.json())
.then(dataDBCat => { // Agrega "Cat" al final

    // Mapeamos los datos de las fechas de la rCatuesta con los del script
    var fechasdataCat = []; // Cambia el nombre a "fechasdataCat"
    var puntosCat = [];     // Cambia el nombre a "puntosCat"
    var radiosCat = [];     // Cambia el nombre a "radiosCat"
    var coloresCat = [];    // Cambia el nombre a "coloresCat"

    for(var index_cicloCat = 0; index_cicloCat < dataDBCat.series.length; ++index_cicloCat) {
        fechasdataCat[index_cicloCat] = dataDBCat.series[index_cicloCat].mmmyy;
        puntosCat.push({ x: dataDBCat.series[index_cicloCat].x, y: dataDBCat.series[index_cicloCat].y });
        radiosCat.push(2); // Asigna el radio a 2 para todos los puntos
        coloresCat.push('black'); // Asigna el color a negro para todos los puntos
    }

    // Asigna un radio más grande y un color negro al último punto
    radiosCat[radiosCat.length - 1] = 5.3;
    coloresCat[coloresCat.length - 1] = 'black';

    // setup
    const dataCat = { // Cambia el nombre a "dataCat"
        labels: fechasdataCat,
        datasets: [{
            pointRadius: radiosCat, // Cambia el nombre a "radiosCat"
            pointBackgroundColor: coloresCat, // Cambia el nombre a "coloresCat"
            data: puntosCat, // Cambia el nombre a "puntosCat"
            borderColor: 'black',
            borderWidth: 2,
            pointstyle: 'none',
            pointBackgroundColor: 'white',
            tension: 0.4,
            showLine: true
        }]
    };

// chartAreaBackgroundColor plugin block
const chartAreaBackgroundColorCat = { // Cambia el nombre a "chartAreaBackgroundColorCat"
    id: "chartAreaBackgroundColorCat",
    beforeDraw: function(chart, args, plugins) {
    const {ctx, chartArea: {top, bottom, left, right, width, height}} = chart;
    const yAxis = chart.scales.y;
    const xAxis = chart.scales.x;

    const yZeroPoint = yAxis.getPixelForValue(0);
    const xZeroPoint = xAxis.getPixelForValue(0);
    const halfWidth = width / 2;

    // Crear el degradado para el rectángulo superior verde
    const gradientTop = ctx.createLinearGradient(right, top, xZeroPoint, yZeroPoint);
    gradientTop.addColorStop(0, '#62BD7E');
    gradientTop.addColorStop(1, '#FEEB84');

    // Aplicar el degradado al rectángulo superior verde
    ctx.save();
    ctx.fillStyle = gradientTop;
    ctx.fillRect(xZeroPoint, top, halfWidth, yZeroPoint - top);
    ctx.restore();

    // Crear el degradado para el rectángulo inferior verde
    const gradientBottom = ctx.createLinearGradient(right, bottom, xZeroPoint, yZeroPoint);
    gradientBottom.addColorStop(0, '#62BD7E');
    gradientBottom.addColorStop(1, '#FEEB84');

    // Aplicar el degradado al rectángulo inferior verde
    ctx.save();
    ctx.fillStyle = gradientBottom;
    ctx.fillRect(xZeroPoint, yZeroPoint, halfWidth, bottom - yZeroPoint);
    ctx.restore();

    // Crear el degradado para el rectángulo superior izquierdo
    const gradientTopLeft = ctx.createLinearGradient(left, top, xZeroPoint, yZeroPoint);
    gradientTopLeft.addColorStop(0, '#F8696B');
    gradientTopLeft.addColorStop(1, '#FEEB84');

    // Aplicar el degradado al rectángulo superior izquierdo
    ctx.save();
    ctx.fillStyle = gradientTopLeft;
    ctx.fillRect(left, top, xZeroPoint - left, yZeroPoint - top);
    ctx.restore();

    // Crear el degradado para el rectángulo inferior izquierdo
    const gradientBottomLeft = ctx.createLinearGradient(left, bottom, xZeroPoint, yZeroPoint);
    gradientBottomLeft.addColorStop(0, '#F8696B');
    gradientBottomLeft.addColorStop(1, '#FEEB84');

    // Aplicar el degradado al rectángulo inferior izquierdo
    ctx.save();
    ctx.fillStyle = gradientBottomLeft;
    ctx.fillRect(left, yZeroPoint, xZeroPoint - left, bottom - yZeroPoint);
    ctx.restore();

    // Calcular la posición de las etiquetas en función del tamaño del área del gráfico
    const decPosX = left + (width * 0.05);
    const decPosY = top + (height * 0.15);
    const expPosX = right - (width * 0.20);
    const expPosY = top + (height * 0.15);
    const conPosX = left + (width * 0.05);
    const conPosY = bottom - (height * 0.10);
    const accPosX = right - (width * 0.22);
    const accPosY = bottom - (height * 0.10);

    // Dibujar el texto 'Deceleration' en la parte superior izquierda
    ctx.save();
    ctx.font = 'bold 12px Roboto';
    ctx.fillStyle = 'black';
    ctx.fillText('DECELERATION', decPosX, decPosY);
    ctx.restore();

    // Dibujar el texto 'Expansion' en la parte superior derecha
    ctx.save();
    ctx.font = 'bold 12px Roboto';
    ctx.fillStyle = 'black';
    ctx.fillText('EXPANSION', expPosX, expPosY);
    ctx.restore();

    // Dibujar el texto 'Contraction' en la parte inferior izquierda
    ctx.save();
    ctx.font = 'bold 12px Roboto';
    ctx.fillStyle = 'black';
    ctx.fillText('CONTRACTION', conPosX, conPosY);
    ctx.restore();

    // Dibujar el texto 'Acceleration' en la parte inferior derecha
    ctx.save();
    ctx.font = 'bold 12px Roboto';
    ctx.fillStyle = 'black';
    ctx.fillText('ACCELERATION', accPosX, accPosY);
    ctx.restore();
  }
};

  // config
  const configCat = { // Cambia el nombre a "configCat"
      type: 'scatter',
      data: dataCat, // Cambia a "dataCat"
      options: {
      responsive: true,
      maintainAspectRatio: true,
      plugins: {
        legend: {
          display: false
        },

      },
      scales: {
        x: {
          position: {
            y: 0
          },
          max: 0.5,
          min: -0.5,
          ticks: {
            stepSize: 10,
            display: false
          },
          grid: {
            color: 'transparent',
            borderDash: [2, 2],
          },
          border: {
            color: 'black'
          }
        },
        y: {
          position: {
            x: 0
          },
          max: 0.15,
          min: -0.25,
          ticks: {
            stepSize: 10,
            display: false
          },
          grid: {
            color: 'transparent',
            borderDash: [2, 2],
          },
          border: {
            color: 'black'
          }
        }
      }
    },
    plugins: [chartAreaBackgroundColorCat] // Cambia a "chartAreaBackgroundColorCat"
    };

    // render init block
    const expansionCat = new Chart( // Cambia el nombre a "expansionCat"
        document.getElementById('ExpansionCat'), // Cambia el ID del elemento
        configCat // Cambia a "configCat"
    );
})
.catch(error => {
    // Manejar errores aquí
    console.error(error);
});



// Radar CATALUÑA
  	// RELLENA LOS SIGUIENTES DATOS
    var zonaAConsultarCat = "CAT"; // Cambiado de "USA" a "Cat"

// API Call
fetch("https://rest.gvcgaesco.es/ser-gvc-institute/chart/triangulo/" + zonaAConsultarCat)
.then(response => response.json())
.then(dataDBCat => { // Agrega "Cat" al final
  console.log(dataDBCat);
  let ctxCat = document.getElementById('radarChartCat').getContext('2d'); // Cambia el nombre a "ctxCat" y el ID a 'radarChartCat'

  const dataCat = { // Cambia el nombre a "dataCat"
      labels: ['Catalunya', 'Madrid', 'Espanya'],
      datasets: [
          {
              label: 'Valor',
              backgroundColor: 'rgba(255, 99, 132, 0)',
              borderColor: 'rgba(0, 0, 0, 1)',
              pointBackgroundColor: 'rgba(0, 0, 0, 1)',
              pointBorderColor: '#fff',
              borderDash: [10,10],
              pointRadius: 6,
              pointHoverBackgroundColor: '#fff',
              pointHoverBorderColor: 'rgba(0, 0, 0, 1)',
              data: [dataDBCat.series[0].riesgo, dataDBCat.series[0].valor, dataDBCat.series[0].ciclo] // Cambia "dataDB" a "dataDBCat"
          },
    {
      label: 'Triangulo Pequeño',
      backgroundColor: '#EDF4F7',
      borderColor: 'rgba(146, 208, 80, 1)',
      pointRadius: 0,
      borderWidth: 5,
      data: [1, 1, 1],
      borderJoinStyle: 'round'
    },
    {
      label: 'Triangulo Mediano',
      backgroundColor: '#EDF4F7',
      borderColor: '#e9c46a',
      pointRadius: 0,
      data: [3, 3, 3]
    },
    {
      label: 'Triangulo Grande',
      backgroundColor: '#EDF4F7',
      borderColor: 'rgba(255, 0, 0, 1)',
      borderWidth: 5,
      pointRadius: 0,
      data: [5, 5, 5]
    }
    ]
  };

  let myRadarChartCat = new Chart(ctxCat, { // Cambia el nombre a "myRadarChartCat"
      type: 'radar',
      data: dataCat, // Cambia a "dataCat"
      options: {
      aspectRatio: 2,
      layout: {
        padding: {
          top: 20,  // Ajusta estos valores según tus necesidades
          bottom: 20
        }
      },
      plugins: {
        legend: {
        display: false
        }
      },
      scales: {
        r: {
        min: 0,
        max: 5,
        angleLines:{
          display: false
        },
        ticks: {
          stepSize: 1,
          display: false
        },
        pointLabels: {
          font: {
          size: 15,
          weight: "bold"
          },
          color: "black"
        }
        }
      }
      }
    });


  })
  .catch(error => {
  // Manejar errores aquí
  console.error(error);
});




// Cualitativos Catalunya
// RELLENA LOS SIGUIENTES DATOS
var zonaAConsultarCat = "Cat";            // Cambiado de "USA" a "Cat"
var numeroDeDatosAConsultarCat = 36;      // Agrega "Cat" al final

// API Call
fetch("https://rest.gvcgaesco.es/ser-gvc-institute/chart/qualitatius/" + zonaAConsultarCat + "/" + numeroDeDatosAConsultarCat)
.then(response => response.json())
.then(dataDBCat => {
    console.log(dataDBCat);
    var datos = {
        dato1: [],
        dato2: [],
        dato3: [],
        dato4: [],
        dato5: [],
        dato6: [],
        dato7: []
    };
    var fechaCat = [];

    // Procesar solo los primeros 7 datos
    dataDBCat.series.forEach(entry => {
      datos.dato1.push(entry.dato1 ?? 0);
      datos.dato2.push(entry.dato2 ?? 0);
      datos.dato3.push(entry.dato3 ?? 0);
      datos.dato4.push(entry.dato4 ?? 0);
      datos.dato5.push(entry.dato5 ?? 0);
      datos.dato6.push(entry.dato6 ?? 0);
      datos.dato7.push(entry.dato7 ?? 0);
      fechaCat.push(entry.mmmyy);
    });
      var optionsCat = {
        maintainAspectRatio: true,
        series: [
          //  {
          //      name: 'GVC Cycle', 
          //      data: datos.dato7
          //  },
            {
                name: 'Tendència de la producció (Mens.)', 
                data: datos.dato6
            },
            {
                name: 'Clima industrial (Mens.)',
                data: datos.dato5
            },
            {
                name: 'Confiança comerç (Mens.)',
                data: datos.dato4
            },
            {
                name: 'Confiança construcció (Trim.)', 
                data: datos.dato3
            },
            {
                name: 'Confiança empresarial (Trim.)', 
                data: datos.dato2
            },
            {
                name: 'Confiança resta serveis (Trim.)', 
                data: datos.dato1
            },
        ],
        chart: {
          height: "350px",
          type: 'heatmap',
        },
        dataLabels: {
        enabled: false
        },
        xaxis: {
          type: 'category',
          categories: fechaCat,
          labels: {
            style: {
              colors: 'black'
              }}
            },
        yaxis: {
          labels: {
          style: {
            colors: 'black'
          }}},

        legend: {
        show: false
        },
        plotOptions: {
        heatmap: {
          radius: 0,
          enableShades: false,
          shadeintensity: 0.1,
          useFillColorAsStroke: true,
          colorScale: {
          ranges: [
            {
              from: -0.1,
              to: 0.089,
              color: '#FFFFFF',
            },
            {
              from: 0.09,
              to: 4.99,
              color: '#F8696B',
            },
            {
              from: 5,
              to: 10,
              color: '#F8766D',
            },
            {
              from: 10,
              to: 15,
              color: '#F98370',
            },
            {
              from: 15,
              to: 20,
              color: '#FA9072',
            },
            {
              from: 20,
              to: 25,
              color: '#FA9D75',
            },
            {
              from: 25,
              to: 30,
              color: '#FBAA77',
            },
            {
              from: 30,
              to: 35,
              color: '#FCB77A',
            },
            {
              from: 35,
              to: 40,
              color: '#FCC47C',
            },
            {
              from: 40,
              to: 45,
              color: '#FDD17F',
            },
            {
              from: 45,
              to: 50,
              color: '#FEDE81',
            },
            {
              from: 50,
              to: 55,
              color: '#FFEB84',
            },
            {
              from: 55,
              to: 60,
              color: '#F0E784',
            },
            {
              from: 60,
              to: 65,
              color: '#E0E383',
            },
            {
              from: 65,
              to: 70,
              color: '#D1DE82',
            },
            {
              from: 70,
              to: 75,
              color: '#C1DA81',
            },
            {
              from: 75,
              to: 80,
              color: '#B1D580',
            },
            {
              from: 80,
              to: 85,
              color: '#A2D07F',
            },
            {
              from: 85,
              to: 90,
              color: '#92CC7E',
            },
            {
              from: 90,
              to: 95,
              color: '#83C77D',
            },
            {
              from: 95,
              to: 100,
              color: '#63BE7B',
            }]
              }
          }}
          };
          var chartCat = new ApexCharts(document.querySelector("#chartCat"), optionsCat); // Cambia el selector a "#chartCat" y el nombre a "chartCat"
          chartCat.render();
          })
          .catch(error => {
      // Manejar errores aquí
      console.error(error);
  });



// Datos cuantitativos Catalunya
// RELLENA LOS SIGUIENTES DATOS
var zonaAConsultarCat2 = "Cat";            // Cambiado de "USA" a "Cat2"
var numeroDeDatosAConsultarCat2 = 22;      // Agrega "Cat2" al final
// API Call
fetch("https://rest.gvcgaesco.es/ser-gvc-institute/chart/quantitatius/" + zonaAConsultarCat2 + "/" + numeroDeDatosAConsultarCat2)
.then(response => response.json())
.then(dataDBCat2 => {
    console.log(dataDBCat2);
    var datos = {
        dato1: [],
        dato2: [],
        dato3: [],
        dato4: [],
        dato5: [],
        dato6: [],
        dato7: []
    };
    var fechaCat2 = [];

    // Procesar solo los primeros 7 datos
    dataDBCat2.series.forEach(entry => {
        datos.dato1.push(entry.dato1 ?? 0);
        datos.dato2.push(entry.dato2 ?? 0);
        datos.dato3.push(entry.dato3 ?? 0);
        datos.dato4.push(entry.dato4 ?? 0);
        datos.dato5.push(entry.dato5 ?? 0);
        datos.dato6.push(entry.dato6 ?? 0);
        datos.dato7.push(entry.dato7 ?? 0);
        fechaCat2.push(entry.mmmyy);
    });
      var optionsCat2 = {
        maintainAspectRatio: true,
        series: [
            {
                name: 'Vendes grans superfícies', // OK
                data: datos.dato7
            },
            {
                name: 'Índex negoci serveis', // Indicador volum industrial Excel
                data: datos.dato6
            },
            {
                name: 'Producció industrial', // OK
                data: datos.dato5
            },
            {
                name: 'Vendes minoristes', // OK
                data: datos.dato4
            },
            {
                name: 'Habitatges en construcció', // OK
                data: datos.dato3
            },
            {
                name: 'Índex negoci industrial', // Serveis Excel
                data: datos.dato2
            },
            {
                name: 'Consum promig turista', // Turisme Excel
                data: datos.dato1
            }
        ],
        chart: {
          height: "350px",
          type: 'heatmap',
        },
        dataLabels: {
        enabled: false
        },
        xaxis: {
          type: 'category',
          categories: fechaCat2,
          labels: {
            style: {
              colors: 'black'
              }}
            },
        yaxis: {
          labels: {
          style: {
            colors: 'black'
          }}},

        legend: {
        show: false
        },
        plotOptions: {
        heatmap: {
          radius: 0,
          enableShades: false,
          shadeintensity: 0.1,
          useFillColorAsStroke: true,
          colorScale: {
          ranges: [
            {
              from: -0.1,
              to: 0.089,
              color: '#FFFFFF',
            },
            {
              from: 0.09,
              to: 4.99,
              color: '#F8696B',
            },
            {
              from: 5,
              to: 10,
              color: '#F8766D',
            },
            {
              from: 10,
              to: 15,
              color: '#F98370',
            },
            {
              from: 15,
              to: 20,
              color: '#FA9072',
            },
            {
              from: 20,
              to: 25,
              color: '#FA9D75',
            },
            {
              from: 25,
              to: 30,
              color: '#FBAA77',
            },
            {
              from: 30,
              to: 35,
              color: '#FCB77A',
            },
            {
              from: 35,
              to: 40,
              color: '#FCC47C',
            },
            {
              from: 40,
              to: 45,
              color: '#FDD17F',
            },
            {
              from: 45,
              to: 50,
              color: '#FEDE81',
            },
            {
              from: 50,
              to: 55,
              color: '#FFEB84',
            },
            {
              from: 55,
              to: 60,
              color: '#F0E784',
            },
            {
              from: 60,
              to: 65,
              color: '#E0E383',
            },
            {
              from: 65,
              to: 70,
              color: '#D1DE82',
            },
            {
              from: 70,
              to: 75,
              color: '#C1DA81',
            },
            {
              from: 75,
              to: 80,
              color: '#B1D580',
            },
            {
              from: 80,
              to: 85,
              color: '#A2D07F',
            },
            {
              from: 85,
              to: 90,
              color: '#92CC7E',
            },
            {
              from: 90,
              to: 95,
              color: '#83C77D',
            },
            {
              from: 95,
              to: 100,
              color: '#63BE7B',
            }]
              }
          }}
          };
          var chartCat2 = new ApexCharts(document.querySelector("#chartCat2"), optionsCat2); // Cambia el selector a "#chartCat2" y el nombre a "chartCat2"
          chartCat2.render();
          })
          .catch(error => {
      // Manejar errores aquí
      console.error(error);
  });




// BOTONES PARA VISUALIZAR GRÁFICOS

let chart; // Variable to hold the chart instance

// Function to parse CSV data into an array
    function parseCSV(csv) {
      const lines = csv.trim().split('\n');
      return lines.map((line) => line.split(','));
    }

               // Función para trazar el gráfico usando Plotly
               function plotChart(xData, yData, labels, title) {
                    var data = yData.map((column, index) => {
                        return {
                            x: xData,
                            y: column,
                            mode: 'lines',
                            name: labels[index]
                        };
                    });

                    var layout = {
                      title: {
                                  text: title,
                                  font: {
                                      size: 24
                                  },
                                  xref: 'paper', // Para alinear a la izquierda
                                  x: 0  // Posición alineada a la izquierda
                              },
                        showlegend: true,
                        hovermode: 'x unified',
                        legend: {
                            orientation: 'h',
                            x: 0.5,
                            y: -0.45, // Mover la leyenda debajo del gráfico
                            xanchor: 'center',
                            yanchor: 'top'
                        },
                        yaxis: {
                            showline: true,
                            zeroline: false,
                            showticklabels: true,
                            ticklen: 5,
                        },
                        xaxis: {
                            showgrid: false,
                            zeroline: false,
                            tickangle: -45,  // Etiquetas en diagonal
                            nticks: 18,
                            showline: true,
                            showticklabels: true,
                            ticklen: 5,
                            showspikes: true, // show crosshair
                            spikemode: 'across',
                            spikesnap: 'cursor',
                            spikethickness: 1,
                            rangeslider: {
                                visible: true,
                                thickness: 0.1,
                            },
                        },
                    };

                    Plotly.newPlot('table_real_economy', data, layout);
                }


function plotChartMacro(csvUrl) {
    const selectedOptionId = document.getElementById('macroSelect').options[document.getElementById('macroSelect').selectedIndex].id;
    fetch(selectedOptionId)
      .then((response) => response.text())
      .then((data) => {

          // Parse the CSV data
          const parsedData = parseCSV(data);

          // Extract x and y data
          const headerRow = parsedData[0];
          const xData = parsedData.slice(1).map((row) => row[0]);
          const yData = headerRow.slice(1).map((_, index) =>
            parsedData.slice(1).map((row) => row[index + 1])
          );

          // Plot the chart
          plotChart(xData, yData, headerRow.slice(1), csvUrl);
        })
}

// Event listener for the checkbox
const checkbox = document.getElementById('tab-toggle-5');
checkbox.addEventListener('change', () => {
  if (checkbox.checked) {

    // Fetch and plot the chart for table_real_economy
    fetch('https://gvcinstitute.com/wp-content/uploads/2023/06/n_real_unemployment.csv')
      .then((response) => response.text())
      .then((data) => {
        const parsedData = parseCSV(data);
        const headerRow = parsedData[0];
        const xData = parsedData.slice(1).map((row) => row[0]);
        const yData = headerRow.slice(1).map((_, index) =>
          parsedData.slice(1).map((row) => row[index + 1])
        );

        // Destroy the existing chart if it exists
        if (chart) {
          chart.destroy();
        }

        // Plot the new chart for table_real_economy
        plotChart(xData, yData, headerRow.slice(1), 'Unemployment');
      });
  } else {

    // Clear the chart if the checkbox is unchecked
    if (chart) {
      chart.destroy();
    }
  }
});

//Real economy chart Without Click ends
    document.querySelectorAll('.csv-file').forEach((element) => {
        element.addEventListener('click', () => {
            const fileName = element.id;
            console.log(fileName);

            //display chart name
            const chartname = element.textContent;
            console.log('Clicked on element with name:', chartname);
            //document.getElementById("real_economy_chart_heading").innerHTML=chartname;

            // Fetch the CSV data
            fetch(fileName)
                .then((response) => response.text())
                .then((data) => {

                    // Parse the CSV data
                    const parsedData = parseCSV(data);

                    // Extract x and y data
                    const headerRow = parsedData[0];
                    const xData = parsedData.slice(1).map((row) => row[0]);
                    const yData = headerRow.slice(1).map((_, index) =>
                      parsedData.slice(1).map((row) => row[index + 1])
                    );

                    // Destroy the existing chart if it exists
                    if (chart) {
                      chart.destroy();
                    };

                    // Plot the chart
                    plotChart(xData, yData, headerRow.slice(1), csvUrl);
                });
        });
    });



// MACROECONOMIC DATA
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('macroIndicatorSelect').addEventListener('change', function() {
            if (this.value) {
                loadAndPlotMacroData(this.value);
            }
        });
    });


    function loadAndPlotMacroData(indicator) {
      const url = 'https://rest.gvcgaesco.es/ser-gvc-institute/chart/graficoSeries/USA/200';

      fetch(url)
          .then(response => response.json())
          .then(data => {
              const series = data.series;
              const processedData = processMacroData(series, indicator);

              let titleText;
              switch(indicator) {
                  case 'Inflacion':
                      titleText = 'Macroeconomic Data: Inflation';
                      break;
                  case 'Desempleo':
                      titleText = 'Macroeconomic Data: Unemployment';
                      break;
                  case 'Confianza':
                      titleText = 'Macroeconomic Data: Consumer Confidence';
                      break;
                  case 'Corto':
                      titleText = 'Macroeconomic Data: Short Bonus';
                      break;
                  case 'Largo':
                      titleText = 'Macroeconomic Data: Long Bonus';
                      break;
                  case 'PIB':
                      titleText = 'Macroeconomic Data: GDP';
                      break;
                  case 'Comercial':
                      titleText = 'Macroeconomic Data: Trade Balance';
                      break;
                  case 'Corriente':
                      titleText = 'Macroeconomic Data: Current Balance';
                      break;
                  default:
                      titleText = 'Macroeconomic Data: ' + indicator;
              }


              const layout = {
                  title: {
                      text: titleText,
                      font: { size: 24 },
                      xref: 'paper',
                      x: 0
                  },
                  showlegend: true,
                      hovermode: 'x unified',
                      legend: {
                          orientation: 'h',
                          x: 0.5,
                          y: -0.45,
                          xanchor: 'center',
                          yanchor: 'top'
                      },
                      yaxis: {
                          showline: true,
                          zeroline: false,
                          showticklabels: true,
                          ticklen: 5,
                      },
                      xaxis: {
                          showgrid: false,
                          zeroline: false,
                          tickangle: -45,
                          nticks: 18,
                          showline: true,
                          showticklabels: true,
                          ticklen: 5,
                          showspikes: true,
                          spikemode: 'across',
                          spikesnap: 'cursor',
                          spikethickness: 1,
                          rangeslider: {
                              visible: true,
                              thickness: 0.1,
                          },
                      },
                  };
                  Plotly.newPlot('plotlyCountryChart', processedData, layout);
                });
              }


              function processMacroData(series, indicator) {
                const countryNames = {
                    'europa': 'Europa',
                    'espana': 'España',
                    'alemania': 'Alemania',
                    'francia': 'Francia',
                    'italia': 'Italia',
                    'reinoUnido': 'Reino Unido',
                    'usa': 'Estados Unidos',
                    'japon': 'Japón',
                    'china': 'China'
                };

                // Filtrar la serie para incluir solo el primer mes de cada trimestre si el indicador es PIB
                let filteredSeries = series;
                if (indicator === 'PIB') {
                    filteredSeries = series.filter((item, index) => index % 4 === 0);
                }
                // Reducir la serie para incluir todos los datos excepto los últimos dos
                filteredSeries = filteredSeries.slice(0, -2);

                const traces = Object.keys(countryNames).map(countryKey => {
                    return {
                        x: filteredSeries.map(item => item.fecha),
                        y: filteredSeries.map(item => item[countryKey + '_' + indicator]),
                        type: 'scatter',
                        name: countryNames[countryKey] // Usar el nombre completo del país
                    };
                });

                return traces;
            }

//FINANCIAL ECONOMY
            document.addEventListener('DOMContentLoaded', function() {
                document.getElementById('dataSelect').addEventListener('change', function() {
                    console.log("Tipo de dato seleccionado:", this.value); // Agregar para depuración
                    if (this.value) {
                        loadDataAndPlot(this.value);
                    }
                });
            });

            // Función para contar los días hábiles desde el inicio del año hasta hoy
            function loadDataAndPlot(dataType) {
                    let today = new Date();
                    let startOfYear = new Date(today.getFullYear(), 0, 1); // 1 de enero del año actual
                  
                    let dateFormat = date => `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()}`;
                  
                    let startDate = dateFormat(startOfYear);
                    let endDate = dateFormat(today);


                    let url = dataType === 'market_value'
                        ? `https://rest.gvcgaesco.es/ser-gvc-institute/chart/marketValue/EUR/500`
                        : `https://rest.gvcgaesco.es/ser-gvc-institute/chart/graficoSeries/EUR/500?start=${startDate}&end=${endDate}`;

                    fetch(url)
                        .then(response => response.json())
                        .then(data => {
                          var series = dataType === 'market_value' ? data.series : data.series;
                          var processedData = processData(series, dataType);
                          // Cambiar el título basado en el tipo de dato seleccionado
                          let titleText = '';
                          switch (dataType) {
                              case 'YTD':
                                  titleText = 'Evolution Stock Markets Year-To-Date (YTD)';
                                  break;
                              case 'PER':
                                  titleText = 'Evolution Price to Earning Ratio (PER)';
                                  break;
                              case 'DY':
                                  titleText = 'Evolution Dividend Yield (DY)';
                                  break;
                              case 'market_value':
                                  titleText = 'Evolution Market Value (1.000M €)';
                                  break;
                              default:
                                  titleText = 'Datos Financieros: ' + dataType;
                          }
                          var layout2 = {

                            title: {
                                text: titleText,
                                font: {
                                    size: 24
                                },
                                xref: 'paper',
                                x: 0
                            },
                            showlegend: true,
                            hovermode: 'x unified',
                            legend: {
                                  orientation: 'h',
                                  xanchor: 'center',
                                  yanchor: 'bottom',
                                  x: 0.5,
                                  y: -0.4 // Ajusta este valor según sea necesario para asegurar que no sobrepone nada
                              },
                            yaxis: {
                                showline: true,
                                zeroline: false,
                                showticklabels: true,
                                ticklen: 5,
                            },
                            xaxis: {
                                showgrid: false,
                                zeroline: false,
                                tickangle: -45,
                                nticks: 18,
                                showline: true,
                                showticklabels: true,
                                ticklen: 5,
                                showspikes: true,
                                spikemode: 'across',
                                spikesnap: 'cursor',
                                spikethickness: 1,
                                rangeslider: {
                                    visible: true,
                                    thickness: 0.1,
                                },
                            },
                       };
                       Plotly.newPlot('plotlyChart', processedData, layout2);
                       });
                   }



                   function processData(series, dataType) {
                    var indicesInfo = {
                        'Eurostoxx 50': 'eurostoxx',
                        'IBEX 35': 'ibex',
                        'DAX 40': 'dax',
                        'CAC 40': 'cac',
                        'FTSE MIB': 'mib',
                        'FTSE 100': 'ftse',
                        'S&P500': 'syp500',
                        'Nikkei 225': 'nikkei',
                        'SSE': 'sse'
                    };
                  
                    // Filtrar índices basados en el tipo de dato
                    if (dataType === 'DY') {
                        delete indicesInfo['Nikkei 225'];
                        delete indicesInfo['SSE'];
                    } else if (dataType === 'PER') {
                        delete indicesInfo['FTSE MIB'];
                        delete indicesInfo['SSE'];
                    }
                  
                    var suffix = dataType === 'market_value' ? '_value' : '_' + dataType;
                    var traces = [];
                  
                    Object.keys(indicesInfo).forEach(name => {
                        var key = indicesInfo[name];
                        var dataFiltered = series.filter(item => item[key + suffix] !== 0); // Filtrar elementos con valor 0
                        traces.push({
                            x: dataFiltered.map(item => item.fecha),
                            y: dataFiltered.map(item => item[key + suffix]),
                            type: 'scatter',
                            name: name
                        });
                    });
                  
                    return traces;
                }




        ///// VISUALIZAR Y QUITAR MENUS

const tabToggles = document.querySelectorAll('.tab-toggle');
const tabContents = document.querySelectorAll('.tab-content');

function showTabContent() {
  tabContents.forEach(content => {
    // if (tabToggles[0].checked) {
    //   content.style.display = 'block';
    // }

    if (content.classList.contains(tabToggles[0].getAttribute('data-filter')) && tabToggles[0].checked) {
      content.style.display = 'block';
    }
    else if (content.classList.contains(tabToggles[1].getAttribute('data-filter')) && tabToggles[1].checked) {
      content.style.display = 'block';
    }
    else if (content.classList.contains(tabToggles[2].getAttribute('data-filter')) && tabToggles[2].checked) {
      content.style.display = 'block';
    }
    else if (content.classList.contains(tabToggles[3].getAttribute('data-filter')) && tabToggles[3].checked) {
      content.style.display = 'block';
    }
    else if (content.classList.contains(tabToggles[4].getAttribute('data-filter')) && tabToggles[4].checked) {
      content.style.display = 'block';
    }
    else if (content.classList.contains(tabToggles[5].getAttribute('data-filter')) && tabToggles[5].checked) {
      content.style.display = 'block';
    }
     else if (content.classList.contains(tabToggles[6].getAttribute('data-filter')) && tabToggles[6].checked) {
      content.style.display = 'block';
    }
    else if (content.classList.contains(tabToggles[7].getAttribute('data-filter')) && tabToggles[7].checked) {
      content.style.display = 'block';
    }
    else if (content.classList.contains(tabToggles[8].getAttribute('data-filter')) && tabToggles[8].checked) {
      content.style.display = 'block';
    }
    else if (content.classList.contains(tabToggles[9].getAttribute('data-filter')) && tabToggles[9].checked) {
      content.style.display = 'block';
    }
    else if (content.classList.contains(tabToggles[10].getAttribute('data-filter')) && tabToggles[10].checked) {
      content.style.display = 'block';
    }
    else if (content.classList.contains(tabToggles[11].getAttribute('data-filter')) && tabToggles[11].checked) {
      content.style.display = 'block';
    }
    else {
      content.style.display = 'none';
    }
  });
}


tabToggles.forEach(toggle => {
  toggle.addEventListener('change', () => {
    showTabContent();
  });
});

showTabContent();

// TEXTO AL PASAR EL MOUSE
    // Europe
    const descriptionElement = document.getElementById('description');
    const chart1Element = document.getElementById('Expansion');
    const chart2Element = document.getElementById('radarChart');
    const chart3Element = document.getElementById('chart9');
    const chart4Element = document.getElementById('chart_hot');
    const chart5Element = document.getElementById('myChart');
    const chart6Element = document.getElementById('momentum');
    const chart7Element = document.getElementById('GVCrisk');
    const chart8Element = document.getElementById('GVCind');

    // USA
    const chart9Element = document.getElementById('ExpansionUS');
    const chart10Element = document.getElementById('radarChartUS');
    const chart11Element = document.getElementById('chart9US');
    const chart12Element = document.getElementById('chart_hotUS');
    const chart13Element = document.getElementById('myChartUSA');
    const chart14Element = document.getElementById('momentumUSA');
    const chart15Element = document.getElementById('GVCriskUSA');
    const chart16Element = document.getElementById('GVCindUSA');


    // ESPAÑA
    const chart17Element = document.getElementById('ExpansionEsp2');
    const chart18Element = document.getElementById('radarChartEsp');
    const chart19Element = document.getElementById('chartEsp');
    const chart20Element = document.getElementById('chartEsp2');

    // Obtén la altura inicial del rectángulo
    const initialHeight = descriptionElement.clientHeight + 'px';

    // Establece la altura inicial para el rectángulo
    descriptionElement.style.height = initialHeight;

    // Agrega eventos de hover a los gráficos
    chart1Element.addEventListener('mouseenter', function() {
      descriptionElement.innerText = '1. Velocidad del Ciclo Económico: En este gráfico se puede ver la evolución de nuestro indicador GVCi Cycle como un anemómetro. El indicador de ciclo nos proporciona información de los indicadores líderes de la economía de los diferentes sectores. De esta forma se puede trazar la trayectoria que sigue el indicador, mostrando las distintas etapas por las que pasa (expansión, enfriamiento, recesión y aceleración).';
      descriptionElement.style.height = initialHeight;
      // descriptionElement.style.color = '#00000'; // Cambia el color del texto a blanco
    });

    chart1Element.addEventListener('mouseleave', function() {
      descriptionElement.innerText = '';
      descriptionElement.style.height = initialHeight;
    });

      chart2Element.addEventListener('mouseenter', function() {
        descriptionElement.innerText = '2. Radar del Mercado: El Radar de mercado cuenta con tres vértices que corresponden a las distintas características del mercado europeo: su ciclo económico, su riesgo del mercado y su valoración del mercado. Cada círculo negro corresponde a una de las tres características del mercado y cuanto más cerca se encuentra del centro peor dato refleja y viceversa.';
        descriptionElement.style.height = initialHeight;
      });

      chart2Element.addEventListener('mouseleave', function() {
        descriptionElement.innerText = '';
        descriptionElement.style.height = initialHeight;
      });

    chart3Element.addEventListener('mouseenter', function() {
      descriptionElement.innerText = '3. Mapa de Calor por Sectores: En este mapa se muestra la evolución de distintos indicadores macroeconómicos para cada uno de los sectores a lo largo del tiempo. Valores verdes y amarillos corresponden a datos por encima de la media, mientras que valores rojo y naranjas corresponden a datos por debajo de la media. De esta forma se puede transmitir de forma muy intuitiva si la economía en su conjunto “evoluciona” hacia un color verde (crecimiento) o hacia un color rojo (enfriamiento). En el caso del índice bursátil es el rendimiento mensual.';
      // Restablece la altura inicial cuando se muestra el texto
      descriptionElement.style.height = initialHeight;
    });

    chart3Element.addEventListener('mouseleave', function() {
      descriptionElement.innerText = '';
      // Restablece la altura inicial cuando el texto desaparece
      descriptionElement.style.height = initialHeight;
    });

    chart4Element.addEventListener('mouseenter', function() {
      descriptionElement.innerText = '4. Mapa de Calor de los Bancos Centrales: En este mapa se muestra la evolución de la liquidez mediante un enfoque intermensual de los diversos bancos centrales del mundo. Los datos reflejan los cambios mensuales en la liquidez, normalizados respecto a la media y desviación estándar de la última década. De esta forma se puede transmitir de forma muy intuitiva si la liquidez mundial en su conjunto “evoluciona” hacia un color verde (crecimiento del balance) o hacia un color rojo (retirada de liquidez). Una retirada de la liquidez sugiere una mayor volatilidad del mercado. Los Bancos Centrales más importantes en volumen son la Reserva Federal y el Banco Central Europeo.';
      // Restablece la altura inicial cuando se muestra el texto
      descriptionElement.style.height = initialHeight;
    });

    chart4Element.addEventListener('mouseleave', function() {
      descriptionElement.innerText = '';
      // Restablece la altura inicial cuando el texto desaparece
      descriptionElement.style.height = initialHeight;
    });

    chart5Element.addEventListener('mouseenter', function() {
      descriptionElement.innerText = '5. Velocímetro de Riesgos: En este gráfico se muestra la evolución de distintos indicadores de riesgo para el mercado europeo. Es el barómetro de mercado que nos muestra la presión/riesgo de mercado. Cada carril semicircular corresponde a un indicador diferente, donde se muestra su valor actual (círculo relleno/negra) y su valor de hace dos semanas (círculo hueco). Tiene especial peso el indicador del VIX y del MOVE en los mercados financieros, mientras que el Spread 10Y-2Y juntamente con la prima tendrán especial importancia en la economía real.';
      // Restablece la altura inicial cuando se muestra el texto
      descriptionElement.style.height = initialHeight;
    });

    chart5Element.addEventListener('mouseleave', function() {
      descriptionElement.innerText = '';
      // Restablece la altura inicial cuando el texto desaparece
      descriptionElement.style.height = initialHeight;
    });

    chart6Element.addEventListener('mouseenter', function() {
      descriptionElement.innerText = '6. Momentum de mercado: En este widget se muestra la evolución de distintos indicadores de momentum para el Eurostoxx50. Es un widget que nos muestra diferentes características del mercado en cuestión. Cada franja horizontal corresponde a un indicador diferente, donde se muestra su valor actual (bola naranja) y su valor de hace dos semanas (extremo de la línea punteada que sale da cada bola naranja). Su interpretación nos muestra que si la dirección de las bolas esta alineada sugiere que la tendencia del mercado es fuerte. Tiene especial peso la alineación de la pendiente de la M20 y M200. ';
      // Restablece la altura inicial cuando se muestra el texto
      descriptionElement.style.height = initialHeight;
    });

    chart6Element.addEventListener('mouseleave', function() {
      descriptionElement.innerText = '';
      // Restablece la altura inicial cuando el texto desaparece
      descriptionElement.style.height = initialHeight;
    });

    chart7Element.addEventListener('mouseenter', function() {
      descriptionElement.innerText = '7. GVCi Risk: En este gráfico se muestra la evolución a lo largo del tiempo de nuestro indicador GVCi Risk (eje izquierdo), formado por los diferentes subindicadores presentes en el gráfico de Velocímetro de Riesgo. El GViC Risk se mueve entre 0 y 100, indicando baja o alta volatilidad respectivamente. A parte, se muestra solapada la evolución del Eurostoxx50 (eje derecho) para el mismo periodo de tiempo. Su interpretación es observar la tendencia del riesgo. Si esta es positiva sugiere que el mercado podría tener un tramo a la baja y si esta es negativa sugiere que el mercado podría tener un tramo al alza.';
      // Restablece la altura inicial cuando se muestra el texto
      descriptionElement.style.height = initialHeight;
    });

    chart7Element.addEventListener('mouseleave', function() {
      descriptionElement.innerText = '';
      // Restablece la altura inicial cuando el texto desaparece
      descriptionElement.style.height = initialHeight;
    });

    chart8Element.addEventListener('mouseenter', function() {
      descriptionElement.innerText = '8. GVCi Momentum: Este indicador se compone de varios subindicadores integrados en el gráfico de Momentum de mercado. El GVC Momentum oscila entre -2 y 2, señalando estados de sobreventa y sobrecompra, respectivamente. Paralelamente, se expone la progresión del Eurostoxx50 (en el eje de la derecha) para el mismo intervalo temporal. Los puntos críticos de este último se encuentran en los niveles de 1 o -1, y su análisis es análogo al de indicadores clásicos de sobrecompra y sobreventa, como el RSI. A partir de 1 o -1 la probabilidad de giro es elevada.';
      // Restablece la altura inicial cuando se muestra el texto
      descriptionElement.style.height = initialHeight;
    });

    chart8Element.addEventListener('mouseleave', function() {
      descriptionElement.innerText = '';
      // Restablece la altura inicial cuando el texto desaparece
      descriptionElement.style.height = initialHeight;
    });

    // USA
    chart9Element.addEventListener('mouseenter', function() {
      descriptionElement.innerText = '9. Velocidad del Ciclo Económico: En este gráfico se puede ver la evolución de nuestro indicador GVCi Cycle como un anemómetro. El indicador de ciclo nos proporciona información de los indicadores líderes de la economía de los diferentes sectores. De esta forma se puede trazar la trayectoria que sigue el indicador, mostrando las distintas etapas por las que pasa (expansión, enfriamiento, recesión y aceleración).';
      // Restablece la altura inicial cuando se muestra el texto
      descriptionElement.style.height = initialHeight;
    });

    chart9Element.addEventListener('mouseleave', function() {
      descriptionElement.innerText = '';
      // Restablece la altura inicial cuando el texto desaparece
      descriptionElement.style.height = initialHeight;
    });

    chart10Element.addEventListener('mouseenter', function() {
      descriptionElement.innerText = '10. Radar del Mercado: El Radar de mercado cuenta con tres vértices que corresponden a las distintas características del mercado europeo: su ciclo económico, su riesgo del mercado y su valoración del mercado. Cada círculo negro corresponde a una de las tres características del mercado y cuanto más cerca se encuentra del centro peor dato refleja y viceversa.';
      // Restablece la altura inicial cuando se muestra el texto
      descriptionElement.style.height = initialHeight;
    });

    chart10Element.addEventListener('mouseleave', function() {
      descriptionElement.innerText = '';
      // Restablece la altura inicial cuando el texto desaparece
      descriptionElement.style.height = initialHeight;
    });

    chart11Element.addEventListener('mouseenter', function() {
      descriptionElement.innerText = '11. Mapa de Calor por Sectores: En este mapa se muestra la evolución de distintos indicadores macroeconómicos para cada uno de los sectores a lo largo del tiempo. Valores verdes y amarillos corresponden a datos por encima de la media, mientras que valores rojo y naranjas corresponden a datos por debajo de la media. De esta forma se puede transmitir de forma muy intuitiva si la economía en su conjunto “evoluciona” hacia un color verde (crecimiento) o hacia un color rojo (enfriamiento). En el caso del índice bursátil es el rendimiento mensual.';
      // Restablece la altura inicial cuando se muestra el texto
      descriptionElement.style.height = initialHeight;
    });

    chart11Element.addEventListener('mouseleave', function() {
      descriptionElement.innerText = '';
      // Restablece la altura inicial cuando el texto desaparece
      descriptionElement.style.height = initialHeight;
    });

    chart12Element.addEventListener('mouseenter', function() {
      descriptionElement.innerText = '12. Mapa de Calor de los Bancos Centrales: En este mapa de calor se muestra la evolución de los distintos indicadores de la macroeconomía asiática. Los datos mostrados son los valores normalizados respecto su media y su desviación standard de los últimos 10 años. De esta forma se puede transmitir de forma muy intuitiva si los indicadores macroeconómicos asiáticos en su conjunto “evolucionan” hacia un color verde (crecimiento/expansión) o hacia un color rojo (decrecimiento/contracción).';
      // Restablece la altura inicial cuando se muestra el texto
      descriptionElement.style.height = initialHeight;
    });

    chart12Element.addEventListener('mouseleave', function() {
      descriptionElement.innerText = '';
      // Restablece la altura inicial cuando el texto desaparece
      descriptionElement.style.height = initialHeight;
    });

    chart13Element.addEventListener('mouseenter', function() {
      descriptionElement.innerText = '13. Velocímetro de Riesgos: En este gráfico se muestra la evolución de distintos indicadores de riesgo para el mercado estadounidense. Es el barómetro de mercado que nos muestra la presión/riesgo de mercado. Cada carril semicircular corresponde a un indicador diferente, donde se muestra su valor actual (círculo relleno/negra) y su valor de hace dos semanas (círculo hueco). Tiene especial peso el indicador del VIX y del MOVE en los mercados financieros, mientras que el Spread 10Y-2Y juntamente con la prima tendrán especial importancia en la economía real.';
      // Restablece la altura inicial cuando se muestra el texto
      descriptionElement.style.height = initialHeight;
    });

    chart13Element.addEventListener('mouseleave', function() {
      descriptionElement.innerText = '';
      // Restablece la altura inicial cuando el texto desaparece
      descriptionElement.style.height = initialHeight;
    });

    chart14Element.addEventListener('mouseenter', function() {
      descriptionElement.innerText = '14. Momentum de Mercado: En este widget se muestra la evolución de distintos indicadores de momentum para el SP500. Es un widget que nos muestra diferentes características del mercado en cuestión. Cada franja horizontal corresponde a un indicador diferente, donde se muestra su valor actual (bola naranja) y su valor de hace dos semanas (extremo de la línea punteada que sale da cada bola naranja). Su interpretación nos muestra que si la dirección de las bolas esta alineada sugiere que la tendencia del mercado es fuerte. Tiene especial peso la alineación de la pendiente de la M20 y M200. ';
      // Restablece la altura inicial cuando se muestra el texto
      descriptionElement.style.height = initialHeight;
    });

    chart14Element.addEventListener('mouseleave', function() {
      descriptionElement.innerText = '';
      // Restablece la altura inicial cuando el texto desaparece
      descriptionElement.style.height = initialHeight;
    });

    chart15Element.addEventListener('mouseenter', function() {
      descriptionElement.innerText = '15. GVCi Risk: En este gráfico se muestra la evolución a lo largo del tiempo de nuestro indicador GVCi Risk (eje izquierdo), formado por los diferentes subindicadores presentes en el gráfico de Velocímetro de Riesgo. El GViC Risk se mueve entre 0 y 100, indicando baja o alta volatilidad respectivamente. A parte, se muestra solapada la evolución del SP500 (eje derecho) para el mismo periodo de tiempo. Su interpretación es observar la tendencia del riesgo. Si esta es positiva sugiere que el mercado podría tener un tramo a la baja y si esta es negativa sugiere que el mercado podría tener un tramo al alza.';
      // Restablece la altura inicial cuando se muestra el texto
      descriptionElement.style.height = initialHeight;
    });

    chart15Element.addEventListener('mouseleave', function() {
      descriptionElement.innerText = '';
      // Restablece la altura inicial cuando el texto desaparece
      descriptionElement.style.height = initialHeight;
    });

    chart16Element.addEventListener('mouseenter', function() {
      descriptionElement.innerText = '16. GVCi Momentum: Este indicador se compone de varios subindicadores integrados en el gráfico de Momentum de mercado. El GVC Momentum oscila entre -2 y 2, señalando estados de sobreventa y sobrecompra, respectivamente. Paralelamente, se expone la progresión del Eurostoxx50 (en el eje de la derecha) para el mismo intervalo temporal. Los puntos críticos de este último se encuentran en los niveles de 1 o -1, y su análisis es análogo al de indicadores clásicos de sobrecompra y sobreventa, como el RSI. A partir de 1 o -1 la probabilidad de giro es elevada.';
      // Restablece la altura inicial cuando se muestra el texto
      descriptionElement.style.height = initialHeight;
    });

    chart16Element.addEventListener('mouseleave', function() {
      descriptionElement.innerText = '';
      // Restablece la altura inicial cuando el texto desaparece
      descriptionElement.style.height = initialHeight;
    });

// Textos España

    chart17Element.addEventListener('mouseenter', function() {
      descriptionElement.innerText = 'Velocidad del Ciclo Económico: En este gráfico se puede ver la evolución de nuestro indicador GVCi Cycle como un anemómetro. El indicador de ciclo nos proporciona información de los indicadores líderes de la economía de los diferentes sectores. De esta forma se puede trazar la trayectoria que sigue el indicador, mostrando las distintas etapas por las que pasa (expansión, enfriamiento, recesión y aceleración).';
      // Restablece la altura inicial cuando se muestra el texto
      descriptionElement.style.height = initialHeight;
    });

    chart17Element.addEventListener('mouseleave', function() {
      descriptionElement.innerText = '';
      // Restablece la altura inicial cuando el texto desaparece
      descriptionElement.style.height = initialHeight;
    });

    chart18Element.addEventListener('mouseenter', function() {
      descriptionElement.innerText = 'Radar del Mercado: El Radar de mercado cuenta con tres vértices que corresponden a las distintas características del mercado europeo: su ciclo económico, su riesgo del mercado y su valoración del mercado. Cada círculo negro corresponde a una de las tres características del mercado y cuanto más cerca se encuentra del centro peor dato refleja y viceversa.';
      // Restablece la altura inicial cuando se muestra el texto
      descriptionElement.style.height = initialHeight;
    });

    chart18Element.addEventListener('mouseleave', function() {
      descriptionElement.innerText = '';
      // Restablece la altura inicial cuando el texto desaparece
      descriptionElement.style.height = initialHeight;
    });

    chart19Element.addEventListener('mouseenter', function() {
      descriptionElement.innerText = ' Mapa de Calor por Sectores: En este mapa se muestra la evolución de distintos indicadores macroeconómicos para cada uno de los sectores a lo largo del tiempo. Valores verdes y amarillos corresponden a datos por encima de la media, mientras que valores rojo y naranjas corresponden a datos por debajo de la media. De esta forma se puede transmitir de forma muy intuitiva si la economía en su conjunto “evoluciona” hacia un color verde (crecimiento) o hacia un color rojo (enfriamiento). En el caso del índice bursátil es el rendimiento mensual.';
      // Restablece la altura inicial cuando se muestra el texto
      descriptionElement.style.height = initialHeight;
    });

    chart19Element.addEventListener('mouseleave', function() {
      descriptionElement.innerText = '';
      // Restablece la altura inicial cuando el texto desaparece
      descriptionElement.style.height = initialHeight;
    });

    chart20Element.addEventListener('mouseenter', function() {
      descriptionElement.innerText = ' Mapa de Calor por Sectores: En este mapa se muestra la evolución de distintos indicadores macroeconómicos para cada uno de los sectores a lo largo del tiempo. Valores verdes y amarillos corresponden a datos por encima de la media, mientras que valores rojo y naranjas corresponden a datos por debajo de la media. De esta forma se puede transmitir de forma muy intuitiva si la economía en su conjunto “evoluciona” hacia un color verde (crecimiento) o hacia un color rojo (enfriamiento). En el caso del índice bursátil es el rendimiento mensual.';
      // Restablece la altura inicial cuando se muestra el texto
      descriptionElement.style.height = initialHeight;
    });

    chart20Element.addEventListener('mouseleave', function() {
      descriptionElement.innerText = '';
      // Restablece la altura inicial cuando el texto desaparece
      descriptionElement.style.height = initialHeight;
    });


      var checkbox1 = document.getElementById('tab-toggle-1');
      var checkbox2 = document.getElementById('tab-toggle-2');
      var checkbox3 = document.getElementById('tab-toggle-3');
      var checkbox4 = document.getElementById('tab-toggle-4');
      var checkbox5 = document.getElementById('tab-toggle-5');
      var checkbox6 = document.getElementById('tab-toggle-6');
      var checkbox7 = document.getElementById('tab-toggle-7');
      var checkbox8 = document.getElementById('tab-toggle-8');
      var checkbox9 = document.getElementById('tab-toggle-9');
      var checkbox10 = document.getElementById('tab-toggle-10');
      var checkbox11 = document.getElementById('tab-toggle-11');
      var checkbox12 = document.getElementById('tab-toggle-12');


      // Obtén el div que quieres ocultar
      var descriptionDiv = document.getElementById('description');

      // Establece un manejador de eventos 'change' para cada checkbox
      checkbox1.addEventListener('change', handleCheckboxChange);
      checkbox2.addEventListener('change', handleCheckboxChange);
      checkbox3.addEventListener('change', handleCheckboxChange);
      checkbox4.addEventListener('change', handleCheckboxChange);
      checkbox5.addEventListener('change', handleCheckboxChange);
      checkbox6.addEventListener('change', handleCheckboxChange);
      checkbox7.addEventListener('change', handleCheckboxChange);
      checkbox8.addEventListener('change', handleCheckboxChange);
      checkbox9.addEventListener('change', handleCheckboxChange);
      checkbox10.addEventListener('change', handleCheckboxChange);
      checkbox11.addEventListener('change', handleCheckboxChange);
      checkbox12.addEventListener('change', handleCheckboxChange);

      function handleCheckboxChange(event) {
          // Comprueba si alguno de los checkboxes 1, 2, 3, o 4 está marcado
          if (checkbox1.checked || checkbox2.checked || checkbox3.checked || checkbox4.checked || checkbox10.checked || checkbox11.checked ) {
              // Si alguno de esos checkboxes está marcado, muestra el div description
              descriptionDiv.style.display = 'block';
          } else if (checkbox5.checked || checkbox6.checked || checkbox7.checked || checkbox8.checked || checkbox9.checked || checkbox12.checked) {
              // Si no, y si el checkbox 5 o 6 está marcado, oculta el div description
              descriptionDiv.style.display = 'none';
          } else {
              // Si no, muestra el div description
              descriptionDiv.style.display = 'block';
          }
      }


      $(document).ready(function() {
          $(".hover-zoom").hover(
            function() {
                $(this).css("transform", "scale(1.1)"); // Aumenta el tamaño al 110%
            },
            function() {
                $(this).css("transform", "scale(1)"); // Vuelve al tamaño original
            }
          );
      });


// Tipos de interés

function dibujarGrafico(headers, firstRowData, secondRowData, divId, title) {
        var trace1 = {
            type: "scatter",
            mode: "lines+markers",
            name: firstRowData.name,
            x: headers,
            y: firstRowData.values,
            line: {color: '#9E9F9F'},
            marker: {symbol: 'circle', size: 10, color: '#9E9F9F'}
        };

        var trace2 = {
            type: "scatter",
            mode: "lines+markers",
            name: secondRowData.name,
            x: headers,
            y: secondRowData.values,
            line: {color: '#1B466D'},
            marker: {symbol: 'circle', size: 10, color: '#1B466D'}
        };

        var data = [trace1, trace2];

        var layout = {
          title: {
            text: title, // 'title' debe ser una variable string que contenga el título de tu gráfico
            font: {
                color: 'black',
                size: 20,
                weight: 'bold'
             }
            },

            xaxis: {
                title: 'Maturity',
                ticktext: headers,
                tickvals: headers,
            },
            yaxis: {
                title: 'Interest Rate (%)',
                type: 'linear',
                color: 'black',
            },
            hovermode: 'x unified',
            showlegend: true,
            legend: {
                orientation: 'h', // Horizontal orientation
                x: 0.5, // Centrado en el eje x
                xanchor: 'center', // Anclado al centro en el eje x
                y: -0.3, // Posición en el eje y (negativo para colocarlo debajo del gráfico)
                yanchor: 'top' // Anclado en la parte superior de la leyenda
            },
        };

        Plotly.newPlot(divId, data, layout);
    }



// Tabla tipos de interés

// Fecha actual

function obtenerFechaActual() {
    const fecha = new Date();
    return fecha.toLocaleDateString('es-ES', {
        day: '2-digit',
        month: '2-digit',
        year: 'numeric'
    });
}

function insertDataIntoTable(data, tableId, countryPrefix) {
        const table = document.querySelector(tableId);
        data.forEach((entry) => {
            if (entry.zona === "EUR" && (entry.tipo === "Var. Anual" || entry.tipo === "Var. Sem")) {
                const row = table.insertRow();
                let typeName = entry.tipo;
                if (typeName === "Un año") {
                    typeName = "Var. anual";
                }
                const typeCell = row.insertCell();
                typeCell.textContent = typeName;
                typeCell.classList.add('td_tipos');
                Object.keys(entry).forEach((key) => {
                if (key.startsWith(countryPrefix)) {
                    const cell = row.insertCell();
                    const value = entry[key];
                    cell.textContent = (value).toFixed(2);
                    cell.classList.add(value > 0 ? 'positive-rate' : 'negative-rate');
                    cell.classList.add('td_tipos'); // Añadir clase a las celdas 'td'
                }
            });
        }
    });
  }


  function insertDataIntoTable2(data, tableId, countryPrefix) {
        const table2 = document.querySelector(tableId);
        data.forEach((entry) => {
            if (entry.zona === "USA" && (entry.tipo === "Var. Anual" || entry.tipo === "Var. Sem")) {
                const row = table2.insertRow();
                let typeName = entry.tipo;
                if (typeName === "Un año") {
                    typeName = "Var. anual";
                }
                const typeCell2 = row.insertCell();
                typeCell2.textContent = typeName;
                typeCell2.classList.add('td_tipos');
                Object.keys(entry).forEach((key) => {
                if (key.startsWith(countryPrefix)) {
                    const cell2 = row.insertCell();
                    const value2 = entry[key];
                    cell2.textContent = (value2).toFixed(2);
                    cell2.classList.add(value2 > 0 ? 'positive-rate' : 'negative-rate');
                    cell2.classList.add('td_tipos'); // Añadir clase a las celdas 'td'
                }
            });
        }
    });
  }

  // Obtener datos

    async function fetchDataEUR() {
    try {
        const response = await fetch('https://rest.gvcgaesco.es/ser-gvc-institute/chart/rfTabla/EUR');
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        } else {
            const data = await response.json();
            // Llamada a insertDataIntoTable se mantiene sin cambios, ya que no necesita modificarse.
            insertDataIntoTable(data.series, '#interestRatesTableGermany', 'a');
            insertDataIntoTable(data.series, '#interestRatesTableSpain', 'e');
            insertDataIntoTable(data.series, '#interestRatesTableBritain', 'gb');
            insertDataIntoTable(data.series, '#interestRatesTableItaly', 'it');

            // Encuentra los conjuntos de datos "Actual" y "Un año"
            const actualData = data.series.find(entry => entry.tipo === "Actual");
            const oneYearData = data.series.find(entry => entry.tipo === "Un año");

            // Asegúrate de que los datos existen antes de intentar usarlos
            if (actualData && oneYearData) {
                // Ahora necesitamos procesar los datos para el gráfico
                // Como ejemplo, aquí procesamos para Alemania
                const headersGermany = ['3M', '6M', '1A', '2A', '5A', '10A', '15A', '20A', '30A']; // Los vencimientos
                const actualDataGermany = headersGermany.map(header => actualData['a' + header]);
                const oneYearDataGermany = headersGermany.map(header => oneYearData['a' + header]);
                const fechaActual = obtenerFechaActual();

                // Ahora llamamos a dibujarGrafico con los datos nuevos
                dibujarGrafico(headersGermany, { name: "29/12/2023", values: oneYearDataGermany }, {name: fechaActual, values: actualDataGermany },  'myDivGermany', 'Alemania');

                // Como ejemplo, aquí procesamos para Alemania
                const headersSpain = ['3M', '6M', '1A', '2A', '5A', '10A', '15A', '20A', '30A']; // Los vencimientos
                const actualDataSpain = headersSpain.map(header => actualData['e' + header]);
                const oneYearDataSpain = headersSpain.map(header => oneYearData['e' + header]);

                // Ahora llamamos a dibujarGrafico con los datos nuevos
                dibujarGrafico(headersSpain, { name: "29/12/2023", values: oneYearDataSpain }, { name: fechaActual, values: actualDataSpain }, 'myDivSpain', 'España');

                // Como ejemplo, aquí procesamos para Alemania
                const headersBritain = ['3M', '6M', '1A', '2A', '5A', '10A', '15A', '20A', '30A']; // Los vencimientos
                const actualDataBritain = headersBritain.map(header => actualData['gb' + header]);
                const oneYearDataBritain = headersBritain.map(header => oneYearData['gb' + header]);

                // Ahora llamamos a dibujarGrafico con los datos nuevos
                dibujarGrafico(headersBritain, { name: "29/12/2023", values: oneYearDataBritain }, { name: fechaActual, values: actualDataBritain }, 'myDivBritain', 'Gran Bretaña');

                // Como ejemplo, aquí procesamos para Alemania
                const headersItaly = ['3M', '6M', '1A', '2A', '5A', '10A', '15A', '20A', '30A']; // Los vencimientos
                const actualDataItaly = headersItaly.map(header => actualData['it' + header]);
                const oneYearDataItaly = headersItaly.map(header => oneYearData['it' + header]);

                // Ahora llamamos a dibujarGrafico con los datos nuevos
                dibujarGrafico(headersItaly, { name: "29/12/2023", values: oneYearDataItaly }, { name: fechaActual, values: actualDataItaly }, 'myDivItaly', 'Italia');

                // Asegúrate de cambiar 'myDivGermany' y los prefijos 'a' al país correspondiente
            } else {
                console.error('No se encontraron los conjuntos de datos necesarios');
            }
        }
    } catch (error) {
        console.error('Error fetching data:', error);
    }
  }


  async function fetchDataUSA() {
    try {
        const response = await fetch('https://rest.gvcgaesco.es/ser-gvc-institute/chart/rfTabla/USA');
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        } else {
            const data = await response.json();
            // Llamada a insertDataIntoTable se mantiene sin cambios, ya que no necesita modificarse.
            insertDataIntoTable2(data.series, '#interestRatesTableUSA', 'a');
            insertDataIntoTable2(data.series, '#interestRatesTableChina', 'e');
            insertDataIntoTable2(data.series, '#interestRatesTableJapon', 'gb');
            insertDataIntoTable2(data.series, '#interestRatesTableIndia', 'it');

            // Encuentra los conjuntos de datos "Actual" y "Un año"
            const actualData2 = data.series.find(entry => entry.tipo === "Actual");
            const oneYearData2 = data.series.find(entry => entry.tipo === "Un año");
            const fechaActual = obtenerFechaActual();
            // Asegúrate de que los datos existen antes de intentar usarlos
            if (actualData2 && oneYearData2) {
                // Ahora necesitamos procesar los datos para el gráfico
                // Como ejemplo, aquí procesamos para Alemania
                const headersUSA = ['3M', '6M', '1A', '2A', '5A', '10A', '15A', '20A', '30A']; // Los vencimientos
                const actualDataUSA = headersUSA.map(header => actualData2['a' + header]);
                const oneYearDataUSA = headersUSA.map(header => oneYearData2['a' + header]);

                // Ahora llamamos a dibujarGrafico con los datos nuevos
                dibujarGrafico(headersUSA, { name: "29/12/2023", values: oneYearDataUSA }, {name: fechaActual, values: actualDataUSA },  'myDivUSA', 'USA');

                // Como ejemplo, aquí procesamos para Alemania
                const headersChina = ['3M', '6M', '1A', '2A', '5A', '10A', '15A', '20A', '30A']; // Los vencimientos
                const actualDataChina = headersChina.map(header => actualData2['e' + header]);
                const oneYearDataChina = headersChina.map(header => oneYearData2['e' + header]);

                // Ahora llamamos a dibujarGrafico con los datos nuevos
                dibujarGrafico(headersChina, { name: "29/12/2023", values: oneYearDataChina }, {name: fechaActual, values: actualDataChina }, 'myDivChina', 'China');

               // Como ejemplo, aquí procesamos para Alemania
               const headersJapon = ['3M', '6M', '1A', '2A', '5A', '10A', '15A', '20A', '30A']; // Los vencimientos
                const actualDataJapon = headersJapon.map(header => actualData2['gb' + header]);
                const oneYearDataJapon = headersJapon.map(header => oneYearData2['gb' + header]);

                // Ahora llamamos a dibujarGrafico con los datos nuevos
                dibujarGrafico(headersJapon, { name: "29/12/2023", values: oneYearDataJapon }, {name: fechaActual, values: actualDataJapon }, 'myDivJapon', 'Japon');

                // Como ejemplo, aquí procesamos para Alemania
                const headersIndia = ['3M', '6M', '1A', '2A', '5A', '10A', '15A', '20A', '30A']; // Los vencimientos
                const actualDataIndia = headersIndia.map(header => actualData2['it' + header]);
                const oneYearDataIndia = headersIndia.map(header => oneYearData2['it' + header]);

                // Ahora llamamos a dibujarGrafico con los datos nuevos
                dibujarGrafico(headersIndia, { name: "29/12/2023", values: oneYearDataIndia }, {name: fechaActual, values: actualDataIndia }, 'myDivIndia', 'India');


            } else {
                console.error('No se encontraron los conjuntos de datos necesarios');
            }
        }
    } catch (error) {
        console.error('Error fetching data:', error);
    }
  }

  // Llamada datos
  fetchDataEUR();

  fetchDataUSA();




  // CHATBOT
        // Precargar imágenes
        const chatImage = new Image();
        chatImage.src = "https://www.dropbox.com/scl/fi/kgviuhratrm4ss2k96erq/chat.png?rlkey=7ljn8x22aebth9btwv3do8tnf&raw=1";
        const crossImage = new Image();
        crossImage.src = "https://www.dropbox.com/scl/fi/gf80vscyv8lk0ah7bluvv/cross.png?rlkey=08vij8rdcbtav0qnhwi8e9ia3&raw=1";

        // Precargar la imagen del avatar del bot
        const botAvatarImage = new Image();
        botAvatarImage.src = "https://www.dropbox.com/scl/fi/spaoxpnvhgdy57lullrs2/Logo-tradingview.png?rlkey=i1wraqeonygqve8nxvjhpdrdm&raw=1";

        function getCurrentTime() {
            const date = new Date();
            let hours = date.getHours();
            let minutes = date.getMinutes();
            hours = hours < 10 ? '0' + hours : hours;
            minutes = minutes < 10 ? '0' + minutes : minutes;
            return hours + ':' + minutes;
        }

        function selectOption(option) {
            // Muestra el mensaje del usuario
            appendMessageWithTimestamp(option, 'user');

            // Esconde todas las opciones
            const allOptions = document.querySelectorAll('.options');
            allOptions.forEach(opt => {
                opt.classList.add('hidden');
            });

            // Lógica según la opción seleccionada
            switch(option) {

                //DAILY REPORT
                case 'Daily Report':
                    appendMessage("El Daily Report es un informe diario que te ofrece una visión general de la economía mundial. El informe cubre varios aspectos cruciales de la economía global.", () => {
                        appendMessage("¿Quieres obtener información sobre los contenidos del informe?", () => {
                            setTimeout(() => {  // Añade un retraso para mostrar las opciones después del mensaje
                                    moveOptionsToEnd('.daily-report-options');
                                }, 500);
                        });
                    });
                    break;
                case 'Sí, quiero informarme más.':
                    hideOptions('.daily-report-options');
                    appendMessage("El informe cubre varios aspectos cruciales de la economía global, entre ellos: \
                    Evolución de los índices mundiales: Se muestran los cambios en los índices más relevantes a nivel mundial. \
                    Sectores del MSCI World YTD: Un resumen de cómo se han desempeñado los diferentes sectores en lo que va del año. \
                    Indicadores de Momentum: Focalizado en Europa y Estados Unidos para darte una idea de las tendencias actuales. \
                    Incrementos diarios y anuales: Datos sobre los cambios diarios y anuales de los índices y sus futuros. \
                    Velocímetro de Riesgo: Una herramienta que te indica el nivel de riesgo económico en Europa y Estados Unidos. \
                    Variación de Commodities y Divisas: Actualizaciones diarias sobre cómo se mueven las principales materias primas y monedas. \
                    Indicadores Macroeconómicos de la jornada: Un resumen de los datos macroeconómicos más importantes del día.", () => {
                        appendMessage("Sobre que tema deseas informarte ahora?", () => {showInitialOptions();
                    });
                    });

                    break;
                case 'No, no deseo obtener más información del Daily Report.':
                    hideOptions('.daily-report-options');
                    appendMessage("De acuerdo. ¿Sobre qué tema te gustaría obtener información ahora?", () => {
                        showInitialOptions();
                    });
                    break;

                //INDICADORES
                case 'Indicadores':
                    appendMessage("De acuerdo. ¿Sobre qué sección financiera te gustaría obtener información?");
                        setTimeout(() => {  // Añade un retraso para mostrar las opciones después del mensaje
                            moveOptionsToEnd('.indicators-options');
                        }, 1500);  // Retraso de 1.5 segundos
                    break;

                    case 'Economía real':
                    appendMessage("En el apartado de economía real tenemos cuatro indicadores. ¿Sobre que indicador deseas informarte?");
                        setTimeout(() => {  // Añade un retraso para mostrar las opciones después del mensaje
                            moveOptionsToEnd('.economia-real-options');
                        }, 1500);  // Retraso de 1.5 segundos
                        break;

                        case 'Velocidad del ciclo económico':
                            appendMessage("El indicador de velocidad del ciclo económico es una herramienta que refleja la evolución de ciertos indicadores líderes de la economía. Se representa como un anemómetro en un gráfico. A través de este gráfico, puedes ver cómo cambia y evoluciona el indicador con el tiempo.", () => {
                                appendMessage("¿Quieres saber qué información proporciona específicamente?", () => {
                                    setTimeout(() => {  // Añade un retraso para mostrar las opciones después del mensaje
                                            moveOptionsToEnd('.velocidad-ciclo-options');
                                        }, 500);
                                });
                            });
                            break;
                            case 'Si, quiero obtener más información.':
                                hideOptions('.velocidad-ciclo-options');
                                appendMessage("Este indicador nos ofrece una visión anticipada de lo que podría ocurrir en los próximos 6 meses, propocionando una idea de las tendencias económicas futuras.", () => {
                                    appendMessage("El indicador consta de cuatro etapas distintas:\
                                                    1- Expansión: Priorizar sectores defensivos: Consumo Básico, Salud y Servicios Públicos. Reducir exposición a sectores cíclicos y de bienes de capital.\
                                                    2- Enfriamiento: Una desaceleración en el crecimiento.\
                                                    3- Recesión: Enfocarse en sectores resilientes: Consumo Básico, Salud y Servicios Públicos. Considerar oportunidades en sectores golpeados que puedan recuperarse rápidamente.\
                                                    4- Aceleración: Aumentar la exposición en sectores cíclicos: Tecnología, Consumo Discrecional e Industriales. Iniciar posiciones en sectores financieros y de materiales.\
                                                    Estas etapas te ayudan a entender mejor la dirección y el momentum de la economía. ", () => {
                                        appendMessage("Sobre que tema deseas informarte ahora?", () => {showInitialOptions();
                                });
                                });
                                });
                                break;
                            case 'No, no quiero obtener más información de este indicador.':
                                hideOptions('.velocidad-ciclo-options');
                                appendMessage("De acuerdo. ¿Sobre qué tema te gustaría obtener información ahora?", () => {
                                    showInitialOptions();
                                });
                                break;

                        case 'Radar de mercado':
                        appendMessage(" El Radar de mercado es una herramienta visual que representa tres características clave del mercado. ", () => {
                            appendMessage("Las tres características representadas en el Radar de mercado son:\
                                            Ciclo económico: Refleja la etapa actual de la economía.\
                                            Riesgo del mercado: Indica el nivel de incertidumbre o volatilidad del mercado.\
                                            Valoración del mercado: Muestra si el mercado está sobrevalorado o infravalorado.", () => {
                            appendMessage("¿Quieres aprender a interpretar el indicador?", () => {
                                setTimeout(() => {  // Añade un retraso para mostrar las opciones después del mensaje
                                        moveOptionsToEnd('.radar-de-mercado-options');
                                    }, 500);
                                });
                            });
                        });
                        break;

                            case 'Si, quiero aprender a como interpretarlo.':
                                    hideOptions('.radar-de-mercado-options');
                                    appendMessage("La posición de cada círculo negro indica la situación actual de esa característica en particular. Si el círculo está cerca del centro del Radar, refleja un dato negativo o desfavorable para esa característica. Por otro lado, si está más alejado del centro, indica un dato más positivo o favorable. En resumen, cuanto más cerca del centro, peor es el dato y viceversa.", () => {
                                            appendMessage("Sobre que tema deseas informarte ahora?", () => {showInitialOptions();
                                    });
                                    });
                                break;

                            case 'No, no deseo obtener esa información.':
                                hideOptions('.radar-de-mercado-options');
                                appendMessage("De acuerdo. ¿Sobre qué tema te gustaría obtener información ahora?", () => {
                                    showInitialOptions();
                                });
                                break;

                        case 'Mapa de calor por sectores':
                            appendMessage(" Este mapa representa la evolución de diversos indicadores macroeconómicos para diferentes sectores a lo largo del tiempo.", () => {
                                appendMessage("Con solo mirar el predominio de los colores en el mapa, puedes tener una idea de si la economía en general se está moviendo hacia un crecimiento (color verde) o hacia un enfriamiento (color rojo). ", () => {
                                appendMessage("¿Quieres aprender a interpretar el indicador?", () => {
                                    setTimeout(() => {  // Añade un retraso para mostrar las opciones después del mensaje
                                            moveOptionsToEnd('.mapa-sectores-options');
                                        }, 500);
                                    });
                                });
                            });
                            break;

                            case 'Si, quiero aprender a interpretarlo.':
                                    hideOptions('.mapa-sectores-options');
                                    appendMessage("Este indicador está formado por dos grupos de colores: Estos te ayudarán a identificar rápidamente como se desempeña un sector en comparación con la media:\
                                                Verde y Amarillo: Indican datos que están por encima de la media, lo que es una señal positiva.\
                                                Rojo y Naranja: Representan datos por debajo de la media, lo que puede ser una señal de alerta.", () => {
                                                    appendMessage("Adremás, con este indicador puedes tener información del índice bursátil. En el caso del índice bursátil, el mapa refleja el rendimiento mensual. Así que, además de los indicadores macroeconómicos, también puedes tener una idea de cómo se ha desempeñado el mercado de valores en un mes determinado.", () => {
                                                      appendMessage("Sobre que tema deseas informarte ahora?", () => {showInitialOptions();
                                             });
                                            });
                                     });
                                break;

                            case 'No, deseo informarme sobre otro tema.':
                                hideOptions('.mapa-sectores-options');
                                appendMessage("De acuerdo. ¿Sobre qué tema te gustaría obtener información ahora?", () => {
                                    showInitialOptions();
                                });
                                break;

                        case 'Mapa de calor Bancos Centrales':
                            appendMessage("Este mapa ilustra la evolución de la liquidez de varios bancos centrales alrededor del mundo. Los colores te ofrecen una visión rápida sobre la dirección de la liquidez mundial:\
                                            Verde: Indica un crecimiento del balance, es decir, mayor liquidez.\
                                            Rojo: Señala una retirada de liquidez.", () => {
                                appendMessage("¿Quieres aprender a interpretar el indicador?", () => {
                                    setTimeout(() => {  // Añade un retraso para mostrar las opciones después del mensaje
                                            moveOptionsToEnd('.mapa-bancos-options');
                                        }, 500);
                                });
                            });
                            break;

                            case 'Si, deseo aprender a interpretar este indicador.':
                                    hideOptions('.mapa-bancos-options');
                                    appendMessage("Los valores presentados en el mapa son normalizados basándose en su media y su desviación estándar de los últimos 10 años. Esta normalización permite una interpretación más fácil y directa de los datos.\
                                                    Una predominancia del color rojo puede sugerir una mayor volatilidad en el mercado. Por otro lado, si ves más verde, indica que la liquidez está aumentando.", () => {
                                                      appendMessage("Sobre que tema deseas informarte ahora?", () => {showInitialOptions();
                                             });
                                            });
                                break;
                            case 'No, no deseo informarme.':
                                hideOptions('.mapa-bancos-options');
                                appendMessage("De acuerdo. ¿Sobre qué tema te gustaría obtener información ahora?", () => {
                                    showInitialOptions();
                                });
                                break;

                    case 'Economía financiera':
                    appendMessage("En el apartado de economía financiera tenemos cuatro indicadores. ¿Sobre que indicador deseas informarte?");
                        setTimeout(() => {  // Añade un retraso para mostrar las opciones después del mensaje
                            moveOptionsToEnd('.economia-financiera-options');
                        }, 1500);  // Retraso de 1.5 segundos
                        break;

                        case 'Velocímetro de mercado':
                            appendMessage("Este gráfico actúa como un barómetro del mercado, mostrando la evolución de varios indicadores de riesgo específicos para el mercado europeo.", () => {
                                appendMessage("¿Te gustaría saber más sobre cómo leer este gráfico?", () => {
                                    setTimeout(() => {  // Añade un retraso para mostrar las opciones después del mensaje
                                            moveOptionsToEnd('.velocímetro-de-mercado-options');
                                        }, 500);
                                });
                            });
                            break;
                            case '¿Te gustaría saber más sobre cómo leer este gráfico?':
                                hideOptions('.velocímetro-de-mercado-options');
                                appendMessage("El gráfico tiene varios carriles semicirculares, y cada uno representa un indicador de riesgo diferente. En cada carril, encontrarás dos tipos de círculos:\
                                                Círculo relleno o negro: Representa el valor actual del indicador.\
                                                Círculo hueco: Muestra el valor del indicador hace dos semanas.\
                                                Esto te permite comparar rápidamente cómo ha evolucionado cada indicador de riesgo en un corto período de tiempo. ", () => {
                                    appendMessage("Hay varios indicadores clave en este gráfico, pero los más destacados son:\
                                                    VIX y MOVE: Estos indicadores tienen un peso considerable en los mercados financieros y son cruciales para entender la volatilidad.\
                                                    Spread 10Y-2Y y la prima: Estos son especialmente relevantes para entender la economía real y tienen un impacto significativo en las condiciones de mercado.", () => {
                                        appendMessage("Sobre que tema deseas informarte ahora?", () => {showInitialOptions();
                                    });
                                });
                                });
                                break;
                            case 'No, deseo interesearme en otro tema.':
                                hideOptions('.velocímetro-de-mercado-options');
                                appendMessage("De acuerdo. ¿Sobre qué tema te gustaría obtener información ahora?", () => {
                                    showInitialOptions();
                                });
                                break;

                        case 'Momentum de mercado':
                            appendMessage("El momentum de mercado te ofrece una visión dinámica de la evolución de varios indicadores de momentum específicos para la región específica.", () => {
                                appendMessage("¿Quieres aprender a interpretarlo?", () => {
                                    setTimeout(() => {  // Añade un retraso para mostrar las opciones después del mensaje
                                            moveOptionsToEnd('.momentum-de-mercado-options');
                                        }, 500);
                                });
                            });
                            break;
                            case 'Si, quiero aprender a interpretar el indicador de momentum.':
                                hideOptions('.momentum-de-mercado-options');
                                appendMessage("El indicador presenta varias franjas horizontales, cada una correspondiente a un indicador de momentum diferente. En cada franja encontrarás dos elementos clave:\
                                                Bola naranja: Indica el valor actual del indicador.\
                                                Extremo de la línea punteada: Representa el valor del indicador hace dos semanas.\
                                                Si observas que las direcciones de las bolas naranjas están alineadas, esto suele sugerir que la tendencia del mercado es fuerte.", () => {
                                    appendMessage("Los indicadores más importantes en este contexto son la pendiente de la M20 y la M200. Cuando estos dos están alineados, es una señal especialmente fuerte acerca de la dirección y la robustez de la tendencia del mercado.\
                                                    La alineación de estos indicadores te brinda una información muy valiosa sobre el momentum del mercado. ", () => {
                                        appendMessage("Sobre que tema deseas informarte ahora?", () => {showInitialOptions();
                                    });
                                });
                                });
                                break;
                            case 'No, no quiero obtener más información del momentum de mercado.':
                                hideOptions('.momentum-de-mercado-options');
                                appendMessage("De acuerdo. ¿Sobre qué tema te gustaría obtener información ahora?", () => {
                                    showInitialOptions();
                                });
                                break;

                        case 'GVCi Risk':
                            appendMessage("Esta herramienta detalla la progresión del indicador GVCi Risk a lo largo del tiempo, representado en el eje izquierdo. Este indicador se compone de diversos subindicadores que forman parte del denominado 'Velocímetro de Riesgo'. Adicionalmente, se superpone la evolución del índice correspondiente, utilizando el eje derecho, para correlacionar ambos comportamientos durante el mismo lapso temporal.", () => {
                                appendMessage("¿Quieres aprender a interpretar el indicador?", () => {
                                    setTimeout(() => {  // Añade un retraso para mostrar las opciones después del mensaje
                                            moveOptionsToEnd('.gvci-risk-options');
                                        }, 500);
                                });
                            });
                            break;
                            case 'Si, quiero aprender a interpretar el GVCi Risk.':
                                hideOptions('.gvci-risk-options');
                                appendMessage("El GVCi Risk varía en un rango de 0 a 100, donde un valor por debajo de 50 indica volatilidad reducida en el conjunto del mercado, mientras que un valor alto, mayor de 50 señala una volatilidad elevada en su conjunto", () => {
                                    appendMessage("La interpretación de este gráfico se centra en la tendencia del riesgo reflejada por el GVCi Risk. Una tendencia ascendente sugiere la posibilidad de una futura disminución en el mercado, mientras que una tendencia descendente podría indicar una potencial alza. Es importante monitorear estas tendencias para anticipar movimientos del mercado y ajustar estrategias de inversión acorde a la percepción del riesgo.", () => {
                                        appendMessage("Sobre que tema deseas informarte ahora?", () => {showInitialOptions();
                                    });
                                });
                                });
                                break;
                            case 'No, no quiero obtener más información del GVCi Risk.':
                                hideOptions('.gvci-risk-options');
                                appendMessage("De acuerdo. ¿Sobre qué tema te gustaría obtener información ahora?", () => {
                                    showInitialOptions();
                                });
                                break;

                        case 'GVCi Momentum':
                            appendMessage("Este gráfico muestra la evolución en el tiempo del GVCi Momentum, que es un indicador compuesto por varios subindicadores que puedes encontrar en el gráfico de Momentum de mercado. Además, se superpone la evolución del precio del activo para ofrecer una perspectiva más completa.", () => {
                                appendMessage("¿Quieres aprender a interpretar el indicador?", () => {
                                    setTimeout(() => {  // Añade un retraso para mostrar las opciones después del mensaje
                                            moveOptionsToEnd('.gvci-momentum-options');
                                        }, 500);
                                });
                            });
                            break;
                            case 'Si, quiero aprender a interpretar el GVCi Momentum.':
                                hideOptions('.gvci-momentum-options');
                                appendMessage("El eje izquierdo muestra los valores del GVCi Momentum, que varían entre 0 y 100. Estos valores te ofrecen una idea sobre las condiciones del mercado:\
                                                Valores cercanos a 0 indican sobreventa.\
                                                Valores cercanos a 100 sugieren sobrecompra.", () => {
                                    appendMessage("El eje derecho muestra la evolución del Eurostoxx50, lo cual te permite hacer una comparación en el mismo período de tiempo.\
                                                    La interpretación de este gráfico es especialmente relevante cuando los niveles alcanzan 1 o -1, similar a cómo se interpretan otros indicadores clásicos de sobrecompra y sobreventa, como el RSI. ¿Quieres saber más sobre cómo estos niveles se relacionan con las condiciones del mercado?", () => {
                                        appendMessage("Sobre que tema deseas informarte ahora?", () => {showInitialOptions();
                                    });
                                });
                                });
                                break;
                            case 'No, no quiero obtener más información del GVCi Momentum.':
                                hideOptions('.gvci-momentum-options');
                                appendMessage("De acuerdo. ¿Sobre qué tema te gustaría obtener información ahora?", () => {
                                    showInitialOptions();
                                });
                                break;

                //CURVA TIPOS DE INTERÉS
                case 'Curva de los tipos de interés':
                    appendMessage("La curva de tipos de interés es un gráfico que representa el rendimiento de la deuda, ya sea pública o corporativa, en función de diferentes vencimientos y plazos. Sirve para entender las expectativas del mercado sobre la economía y la dirección de los tipos de interés en el futuro.", () => {
                        appendMessage("¿Te gustaría saber más sobre cómo interpretar esta curva?", () => {
                            setTimeout(() => {  // Añade un retraso para mostrar las opciones después del mensaje
                                    moveOptionsToEnd('.curva-tipos-options');
                                }, 500);
                        });
                    });
                    break;

                case 'Sí, ¿cómo se puede interpretar?':
                    hideOptions('.curva-tipos-options');
                    appendMessage("La interpretación se basa en la forma que adopta la curva. Hay tres escenarios principales: \
                                Curva creciente: Refleja una economía que funciona de manera normal. Si la curva asciende, sugiere que los bonos con vencimientos más largos ofrecen mayores tipos de interés, indicando una expansión económica y un ambiente favorable para invertir.\
                                Curva invertida: Es lo opuesto a la curva creciente. Aquí, los tipos de interés a corto plazo son mayores que los de largo plazo, lo que puede anticipar una recesión. Actualmente, hay indicios de este escenario debido a cambios recientes en la política monetaria y expectativas de recesión.\
                                Curva plana: En este escenario, los rendimientos son similares independientemente del vencimiento de la deuda, señalando incertidumbre económica.", () => {
                        appendMessage("Sobre que tema deseas informarte ahora?", () => {showInitialOptions();
                                    });
                     });
                    break;
                case 'No, no deseo obtener más información.':
                    hideOptions('.curva-tipos-options');
                    appendMessage("De acuerdo. ¿Sobre qué tema te gustaría obtener información ahora?", () => {
                        showInitialOptions();
                    });
                    break;


                //EQUITY SANDBOX
                case 'Equity Sandbox':
                    appendMessage("Equity Sandbox es un apartado especializado en nuestro portal que te proporciona herramientas para obtener una visión comprensiva del estado y comportamiento de las cotizaciones en tiempo real.", () => {
                        appendMessage("Quieres conocer las herramientas que te ofrecemos en este apartado?", () => {
                            setTimeout(() => {  // Añade un retraso para mostrar las opciones después del mensaje
                                    moveOptionsToEnd('.equity-sandbox-options');
                                }, 500);
                        });
                    });
                break;
                case 'Sí, ¿cuáles son?':
                    hideOptions('.equity-sandbox-options');
                    appendMessage("Dentro del este apartado te ofrecemos los siguientes widgets, todos provenientes de TradingView:\
                                Stock Heatmap Widget: Te brinda una visión general de cómo se están comportando las cotizaciones en el día de hoy, permitiéndote identificar rápidamente tendencias y movimientos destacados.\
                                Advanced Real-Time Chart Widget: Una herramienta poderosa para realizar tu propio análisis técnico en tiempo real. Ideal si buscas hacer predicciones basadas en patrones gráficos y otros indicadores técnicos.\
                                Fundamental Data Widget: Aquí puedes obtener datos fundamentales sobre las empresas, lo que te permitirá hacer una evaluación más profunda basada en métricas financieras y de rendimiento.", () => {
                                appendMessage("Sobre que tema deseas informarte ahora?", () => {showInitialOptions();
                                    });
                    });
                break;
                case 'No, no deseo obtener esa información.':
                    hideOptions('.equity-sandbox-options');
                    appendMessage("De acuerdo. ¿Sobre qué tema te gustaría obtener información ahora?", () => {
                        showInitialOptions();
                    });
                break;
                }

                // Desplaza el chat hasta la parte inferior
                scrollToBottom();
            }

            function moveOptionsToEnd(selector) {
                const chatContainer = document.getElementById('chatbotContainer');
                const options = document.querySelector(selector);
                options.style.marginLeft = "25px";
                options.style.marginTop = "-5px";
                chatContainer.appendChild(options); // Mueve las opciones al final del contenedor
                options.classList.remove('hidden');

                // Desplaza el chat hasta la parte inferior
                scrollToBottom();
            }

            function appendMessageWithTimestamp(messageText, userOrBot) {
                const messageContainer = document.getElementById('messageContainer');

                const outerDiv = document.createElement('div');
                outerDiv.classList.add('message-container', userOrBot);

                const messageDiv = document.createElement('div');
                messageDiv.classList.add('message', userOrBot + '-message');
                messageDiv.innerText = messageText;

                const timestamp = document.createElement('div');
                timestamp.classList.add('timestamp', userOrBot);
                timestamp.innerText = getCurrentTime();

                if (userOrBot === 'bot') {
                    const botAvatar = document.createElement('div');
                    botAvatar.classList.add('bot-avatar');
                    outerDiv.appendChild(botAvatar);

                    const botContent = document.createElement('div');
                    botContent.classList.add('bot-content');
                    outerDiv.appendChild(botContent);

                    const botName = document.createElement('div');
                    botName.classList.add('bot-name');
                    botName.innerText = 'GVC Institute';
                    botContent.appendChild(botName);

                    botContent.appendChild(messageDiv);
                    botContent.appendChild(timestamp);
                } else {
                    outerDiv.appendChild(messageDiv);
                    outerDiv.appendChild(timestamp);
                }

                messageContainer.appendChild(outerDiv);
                scrollToBottom();
            }

            function appendMessage(messageText, callback) {
                const messageContainer = document.getElementById('messageContainer');

                // Crear y añadir el indicador de escribiendo
                const typingIndicatorContainer = document.createElement('div');
                typingIndicatorContainer.classList.add('message-container', 'bot');
                const botAvatar = document.createElement('div');
                botAvatar.classList.add('bot-avatar');
                typingIndicatorContainer.appendChild(botAvatar);
                const botContent = document.createElement('div');
                botContent.classList.add('bot-content');
                typingIndicatorContainer.appendChild(botContent);
                const typingMessageDiv = document.createElement('div');
                typingMessageDiv.classList.add('typing-message');
                botContent.appendChild(typingMessageDiv);
                const typingDiv = document.createElement('div');
                typingDiv.classList.add('typing-indicator');
                for (let i = 0; i < 3; i++) {
                    typingDiv.appendChild(document.createElement('span'));
                }
                typingMessageDiv.appendChild(typingDiv);
                messageContainer.appendChild(typingIndicatorContainer);

                // Después de 1 segundo, ocultar el indicador y mostrar el mensaje real
                setTimeout(() => {
                    messageContainer.removeChild(typingIndicatorContainer);
                    appendMessageWithTimestamp(messageText, 'bot');
                    if (callback) callback();  // Ejecuta el callback si se proporciona
                }, 1000);
            }

            function appendUserMessage(messageText) {
                appendMessageWithTimestamp(messageText, 'user');
            }
            function scrollToBottom() {
                const chatContainer = document.getElementById('chatbotContainer');
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }

            function toggleChatbot() {
                document.getElementById('initialTimestamp').innerText = getCurrentTime();
                const chatbot = document.getElementById('chatbotContainer');
                const toggleButtonImage = document.getElementById('chatbotToggleButton');

                if (chatbot.classList.contains('visible')) {
                    chatbot.classList.remove('visible');
                    toggleButtonImage.src = chatImage.src;
                    toggleButtonImage.style.padding = "0";  // Remueve el padding
                } else {
                    chatbot.classList.add('visible');
                    toggleButtonImage.src = crossImage.src;
                    toggleButtonImage.style.padding = "15%";  // Agrega padding para hacer la imagen más pequeña
                }
            }
            function showInitialOptions() {
                const initialOptionsContainer = document.querySelector('.initial-options');
                initialOptionsContainer.classList.remove('hidden');
                // Desplaza el chat hasta la parte inferior
                scrollToBottom();
            }

            function hideOptions(selector) {
                const options = document.querySelector(selector);
                if(options) {
                    options.classList.add('hidden');
                }
            }





//TABLAS CATALUNYA
const url_cat = 'https://rest.gvcgaesco.es/ser-gvc-institute/chart/datos_tablas';

// Asegúrate de que este código se ejecute una vez que el DOM esté completamente cargado
document.addEventListener('DOMContentLoaded', function () {
    fetch(url_cat)
        .then(response => response.json())
        .then(data => {
            const serie = data.series[0];

            function formatNumber(num) {
                return num !== undefined ? parseFloat(num).toFixed(2) : 'N/A';
            }

            function formatNumber2(num) {
                return num !== undefined ? parseFloat(num).toFixed(0) : 'N/A';
            }

            // Selecciona correctamente la tabla por su ID
            const tablaCat = document.querySelector('#tabla_cat'); // Cambiado de .tabla_cat a #tabla_cat

            // Ajusta el contenido de las celdas
            tablaCat.querySelector('#pib_celda').innerHTML = `PIB (YoY): ${formatNumber(serie.dato49)}%<br>PIB (QoQ): ${serie.dato54}%`;
            tablaCat.querySelector('#inflacion_celda').innerHTML = `Inflació YoY: ${formatNumber(serie.dato6)}%<br>Inflació subyacent YoY: ${formatNumber(serie.dato7)}%`;
            tablaCat.querySelector('#empleo').innerHTML = `Taxa d'atur: ${formatNumber(8.97)}%<br>Taxa d'activitat: ${formatNumber(serie.dato55)}%<br>Taxa d'ocupació: ${formatNumber(serie.dato56)}%`;
            tablaCat.querySelector('#sector_exterior').innerHTML = `Exportacions (YoY): ${formatNumber(serie.dato2)}%<br>Importacions (YoY): ${formatNumber(serie.dato3)}%<br>Exportacions (Milions): ${formatNumber(serie.dato1)}€<br>Importacions (Milions): ${formatNumber(serie.dato4)}€`;
            tablaCat.querySelector('#turismo').innerHTML = `Passatgers aeris mensuals (milers): ${formatNumber(serie.dato40)}<br>Passatgers marítims mensuals (milers): ${formatNumber(serie.dato35)}<br>Turistes extrangers (YoY): ${formatNumber(serie.dato42)}%<br>Despesa mitjana turista: ${formatNumber(serie.dato41)}€`;
            tablaCat.querySelector('#servicios').innerHTML = `Índex de negoci serveis (YoY): ${formatNumber(serie.dato9)}%<br>Índex de negoci industrial (YoY): ${formatNumber(serie.dato22)}%`;
            tablaCat.querySelector('#construccion').innerHTML = `Habitatges en contrucció (YoY): ${formatNumber(serie.dato26)}%<br>Licitacions (YoY): ${formatNumber(serie.dato27)}%<br>Producció ciment (YoY): ${formatNumber(serie.dato29)}%<br>Producció industrial (YoY): ${formatNumber(serie.dato30)}%`;
            tablaCat.querySelector('#consumo').innerHTML = `Vendes grans superfícies (YoY): ${formatNumber(serie.dato12)}%<br>Vendes detall (YoY): ${formatNumber(serie.dato15)}%`;
            tablaCat.querySelector('#automocion').innerHTML = `Vehicles totals (Var.): ${formatNumber2(serie.dato32)} unitats<br>Vehicles industrials (Var.): ${formatNumber2(serie.dato31)} unitats<br>Vehicles turismes (Var.): ${formatNumber2(serie.dato33)} unitats`;
            tablaCat.querySelector('#logistica').innerHTML = `Contenidors ports (Var.): ${formatNumber2(serie.dato37)} unitats<br>Mercaderies ports (Var.): ${formatNumber2(serie.dato36)} milers tones<br>Vaixells mercants (Var.): ${formatNumber(-44)} unitats<br>Mercaderies aèries (Var.): ${formatNumber2(serie.dato40)} tones<br>Aeronaus (Var.): ${formatNumber2(serie.dato38)} unitats`;
        })
        .catch(error => {
            console.error('Error al obtener los datos:', error);
            document.querySelectorAll('#tabla_cat td').forEach(td => td.innerHTML = 'Error al cargar los datos'); // Ajustado para usar #tabla_cat y apuntar a los td directamente
        });
});





//Gráficos CAT
function processDataCat(seriesData, group) {
            let traces = [];
            // Define los campos a incluir en cada grupo
            let groupFields = {
              'Creixement': ["dato49", "dato50", "dato51", "dato52", "dato53", "dato54"],   // Economia
              'Inflació': ["dato6", "dato7"],                                             // Inflació
              'Activitat Laboral': ["dato55", "dato56", "dato57"],                        // Activitat laboral
              'Sector Exterior': ["dato2", "dato3"],                                      // Sector exterior
              'Índex de negoci Industrial': ["dato22", "dato23", "dato24", "dato25"],     // Negoci Industrial           
              'Serveis': ["dato9", "dato10", "dato11"],                                   // Serveis
              'Construcció': ["dato26", "dato27", "dato28", "dato29", "dato30"],          // Construcció
              'Turisme': ["dato40", "dato41", "dato42"],
              'Grans superfícies': ["dato12", "dato13", "dato14"],                        // Grans superfícies
              'Vendes minoristes': ["dato15", "dato16", "dato17"],                        // Vendes minoristes
              'Automoció': ["dato32", "dato31", "dato33"],                                // Automoció
              'Logística': ["dato34", "dato35", "dato36", "dato37"]                       // Logística
            };


            // Mapa de nombres para la leyenda
            let legendNames = {
                'dato49': 'PIB YoY (%)',
                'dato50': 'Demanda interna YoY (%)',
                'dato51': 'Consum de les llars YoY (%)',
                'dato52': 'Consum de les adm. públiques YoY (%)',
                'dato53': 'Formació bruta de capital YoY (%)',
                'dato54': 'PIB QoQ (%)',

                'dato6': 'Inflació YoY (%)',
                'dato7': 'Inflació Subjacent YoY (%)',
                
                'dato55': "Taxa d'activitat",
                'dato56': "Taxa d'ocupació",
                'dato57': "Taxa d'atur",

                'dato2': 'Exportacions YoY (%)',
                'dato3': 'Importacions YoY (%)',

                'dato40': 'Passatgers aeris (Var.)',
                'dato35': 'Passatgers marítims (Var.)',
                'dato42': 'Turistes estranters (Var.)',
                'dato41': 'Despesa mitjana (Milers)',

                'dato22': 'Índex de negoci Indústria General YoY (%)',
                'dato23': 'Béns de consum YoY (%)',
                'dato24': "Béns d'equipament YoY (%)",
                'dato25': 'Bens intermedis YoY (%)',

                'dato9': 'Índex de negoci Serveis General YoY (%)',
                'dato10': 'Índex de negoci Serveis Comerç YoY (%)',
                'dato11': 'Índex de negoci altres serveis YoY(%)',

                'dato26': 'Habitatges en construcció (%)',
                'dato27': 'Licitacions YoY (%)',
                'dato28': 'Consum de ciment (Var.)',
                'dato29': 'Producció ciment (Var.)',
                'dato30': 'Índex Producció Industrial (%)',

                'dato12': 'Vendes grans superfícies General YoY (%)',
                'dato13': 'Vendes grans superfícies Alimentació YoY (%)',
                'dato14': 'Vendes grans superfícies resta productes (%)',

                'dato15': 'Vendes minoristes General YoY (%)',
                'dato16': 'Vendes minoristes Alimentació YoY (%)',
                'dato17': 'Vendes minoristes resta productes (%)',

                'dato32': 'Matriculació total vehicles (Var.)',
                'dato31': 'Matriculació vehicles industrials (Var.)',
                'dato33': 'Matriculació turismes (Var.)',

                'dato40': 'Passatgers aeris (Var.)',
                'dato41': 'Despesa mitjana turista',
                'dato42': 'Turistes estrangers (Var.)',

                'dato34': 'Vaixells mercants (Var.)',
                'dato35': 'Passatgers marítims (Var.)',
                'dato36': 'Mercaderies marítimes (Var.)',
                'dato37': 'Contenidors marítims (Var.)',
            };

            let categories = groupFields[group];

            categories.forEach(category => {
                let xValues = [];
                let tempYValues = [];
                let finalYValues = [];
                seriesData.forEach(item => {
                    let dateValue = item.fecha ? item.fecha : item.mmmyy;
                    xValues.push(dateValue);
                    if (item[category] !== undefined) {
                        tempYValues.push(item[category]);
                    }
                });

                let shouldTransformZeroToNull = group === 'Turisme' || group === 'Índex de negoci Industrial';

                  for (let i = 0; i < tempYValues.length; i++) {
                      if (shouldTransformZeroToNull && i <= 120 && tempYValues[i] === 0) {
                          finalYValues.push(null);
                      } else {
                          finalYValues.push(tempYValues[i]);
                      }
                  }

                // Revisa los últimos valores para convertir ceros consecutivos a null en todas las series
                  for (let i = finalYValues.length - 1; i >= 0; i--) {
                      if (finalYValues[i] === 0) {
                          finalYValues[i] = null;
                      } else {
                          break; // Deja de revisar una vez que encuentres un valor no cero
                      }
                  }

                  let trace = {
                      x: xValues,
                      y: finalYValues,
                      type: 'scatter',
                      mode: 'lines',
                      name: legendNames[category] || category,
                      yaxis: category === 'dato37' ? 'y2' : 'y1'
                  };

                  traces.push(trace);
              });
              return traces;
              }



        function fetchAndPlotDataCat() {
            // Define las URLs para series mensuales y trimestrales
            const urls = [
                'https://rest.gvcgaesco.es/ser-gvc-institute/chart/series_mensuales/200',
                'https://rest.gvcgaesco.es/ser-gvc-institute/chart/series_trimestrales/200'
            ];

            // Inicializa un array para almacenar las promesas fetch
            let promises = urls.map(url => fetch(url).then(response => response.json()));

            // Espera a que todas las promesas se resuelvan
            Promise.all(promises)
                .then(dataArrays => {
                    // Combina los datos de las series mensuales y trimestrales en un solo array
                    let combinedData = [].concat(...dataArrays.map(data => data.status === "OK" ? data.series : []));
                    const group = document.getElementById('macroSelectCat').value;
                    const processedData = processDataCat(combinedData, group);
                    plotDataCat(processedData, group);
                })
                .catch(error => console.error('Error fetching data:', error));
        }



const groupConfigurations = {
    'Creixement': {
        yAxisTitle: 'Dades PIB (%)',
        yAxis2Title: null,
        yAxisLineColor: 'black',
        zerolineY: true,
        zerolineYColor: 'black',
    },
    'Inflació': {
        yAxisTitle: 'Dades (%)',
        yAxis2Title: null,
        zerolineY: true,
        zerolineYColor: 'black',
    },
    'Activitat Laboral': {
        yAxisTitle: 'Dades (%)',
        yAxis2Title: null,
        zerolineY: true,
        zerolineYColor: 'black',
    },
    'Sector Exterior': {
        yAxisTitle: 'Dades (%)',
        yAxis2Title: null,
        zerolineY: true,
        zerolineYColor: 'black',
    },
    'Turisme': {
        yAxisTitle: 'Dades',
        yAxis2Title: null,
        zerolineY: true,
        zerolineYColor: 'black',
    },
    'Serveis': {
        yAxisTitle: 'Dades (%)',
        yAxis2Title: null,
        zerolineY: true,
        zerolineYColor: 'black',
    },
    'Construcció': {
        yAxisTitle: 'Dades',
        yAxis2Title: null,
        zerolineY: true,
        zerolineYColor: 'black',
    },
    'Automoció': {
        yAxisTitle: 'Dades (Nombre de vehicles)',
        yAxis2Title: null,
        zerolineY: true,
        zerolineYColor: 'black',
    },
    'Grans superfícies': {
        yAxisTitle: 'Dades (%)',
        yAxis2Title: null,
        zerolineY: true,
        zerolineYColor: 'black',
    },
    'Vendes minoristes': {
        yAxisTitle: 'Dades (%)',
        yAxis2Title: null,
        zerolineY: true,
        zerolineYColor: 'black',
    },
    'Logística': {
        yAxisTitle: 'Dades',
        yAxis2Title: 'Contenidors marítims (Var.)', // Título para el segundo eje Y
        yAxisLineColor: 'black',
        zerolineY: true,
        zerolineYColor: 'black',
    },
    'Índex de negoci Industrial': {
        yAxisTitle: 'Dades (%)',
        yAxis2Title: null,
        zerolineY: true,
        zerolineYColor: 'black',
    }, 
};

      function plotDataCat(traces, groupName) {
          const config = groupConfigurations[groupName] || {
              yAxisTitle: 'Valor',
              yAxis2Title: null,
              yAxisLineColor: 'black',
              zerolineX: false, // Predeterminado a false para grupos sin esta configuración
          };

          var layout2 = {
              title: {
                  text: groupName,
                  font: { size: 24 },
                  xref: 'paper', x: 0
              },
              showlegend: true,
              hovermode: 'x unified',
              legend: {
                  orientation: 'h',
                  x: 0.5, y: -0.45,
                  xanchor: 'center', yanchor: 'top'
              },
              yaxis: {
                  title: config.yAxisTitle,
                  showline: true,
                  linecolor: config.yAxisLineColor,
                  zeroline: config.zerolineY,
                  zerolinecolor: config.zerolineYColor,
                  showticklabels: true,
                  ticklen: 5,

              },
              xaxis: {
                  title: 'Data',
                  showgrid: false,
                  zeroline: config.zerolineX,
                  zerolinecolor: config.zerolineXColor,
                  tickangle: -45,
                  nticks: 18,
                  showline: true,
                  showticklabels: true,
                  ticklen: 5,
                  showspikes: true,
                  spikemode: 'across',
                  spikesnap: 'cursor',
                  spikethickness: 1,
                  rangeslider: { visible: true, thickness: 0.1 },
              },
          };

          if (config.yAxis2Title) {
            layout2.yaxis2 = {
                title: config.yAxis2Title,
                overlaying: 'y',
                side: 'right',
                showline: true,
                linecolor: config.yAxisLineColor,
                zeroline: false,
                showticklabels: true,
                ticklen: 5,
            };
        }

        Plotly.newPlot('chart', traces, layout2);
              }

document.addEventListener("DOMContentLoaded", fetchAndPlotDataCat);



</script>
</body>
</html>
